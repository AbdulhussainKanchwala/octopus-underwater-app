(self.webpackChunkEMS=self.webpackChunkEMS||[]).push([[977],{8977:(e,t,o)=>{"use strict";o.r(t),o.d(t,{CompanyModule:()=>Qn});var r=o(8583),n=o(7716),i=o(5501);let s=(()=>{class e{hasChildColumns(){return!(!(this.childColumns&&this.childColumns.length>0)||1===this.childColumns.length&&this.childColumns.first===this)}toColDef(){let e=this.createColDefFromGridColumn(this);return this.hasChildColumns()&&(e.children=this.getChildColDefs(this.childColumns)),e}getChildColDefs(e){return e.filter(e=>!e.hasChildColumns()).map(e=>e.toColDef())}createColDefFromGridColumn(e){return function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o}(e,["childColumns"])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["ag-grid-column"]],contentQueries:function(t,o,r){if(1&t&&n.Suo(r,e,4),2&t){let e;n.iGM(e=n.CRH())&&(o.childColumns=e)}},inputs:{filterFramework:"filterFramework",filterParams:"filterParams",floatingFilterComponent:"floatingFilterComponent",floatingFilterComponentParams:"floatingFilterComponentParams",floatingFilterComponentFramework:"floatingFilterComponentFramework",floatingFilterFramework:"floatingFilterFramework",filter:"filter",headerName:"headerName",headerValueGetter:"headerValueGetter",headerTooltip:"headerTooltip",headerClass:"headerClass",suppressHeaderKeyboardEvent:"suppressHeaderKeyboardEvent",columnGroupShow:"columnGroupShow",toolPanelClass:"toolPanelClass",suppressColumnsToolPanel:"suppressColumnsToolPanel",suppressFiltersToolPanel:"suppressFiltersToolPanel",tooltipComponent:"tooltipComponent",tooltipComponentFramework:"tooltipComponentFramework",tooltipComponentParams:"tooltipComponentParams",children:"children",groupId:"groupId",openByDefault:"openByDefault",marryChildren:"marryChildren",headerGroupComponent:"headerGroupComponent",headerGroupComponentFramework:"headerGroupComponentFramework",headerGroupComponentParams:"headerGroupComponentParams",colId:"colId",field:"field",type:"type",valueGetter:"valueGetter",valueFormatter:"valueFormatter",refData:"refData",keyCreator:"keyCreator",equals:"equals",tooltipField:"tooltipField",tooltipValueGetter:"tooltipValueGetter",checkboxSelection:"checkboxSelection",icons:"icons",suppressNavigable:"suppressNavigable",suppressKeyboardEvent:"suppressKeyboardEvent",suppressPaste:"suppressPaste",suppressFillHandle:"suppressFillHandle",hide:"hide",initialHide:"initialHide",lockVisible:"lockVisible",lockPosition:"lockPosition",suppressMovable:"suppressMovable",editable:"editable",valueSetter:"valueSetter",valueParser:"valueParser",cellEditor:"cellEditor",cellEditorFramework:"cellEditorFramework",cellEditorParams:"cellEditorParams",cellEditorSelector:"cellEditorSelector",singleClickEdit:"singleClickEdit",newValueHandler:"newValueHandler",cellEditorPopup:"cellEditorPopup",cellEditorPopupPosition:"cellEditorPopupPosition",onCellValueChanged:"onCellValueChanged",onCellClicked:"onCellClicked",onCellDoubleClicked:"onCellDoubleClicked",onCellContextMenu:"onCellContextMenu",getQuickFilterText:"getQuickFilterText",filterValueGetter:"filterValueGetter",floatingFilter:"floatingFilter",wrapHeaderText:"wrapHeaderText",autoHeaderHeight:"autoHeaderHeight",headerComponent:"headerComponent",headerComponentFramework:"headerComponentFramework",headerComponentParams:"headerComponentParams",menuTabs:"menuTabs",columnsMenuParams:"columnsMenuParams",suppressMenu:"suppressMenu",headerCheckboxSelection:"headerCheckboxSelection",headerCheckboxSelectionFilteredOnly:"headerCheckboxSelectionFilteredOnly",chartDataType:"chartDataType",pinned:"pinned",initialPinned:"initialPinned",lockPinned:"lockPinned",pinnedRowCellRenderer:"pinnedRowCellRenderer",pinnedRowCellRendererFramework:"pinnedRowCellRendererFramework",pinnedRowCellRendererParams:"pinnedRowCellRendererParams",pinnedRowValueFormatter:"pinnedRowValueFormatter",pivot:"pivot",initialPivot:"initialPivot",pivotIndex:"pivotIndex",initialPivotIndex:"initialPivotIndex",pivotComparator:"pivotComparator",enablePivot:"enablePivot",cellStyle:"cellStyle",cellClass:"cellClass",cellClassRules:"cellClassRules",cellRenderer:"cellRenderer",cellRendererFramework:"cellRendererFramework",cellRendererParams:"cellRendererParams",cellRendererSelector:"cellRendererSelector",autoHeight:"autoHeight",wrapText:"wrapText",enableCellChangeFlash:"enableCellChangeFlash",suppressCellFlash:"suppressCellFlash",rowDrag:"rowDrag",rowDragText:"rowDragText",dndSource:"dndSource",dndSourceOnRowDrag:"dndSourceOnRowDrag",rowGroup:"rowGroup",initialRowGroup:"initialRowGroup",rowGroupIndex:"rowGroupIndex",initialRowGroupIndex:"initialRowGroupIndex",enableRowGroup:"enableRowGroup",enableValue:"enableValue",aggFunc:"aggFunc",initialAggFunc:"initialAggFunc",defaultAggFunc:"defaultAggFunc",allowedAggFuncs:"allowedAggFuncs",showRowGroup:"showRowGroup",sortable:"sortable",sort:"sort",initialSort:"initialSort",sortIndex:"sortIndex",initialSortIndex:"initialSortIndex",sortingOrder:"sortingOrder",comparator:"comparator",unSortIcon:"unSortIcon",sortedAt:"sortedAt",colSpan:"colSpan",rowSpan:"rowSpan",width:"width",initialWidth:"initialWidth",minWidth:"minWidth",maxWidth:"maxWidth",flex:"flex",initialFlex:"initialFlex",resizable:"resizable",suppressSizeToFit:"suppressSizeToFit",suppressAutoSize:"suppressAutoSize"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),a=(()=>{class e extends i.vA3{constructor(e){super(),this._ngZone=e}setEmitterUsedCallback(e){this.isEmitterUsed=e}setTimeout(e,t){this._ngZone?this._ngZone.runOutsideAngular(()=>{window.setTimeout(()=>{e()},t)}):window.setTimeout(()=>{e()},t)}setInterval(e,t){return new i.j_S(o=>{this._ngZone?this._ngZone.runOutsideAngular(()=>{o(window.setInterval(()=>{e()},t))}):o(window.setInterval(()=>{e()},t))})}addEventListener(e,t,o,r){this.isOutsideAngular(t)&&this._ngZone?this._ngZone.runOutsideAngular(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r)}dispatchEvent(e,t,o=!1){this.isOutsideAngular(e)?this._ngZone?this._ngZone.runOutsideAngular(t):t():(this.isEmitterUsed(e)||o)&&(!n.R0b.isInAngularZone()&&this._ngZone?this._ngZone.run(t):t())}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return t&&"agInit"in t}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(n.R0b))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),l=(()=>{class e extends i.Nk3{setViewContainerRef(e){this.viewContainerRef=e}setComponentFactoryResolver(e){this.componentFactoryResolver=e}createWrapper(e){let t=this,o=new class extends class{init(e){this._params=e,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}destroy(){this._frameworkComponentInstance&&"function"==typeof this._frameworkComponentInstance.destroy&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}}{init(e){super.init(e),this._componentRef.changeDetectorRef.detectChanges()}createComponent(){return t.createComponent(e)}hasMethod(e){return null!=o.getFrameworkComponentInstance()[e]}callMethod(e,t){const r=this.getFrameworkComponentInstance();return o.getFrameworkComponentInstance()[e].apply(r,t)}addMethod(e,t){o[e]=t}};return o}createComponent(e){let t=this.componentFactoryResolver.resolveComponentFactory(e);return this.viewContainerRef.createComponent(t)}}return e.\u0275fac=function(){let t;return function(o){return(t||(t=n.n5z(e)))(o||e)}}(),e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),u=(()=>{class e{constructor(e,t,o,r,s){this.viewContainerRef=t,this.angularFrameworkOverrides=o,this.frameworkComponentWrapper=r,this.componentFactoryResolver=s,this._initialised=!1,this._destroyed=!1,this._fullyReady=i.j_S.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.deltaColumnMode=void 0,this.applyColumnDefOrder=void 0,this.immutableColumns=void 0,this.suppressSetColumnStateEvents=void 0,this.suppressColumnStateEvents=void 0,this.colWidth=void 0,this.minColWidth=void 0,this.maxColWidth=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.components=void 0,this.frameworkComponents=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.stopEditingWhenGridLosesFocus=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.defaultExportParams=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererFramework=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererFramework=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.groupRowsSticky=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentFramework=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentFramework=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDelay=void 0,this.cellFadeDelay=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererFramework=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.deprecatedEmbedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererFramework=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.groupRowInnerRenderer=void 0,this.groupRowInnerRendererFramework=void 0,this.groupMultiAutoColumn=void 0,this.groupUseEntireRow=void 0,this.groupSuppressAutoColumn=void 0,this.rememberGroupStateWhenNewData=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.immutableData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.deltaRowDataMode=void 0,this.batchUpdateWaitMillis=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideStoreType=void 0,this.serverSideInfiniteScroll=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideFilterAllLevels=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSideSortingAlwaysResets=void 0,this.serverSideFilteringAlwaysResets=void 0,this.suppressEnterpriseResetOnNewColumns=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellSelection=void 0,this.suppressCellFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.angularCompileRows=void 0,this.angularCompileFilters=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.suppressKeyboardEvent=void 0,this.localeTextFunc=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.groupRowAggNodes=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.defaultGroupOrderComparator=void 0,this.processSecondaryColDef=void 0,this.processSecondaryColGroupDef=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.defaultGroupSortComparator=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.getServerSideStoreParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowNodeId=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSort=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthCell=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new n.vpe,this.pasteStart=new n.vpe,this.pasteEnd=new n.vpe,this.columnVisible=new n.vpe,this.columnPinned=new n.vpe,this.columnResized=new n.vpe,this.columnMoved=new n.vpe,this.columnValueChanged=new n.vpe,this.columnPivotModeChanged=new n.vpe,this.columnPivotChanged=new n.vpe,this.columnGroupOpened=new n.vpe,this.newColumnsLoaded=new n.vpe,this.gridColumnsChanged=new n.vpe,this.displayedColumnsChanged=new n.vpe,this.virtualColumnsChanged=new n.vpe,this.columnEverythingChanged=new n.vpe,this.componentStateChanged=new n.vpe,this.cellValueChanged=new n.vpe,this.cellEditRequest=new n.vpe,this.rowValueChanged=new n.vpe,this.cellEditingStarted=new n.vpe,this.cellEditingStopped=new n.vpe,this.rowEditingStarted=new n.vpe,this.rowEditingStopped=new n.vpe,this.filterOpened=new n.vpe,this.filterChanged=new n.vpe,this.filterModified=new n.vpe,this.chartCreated=new n.vpe,this.chartRangeSelectionChanged=new n.vpe,this.chartOptionsChanged=new n.vpe,this.chartDestroyed=new n.vpe,this.cellKeyDown=new n.vpe,this.cellKeyPress=new n.vpe,this.gridReady=new n.vpe,this.firstDataRendered=new n.vpe,this.gridSizeChanged=new n.vpe,this.modelUpdated=new n.vpe,this.virtualRowRemoved=new n.vpe,this.viewportChanged=new n.vpe,this.bodyScroll=new n.vpe,this.bodyScrollEnd=new n.vpe,this.dragStarted=new n.vpe,this.dragStopped=new n.vpe,this.paginationChanged=new n.vpe,this.rowDragEnter=new n.vpe,this.rowDragMove=new n.vpe,this.rowDragLeave=new n.vpe,this.rowDragEnd=new n.vpe,this.columnRowGroupChanged=new n.vpe,this.rowGroupOpened=new n.vpe,this.expandOrCollapseAll=new n.vpe,this.pinnedRowDataChanged=new n.vpe,this.rowDataChanged=new n.vpe,this.rowDataUpdated=new n.vpe,this.asyncTransactionsFlushed=new n.vpe,this.cellClicked=new n.vpe,this.cellDoubleClicked=new n.vpe,this.cellFocused=new n.vpe,this.cellMouseOver=new n.vpe,this.cellMouseOut=new n.vpe,this.cellMouseDown=new n.vpe,this.rowClicked=new n.vpe,this.rowDoubleClicked=new n.vpe,this.rowSelected=new n.vpe,this.selectionChanged=new n.vpe,this.cellContextMenu=new n.vpe,this.rangeSelectionChanged=new n.vpe,this.sortChanged=new n.vpe,this.columnRowGroupChangeRequest=new n.vpe,this.columnPivotChangeRequest=new n.vpe,this.columnValueChangeRequest=new n.vpe,this.columnAggFuncChangeRequest=new n.vpe,this._nativeElement=e.nativeElement}ngAfterViewInit(){this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef),this.frameworkComponentWrapper.setComponentFactoryResolver(this.componentFactoryResolver),this.angularFrameworkOverrides.setEmitterUsedCallback(this.isEmitterUsed.bind(this)),this.gridOptions=i.plv.copyAttributesToGridOptions(this.gridOptions,this,!0),this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]},this.columns&&this.columns.length>0&&(this.gridOptions.columnDefs=this.columns.map(e=>e.toColDef())),new i.rjZ(this._nativeElement,this.gridOptions,this.gridParams),this.gridOptions.api&&(this.api=this.gridOptions.api),this.gridOptions.columnApi&&(this.columnApi=this.gridOptions.columnApi),this._initialised=!0,this._fullyReady.resolveNow(null,e=>e)}ngOnChanges(e){this._initialised&&i.plv.processOnChange(e,this.gridOptions,this.api,this.columnApi)}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api&&this.api.destroy())}isEmitterUsed(e){const t=this[e],o=!!t&&t.observers&&t.observers.length>0,r=`on${e.charAt(0).toUpperCase()}${e.substring(1)}`;return o||!!this.gridOptions&&!!this.gridOptions[r]}globalEventListener(e,t){if(this._destroyed)return;const o=this[e];o&&this.isEmitterUsed(e)&&("gridReady"===e?this._fullyReady.then(e=>{o.emit(t)}):o.emit(t))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.s_b),n.Y36(a),n.Y36(l),n.Y36(n._Vd))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ag-grid-angular"]],contentQueries:function(e,t,o){if(1&e&&n.Suo(o,s,4),2&e){let e;n.iGM(e=n.CRH())&&(t.columns=e)}},inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",deltaColumnMode:"deltaColumnMode",applyColumnDefOrder:"applyColumnDefOrder",immutableColumns:"immutableColumns",suppressSetColumnStateEvents:"suppressSetColumnStateEvents",suppressColumnStateEvents:"suppressColumnStateEvents",colWidth:"colWidth",minColWidth:"minColWidth",maxColWidth:"maxColWidth",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",components:"components",frameworkComponents:"frameworkComponents",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",stopEditingWhenGridLosesFocus:"stopEditingWhenGridLosesFocus",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",defaultExportParams:"defaultExportParams",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererFramework:"loadingCellRendererFramework",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererFramework:"detailCellRendererFramework",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",groupRowsSticky:"groupRowsSticky",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentFramework:"loadingOverlayComponentFramework",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentFramework:"noRowsOverlayComponentFramework",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDelay:"cellFlashDelay",cellFadeDelay:"cellFadeDelay",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererFramework:"fullWidthCellRendererFramework",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",deprecatedEmbedFullWidthRows:"deprecatedEmbedFullWidthRows",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererFramework:"groupRowRendererFramework",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",groupRowInnerRenderer:"groupRowInnerRenderer",groupRowInnerRendererFramework:"groupRowInnerRendererFramework",groupMultiAutoColumn:"groupMultiAutoColumn",groupUseEntireRow:"groupUseEntireRow",groupSuppressAutoColumn:"groupSuppressAutoColumn",rememberGroupStateWhenNewData:"rememberGroupStateWhenNewData",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",immutableData:"immutableData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",deltaRowDataMode:"deltaRowDataMode",batchUpdateWaitMillis:"batchUpdateWaitMillis",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideStoreType:"serverSideStoreType",serverSideInfiniteScroll:"serverSideInfiniteScroll",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideFilterAllLevels:"serverSideFilterAllLevels",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSideSortingAlwaysResets:"serverSideSortingAlwaysResets",serverSideFilteringAlwaysResets:"serverSideFilteringAlwaysResets",suppressEnterpriseResetOnNewColumns:"suppressEnterpriseResetOnNewColumns",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellSelection:"suppressCellSelection",suppressCellFocus:"suppressCellFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",angularCompileRows:"angularCompileRows",angularCompileFilters:"angularCompileFilters",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",suppressKeyboardEvent:"suppressKeyboardEvent",localeTextFunc:"localeTextFunc",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",groupRowAggNodes:"groupRowAggNodes",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",defaultGroupOrderComparator:"defaultGroupOrderComparator",processSecondaryColDef:"processSecondaryColDef",processSecondaryColGroupDef:"processSecondaryColGroupDef",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",defaultGroupSortComparator:"defaultGroupSortComparator",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",getServerSideStoreParams:"getServerSideStoreParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowNodeId:"getRowNodeId",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSort:"postSort",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthCell:"isFullWidthCell",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",cellKeyPress:"cellKeyPress",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataChanged:"rowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},features:[n._Bn([a,l]),n.TTD],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[]]}),e})();var c=o(665),d=o(1641);let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[r.ez,p,c.u5,d.IJ],c.u5,d.IJ,r.ez]}),e})();var f,g=o(9763),m=function(){function e(){}return e.prototype.setBeans=function(e){this.beans=e},e.prototype.getFileName=function(e){var t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?e+"."+t:e},e.prototype.getData=function(e){var t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)},e}(),v=function(){function e(e){this.groupColumns=[];var t=e.valueService,o=e.gridOptionsWrapper,r=e.processCellCallback,n=e.processHeaderCallback,i=e.processGroupHeaderCallback,s=e.processRowGroupCallback;this.columnModel=e.columnModel,this.valueService=t,this.gridOptionsWrapper=o,this.processCellCallback=r,this.processHeaderCallback=n,this.processGroupHeaderCallback=i,this.processRowGroupCallback=s}return e.prototype.prepare=function(e){this.groupColumns=e.filter(function(e){return!!e.getColDef().showRowGroup})},e.prototype.extractHeaderValue=function(e){var t=this.getHeaderName(this.processHeaderCallback,e);return null!=t?t:""},e.prototype.extractRowCellValue=function(e,t,o,r,n){var i,s=this.gridOptionsWrapper.isGroupMultiAutoColumn()?n.rowGroupIndex:0;i=n&&n.group&&(t===s&&-1!==this.groupColumns.indexOf(e)||0===t&&this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode()))?this.createValueForGroupNode(n):this.valueService.getValue(e,n);var a=this.processCell(o,n,e,i,this.processCellCallback,r);return null!=a?a:""},e.prototype.getHeaderName=function(e,t){return e?e({column:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnModel.getDisplayNameForColumn(t,"csv",!0)},e.prototype.createValueForGroupNode=function(e){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()});var t=[e.key];if(!this.gridOptionsWrapper.isGroupMultiAutoColumn())for(;e.parent;)t.push((e=e.parent).key);return t.reverse().join(" -> ")},e.prototype.processCell=function(e,t,o,r,n,i){return n?n({accumulatedRowIndex:e,column:o,node:t,value:r,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:i}):null!=r?r:""},e}(),y=function(){function e(){}return e.download=function(e,t){var o=document.defaultView||window;if(o){var r=document.createElement("a"),n=o.URL.createObjectURL(t);r.setAttribute("href",n),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:o})),document.body.removeChild(r),o.setTimeout(function(){o.URL.revokeObjectURL(n)},0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},e}(),C=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),w=function(e){function t(t){var o=e.call(this,t)||this;o.isFirstLine=!0,o.result="";var r=t.columnSeparator;return o.suppressQuotes=t.suppressQuotes,o.columnSeparator=r,o}return C(t,e),t.prototype.addCustomContent=function(e){var t=this;e&&("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(function(e){t.beginNewLine(),e.forEach(function(e,o){0!==o&&(t.result+=t.columnSeparator),t.result+=t.putInQuotes(e.data.value||""),e.mergeAcross&&t.appendEmptyCells(e.mergeAcross)})}))},t.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},t.prototype.onNewHeaderGroupingRowColumn=function(e,t,o){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(o)},t.prototype.appendEmptyCells=function(e){for(var t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")},t.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},t.prototype.onNewHeaderRowColumn=function(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))},t.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},t.prototype.onNewBodyRowColumn=function(e,t,o){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(e,t,t,i.gTE.EXPORT_TYPE_CSV,o))},t.prototype.putInQuotes=function(e){return this.suppressQuotes?e:null==e?'""':("string"==typeof e?t=e:"function"==typeof e.toString?t=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"');var t},t.prototype.parse=function(){return this.result},t.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},t}(v),S=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),E=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},t.prototype.getMergedParams=function(e){var t=this.gridOptionsWrapper.getDefaultExportParams("csv");return Object.assign({},t,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var t=this.getMergedParams(e),o=this.getData(t),r=new Blob(["\ufeff",o],{type:"text/plain"});return y.download(this.getFileName(t.fileName),r),o},t.prototype.exportDataAsCsv=function(e){return this.export(e)},t.prototype.getDataAsCsv=function(e){var t=this.getMergedParams(e);return this.getData(t)},t.prototype.getDefaultFileName=function(){return"export.csv"},t.prototype.getDefaultFileExtension=function(){return"csv"},t.prototype.createSerializingSession=function(e){var t=this;return new w({columnModel:t.columnModel,valueService:t.valueService,gridOptionsWrapper:t.gridOptionsWrapper,processCellCallback:e.processCellCallback||void 0,processHeaderCallback:e.processHeaderCallback||void 0,processGroupHeaderCallback:e.processGroupHeaderCallback||void 0,processRowGroupCallback:e.processRowGroupCallback||void 0,suppressQuotes:e.suppressQuotes||!1,columnSeparator:e.columnSeparator||","})},t.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},E([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),E([(0,i.fsG)("valueService")],t.prototype,"valueService",void 0),E([(0,i.fsG)("gridSerializer")],t.prototype,"gridSerializer",void 0),E([(0,i.fsG)("gridOptionsWrapper")],t.prototype,"gridOptionsWrapper",void 0),E([i.NqP],t.prototype,"postConstruct",null),E([(0,i.Vu6)("csvCreator")],t)}(m),b=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),R=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},D=(()=>(function(e){e[e.HEADER_GROUPING=0]="HEADER_GROUPING",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY"}(D||(D={})),D))(),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.serialize=function(e,t){void 0===t&&(t={});var o=this.getColumnsToExport(t.allColumns,t.columnKeys);return i._.compose(this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t))(e).parse()},t.prototype.processRow=function(e,t,o,r){var n=this,s=t.shouldRowBeSkipped||function(){return!1},a=this.gridOptionsWrapper,l=a.getContext(),u=a.getApi(),p=a.getColumnApi(),c=a.isGroupRemoveSingleChildren(),d=a.isGroupRemoveLowestSingleChildren(),h=t.rowNodes||t.onlySelected,f=a.isGroupHideOpenParents()&&!h,g=this.columnModel.isPivotMode()?r.leafGroup:!r.group,m=1===r.allChildrenCount&&(c||d&&r.leafGroup);(t.skipGroups||t.skipRowGroups)&&t.skipGroups&&i._.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups");var v={rowIndex:r.rowIndex,rowPinned:r.rowPinned};if(!(!g&&(t.skipRowGroups||m||f)||t.onlySelected&&!r.isSelected()||t.rowNodes&&!t.rowNodes.some(function(e){return n.rowPositionUtils.sameRow(e,v)})||t.skipPinnedTop&&"top"===r.rowPinned||t.skipPinnedBottom&&"bottom"===r.rowPinned)&&(-1!==r.level||r.leafGroup)&&!s({node:r,api:u,columnApi:p,context:l})){var y=e.onNewBodyRow();if(o.forEach(function(e,t){y.onColumn(e,t,r)}),t.getCustomContentBelowRow){var C=t.getCustomContentBelowRow({node:r,api:u,columnApi:p,context:l});C&&e.addCustomContent(C)}}},t.prototype.appendContent=function(e){return function(t){var o=e.customFooter||e.appendContent;return o&&(e.customFooter&&i._.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),t.addCustomContent(o)),t}},t.prototype.prependContent=function(e){return function(t){var o=e.customHeader||e.prependContent;return o&&(e.customHeader&&i._.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),t.addCustomContent(o)),t}},t.prototype.prepareSession=function(e){return function(t){return t.prepare(e),t}},t.prototype.exportColumnGroups=function(e,t){var o=this;return function(r){if(e.skipColumnGroupHeaders)e.columnGroups&&i._.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var n=new i.fkf,s=o.displayedGroupCreator.createDisplayedGroups(t,o.columnModel.getGridBalancedTree(),n,null);o.recursivelyAddHeaderGroups(s,r,e.processGroupHeaderCallback)}return r}},t.prototype.exportHeaders=function(e,t){return function(o){if(e.skipHeader||e.skipColumnHeaders)e.skipHeader&&i._.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");else{var r=o.onNewHeaderRow();t.forEach(function(e,t){r.onColumn(e,t,void 0)})}return o}},t.prototype.processPinnedTopRows=function(e,t){var o=this;return function(r){var n=o.processRow.bind(o,r,e,t);return o.pinnedRowModel.forEachPinnedTopRow(n),r}},t.prototype.processRows=function(e,t){var o=this;return function(r){var n=o.rowModel,s=n.getType(),a=s===i.gTE.ROW_MODEL_TYPE_CLIENT_SIDE,l=s===i.gTE.ROW_MODEL_TYPE_SERVER_SIDE,u=!a&&e.onlySelected,p=o.processRow.bind(o,r,e,t);return o.columnModel.isPivotMode()?a?n.forEachPivotNode(p):n.forEachNode(p):e.onlySelectedAllPages||u?o.selectionService.getSelectedNodes().forEach(p):a||l?n.forEachNodeAfterFilterAndSort(p):n.forEachNode(p),r}},t.prototype.processPinnedBottomRows=function(e,t){var o=this;return function(r){var n=o.processRow.bind(o,r,e,t);return o.pinnedRowModel.forEachPinnedBottomRow(n),r}},t.prototype.getColumnsToExport=function(e,t){void 0===e&&(e=!1);var o=this.columnModel.isPivotMode();return t&&t.length?this.columnModel.getGridColumns(t):e&&!o?(this.gridOptionsWrapper.isTreeData()?this.columnModel.getGridColumns([i.gTE.GROUP_AUTO_COLUMN_ID]):[]).concat(this.columnModel.getAllPrimaryColumns()||[]):this.columnModel.getAllDisplayedColumns()},t.prototype.recursivelyAddHeaderGroups=function(e,t,o){var r=[];e.forEach(function(e){e.getChildren&&e.getChildren().forEach(function(e){return r.push(e)})}),e.length>0&&e[0]instanceof i.Exx&&this.doAddHeaderHeader(t,e,o),r&&r.length>0&&this.recursivelyAddHeaderGroups(r,t,o)},t.prototype.doAddHeaderHeader=function(e,t,o){var r=this,n=e.onNewHeaderGroupingRow(),s=0;t.forEach(function(e){var t,a=e;t=o?o({columnGroup:a,api:r.gridOptionsWrapper.getApi(),columnApi:r.gridOptionsWrapper.getColumnApi(),context:r.gridOptionsWrapper.getContext()}):r.columnModel.getDisplayNameForColumnGroup(a,"header");var l=a.getLeafColumns().reduce(function(e,t,o,r){var n=i._.last(e);return"open"===t.getColumnGroupShow()?n&&null==n[1]||e.push(n=[o]):n&&null==n[1]&&(n[1]=o-1),o===r.length-1&&n&&null==n[1]&&(n[1]=o),e},[]);n.onColumn(t||"",s++,a.getLeafColumns().length-1,l)})},R([(0,i.fsG)("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),R([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),R([(0,i.fsG)("rowModel")],t.prototype,"rowModel",void 0),R([(0,i.fsG)("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),R([(0,i.fsG)("selectionService")],t.prototype,"selectionService",void 0),R([(0,i.fsG)("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),R([(0,i.Vu6)("gridSerializer")],t)}(i.AS9),M={moduleName:i.GXE.CsvExportModule,beans:[A,O]},P="\r\n",x=function(){function e(){}return e.createHeader=function(e){void 0===e&&(e={});var t=["version"];return e.version||(e.version="1.0"),e.encoding&&t.push("encoding"),e.standalone&&t.push("standalone"),"<?xml "+t.map(function(t){return t+'="'+e[t]+'"'}).join(" ")+" ?>"},e.createXml=function(e,t){var o=this,r="";e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach(function(e){Object.keys(e.map).forEach(function(n){r+=o.returnAttributeIfPopulated(e.prefix+n,e.map[n],t)})}),e.properties.rawMap&&Object.keys(e.properties.rawMap).forEach(function(n){r+=o.returnAttributeIfPopulated(n,e.properties.rawMap[n],t)}));var n="<"+e.name+r;return e.children||null!=e.textNode?null!=e.textNode?n+">"+e.textNode+"</"+e.name+">"+P:(n+=">\r\n",e.children&&e.children.forEach(function(e){n+=o.createXml(e,t)}),n+"</"+e.name+">"+P):n+"/>"+P},e.returnAttributeIfPopulated=function(e,t,o){if(!t&&""!==t&&0!==t)return"";var r=t;return"boolean"==typeof t&&o&&(r=o(t))," "+e+'="'+r+'"'},e}(),T=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),N=function(){function e(){}return e.addFolders=function(e){e.forEach(this.addFolder.bind(this))},e.addFolder=function(e){this.folders.push({path:e,created:new Date,isBase64:!1})},e.addFile=function(e,t,o){void 0===o&&(o=!1),this.files.push({path:e,created:new Date,content:t,isBase64:o})},e.getContent=function(e){void 0===e&&(e="application/zip");var t=this.buildFileStream(),o=this.buildUint8Array(t);return this.clearStream(),new Blob([o],{type:e})},e.clearStream=function(){this.folders=[],this.files=[]},e.buildFileStream=function(e){var t,o;void 0===e&&(e="");var r=this.folders.concat(this.files),n=r.length,i="",s=0,a=0;try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),u=l.next();!u.done;u=l.next()){var p=this.getHeader(u.value,s),c=p.fileHeader,d=p.folderHeader,h=p.content;s+=c.length+h.length,a+=d.length,e+=c+h,i+=d}}catch(f){t={error:f}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}return e+i+this.buildFolderEnd(n,a,s)},e.getHeader=function(e,t){var o=e.content,r=e.path,n=e.created,s=e.isBase64,a=i._.decToHex,l=(0,i._.utf8_encode)(r),u=l!==r,p=this.convertTime(n),c=this.convertDate(n),d="";if(u){var h=a(1,1)+a(this.getFromCrc32Table(l),4)+l;d="up"+a(h.length,2)+h}var f=o?this.getConvertedContent(o,s):{size:0,content:""},g=f.size,m=f.content,v="\n\0"+(u?"\0\b":"\0\0")+"\0\0"+a(p,2)+a(c,2)+a(g?this.getFromCrc32Table(m):0,4)+a(g,4)+a(g,4)+a(l.length,2)+a(d.length,2);return{fileHeader:"PK\x03\x04"+v+l+d,folderHeader:"PK\x01\x02\x14\0"+v+"\0\0\0\0\0\0"+(o?"\0\0\0\0":"\x10\0\0\0")+a(t,4)+l+d,content:m||""}},e.getConvertedContent=function(e,t){return void 0===t&&(t=!1),t&&(e=e.split(";base64,")[1]),{size:(e=t?atob(e):e).length,content:e}},e.buildFolderEnd=function(e,t,o){var r=i._.decToHex;return"PK\x05\x06\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(o,4)+"\0\0"},e.buildUint8Array=function(e){for(var t=new Uint8Array(e.length),o=0;o<t.length;o++)t[o]=e.charCodeAt(o);return t},e.getFromCrc32Table=function(e){if(!e.length)return 0;for(var t=e.length,o=new Uint8Array(t),r=0;r<t;r++)o[r]=e.charCodeAt(r);var n=-1;for(r=0;r<t;r++)n=n>>>8^T[255&(n^o[r])];return-1^n},e.convertTime=function(e){var t=e.getHours();return t<<=6,t|=e.getMinutes(),(t<<=5)|e.getSeconds()/2},e.convertDate=function(e){var t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,(t<<=5)|e.getDate()},e.folders=[],e.files=[],e}(),_=o(4412);const I={getTemplate:function(e){var t=e.alignment;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:t.vertical,Horizontal:t.horizontal,Indent:t.indent,ReadingOrder:t.readingOrder,Rotate:t.rotate,ShrinkToFit:t.shrinkToFit,VerticalText:t.verticalText,WrapText:t.wrapText}}]}}}},G={getTemplate:function(e){var t=e.borders;return{name:"Borders",children:[t.borderBottom,t.borderLeft,t.borderRight,t.borderTop].map(function(e,t){return{name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:0==t?"Bottom":1==t?"Left":2==t?"Right":"Top",LineStyle:e.lineStyle,Weight:e.weight,Color:e.color}}]}}})}}},F={getTemplate:function(e){var t=e.font;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:t.bold,FontName:t.fontName,Italic:t.italic,Color:t.color,Outline:t.outline,Shadow:t.shadow,Size:t.size,StrikeThrough:t.strikeThrough,Underline:t.underline,VerticalAlign:t.verticalAlign}},{prefix:"x:",map:{CharSet:t.charSet,Family:t.family}}]}}}},L={getTemplate:function(e){var t=e.interior;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:t.color,Pattern:t.pattern,PatternColor:t.patternColor}}]}}}},k={getTemplate:function(e){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:e.protection.protected,HideFormula:e.protection.hideFormula}}]}}}},V={getTemplate:function(e){return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:e.numberFormat.format}}]}}}};var B=function(){function e(){}return e.createExcel=function(e,t){var o=this.excelXmlHeader(),r=this.workbook({name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]},{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]},e,t);return""+o+x.createXml(r,function(e){return e?"1":"0"})},e.workbook=function(e,t,o,r){var n,i,s,a,l,u,p=[e,t,this.stylesXmlElement(o)].concat((s=(n=r).name,a=(i=n.table).rows,l=i.columns.map(function(e){return function(e){return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:e.width}}]}}}(e)}),u=a.map(function(e){return function(e){return{name:"Row",children:e.cells.map(function(e){return i=(t=e).styleId,s=t.data,a={},(n=t.mergeAcross)&&(a.MergeAcross=n),i&&(a.StyleID=i),{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:a}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:null===(o=s)||void 0===o?void 0:o.type}}]},textNode:null===(r=s)||void 0===r?void 0:r.value}]};var t,o,r,n,i,s,a})}}(e)}),{name:"Worksheet",children:[{name:"Table",children:l.concat(u)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:s}}]}}));return Object.assign({},{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}},{children:p})},e.excelXmlHeader=function(){return'<?xml version="1.0" ?>\n        <?mso-application progid="Excel.Sheet" ?>\n        '},e.stylesXmlElement=function(e){var t=this;return{name:"Styles",children:e?e.map(function(e){return t.styleXmlElement(e)}):[]}},e.styleXmlElement=function(e){var t=i._.compose(this.addProperty("alignment",e),this.addProperty("borders",e),this.addProperty("font",e),this.addProperty("interior",e),this.addProperty("protection",e),this.addProperty("numberFormat",e))([]);return Object.assign({},function(e){var t=e.id;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:t,Name:e.name||t}}]}}}(e),{children:t})},e.addProperty=function(e,t){return function(o){return t[e]?o.concat({alignment:I,borders:G,font:F,interior:L,numberFormat:V,protection:k}[e].getTemplate(t)):o}},e.factoryMode=i.nPL.SINGLE_SHEET,e}(),W={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},H=function(e){return Math.ceil(9525*e)},U=function(e,t){var o;if(t)return o="number"==typeof t?t:t({rowIndex:e}),Math.round(72*o/96)},j=function(e){return""+x.createHeader({encoding:"UTF-8",standalone:"yes"})+x.createXml(e)},z=function(e){var t=String.fromCharCode,o=Math.floor(e/26),r=e%26;return o&&26!==e?r?o<26?t(65+o-1)+t(65+r-1):z(o)+t(65+r-1):z(o-1)+"Z":t(65+e-1)},q=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Z=function(){return(Z=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},K=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s},J=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(K(arguments[t]));return e},X=function(e){function t(t){var o=e.call(this,t)||this;return o.mixedStyles={},o.mixedStyleCounter=0,o.rows=[],o.config=Object.assign({},t),o.stylesByIds={},o.config.baseExcelStyles.forEach(function(e){o.stylesByIds[e.id]=e}),o.excelStyles=J(o.config.baseExcelStyles),o}return q(t,e),t.prototype.addCustomContent=function(e){var t=this;e.forEach(function(e){var o=t.rows.length+1;t.rows.push({height:U(o,t.config.rowHeight),cells:(e.cells||[]).map(function(e,r){var n,i=t.addImage(o,t.columnsToExport[r],null===(n=e.data)||void 0===n?void 0:n.value),s=Z({},e);return i&&(s.data={},null!=i.value?s.data.value=i.value:(s.data.type="e",s.data.value=null)),s}),outlineLevel:e.outlineLevel||void 0})})},t.prototype.onNewHeaderGroupingRow=function(){var e=this,t=[];return this.rows.push({cells:t,height:U(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(o,r,n,i){var s=e.config.styleLinker(D.HEADER_GROUPING,1,"grouping-"+o,void 0,void 0);t.push(Z(Z({},e.createMergedCell(e.getStyleId(s),e.getDataTypeForValue("string"),o,n)),{collapsibleRanges:i}))}}},t.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},t.prototype.onNewBodyRow=function(){return this.onNewRow(this.onNewBodyColumn,this.config.rowHeight)},t.prototype.prepare=function(t){var o=this;e.prototype.prepare.call(this,t),this.columnsToExport=J(t),this.cols=t.map(function(e,t){return o.convertColumnToExcel(e,t)})},t.prototype.parse=function(){for(var e=this.rows.reduce(function(e,t){return Math.max(e,t.cells.length)},0);this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));return this.createExcel({name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}})},t.prototype.isFormula=function(e){return null!=e&&this.config.autoConvertFormulas&&e.toString().startsWith("=")},t.prototype.getStyleById=function(e){return null==e?null:this.stylesByIds[e]||null},t.prototype.convertColumnToExcel=function(e,t){var o=this.config.columnWidth;return o?"number"==typeof o?{width:o}:{width:o({column:e,index:t})}:e?{width:Math.max(e.getActualWidth(),75)}:{}},t.prototype.onNewHeaderColumn=function(e,t){var o=this;return function(r,n){var i=o.extractHeaderValue(r),s=o.config.styleLinker(D.HEADER,e,i,r,void 0);t.push(o.createCell(o.getStyleId(s),o.getDataTypeForValue("string"),i))}},t.prototype.onNewRow=function(e,t){var o=[];return this.rows.push({cells:o,height:U(this.rows.length+1,t)}),{onColumn:e.bind(this,this.rows.length,o)()}},t.prototype.onNewBodyColumn=function(e,t){var o=this,r=0;return function(n,s,a){if(r>0)r-=1;else{!o.config.gridOptionsWrapper.isGroupHideOpenParents()&&a.level&&(i._.last(o.rows).outlineLevel=a.level);var l=o.extractRowCellValue(n,s,e,i.gTE.EXPORT_TYPE_EXCEL,a),u=o.config.styleLinker(D.BODY,e,l,n,a),p=o.getStyleId(u),c=n.getColSpan(a),d=o.addImage(e,n,l);d?t.push(o.createCell(p,o.getDataTypeForValue(d.value),null==d.value?"":d.value)):c>1?(r=c-1,t.push(o.createMergedCell(p,o.getDataTypeForValue(l),l,c-1))):t.push(o.createCell(p,o.getDataTypeForValue(l),l))}}},t.prototype.getStyleId=function(e){if(!e||!e.length)return null;if(1===e.length)return e[0];var t=e.join("-");return this.mixedStyles[t]||this.addNewMixedStyle(e),this.mixedStyles[t].excelID},t.prototype.addNewMixedStyle=function(e){var t=this;this.mixedStyleCounter+=1;var o="mixedStyle"+this.mixedStyleCounter,r={};e.forEach(function(e){t.excelStyles.forEach(function(t){t.id===e&&i._.mergeDeep(r,i._.deepCloneObject(t))})}),r.id=o,r.name=o;var n=e.join("-");this.mixedStyles[n]={excelID:o,key:n,result:r},this.excelStyles.push(r),this.stylesByIds[o]=r},t}(v),Y=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.createExcel=function(e){return B.createExcel(this.excelStyles,e)},t.prototype.getDataTypeForValue=function(e){return i._.isNumeric(e)?"Number":"String"},t.prototype.getType=function(e,t,o){if(this.isFormula(o))return"Formula";if(t&&t.dataType)switch(t.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn("AG Grid: Unrecognized data type for excel export ["+t.id+".dataType="+t.dataType+"]")}return e},t.prototype.addImage=function(){},t.prototype.createCell=function(e,t,o){var r=this.getStyleById(e),n=this.getType(t,r,o)||t;return{styleId:r?e:void 0,data:{type:n,value:this.getValueTransformed(n,o)}}},t.prototype.getValueTransformed=function(e,t){var o,r=this;switch(e){case"String":return function(e){if(r.config.suppressTextAsCDATA)return i._.escapeString(e);var t=new RegExp("]]>","g");return"<![CDATA["+String(e).replace(t,"]]]]><![CDATA[>")+"]]>"}(t);case"Number":return Number(t).valueOf()+"";case"Boolean":return(o=t)&&"0"!==o&&"false"!==o?"1":"0";default:return t}},t.prototype.createMergedCell=function(e,t,o,r){return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:o},mergeAcross:r}},t}(X);var $=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s},ee=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($(arguments[t]));return e};const te=function(e){var t=new Array(e).fill(void 0).map(function(e,t){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet"+(t+1)+".xml"}}),o=rt.worksheetImages.size,r={};rt.workbookImageIds.forEach(function(e){r[e.type]=!0});var n=new Array(o).fill(void 0).map(function(e,t){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing"+(t+1)+".xml"}}),i=Object.keys(r).map(function(e){return{name:"Default",ContentType:"image/"+e,Extension:e}});return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:ee(i,[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}],t,[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}],n,[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}]).map(function(e){return{name:(t=e).name,properties:{rawMap:{Extension:t.Extension,PartName:t.PartName,ContentType:t.ContentType}}};var t})}};var oe=function(e,t){return{name:"xdr:"+e,children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}},re=function(e){var t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(e.recolor&&e.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},ne=function(e,t){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:e.id,descr:null!=e.altText?e.altText:void 0}},children:[re(e)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},ie=function(e){if(e.saturation||e.tint){var t=[];return e.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:1e3*e.saturation}}}),e.tint&&t.push({name:"a:tint",properties:{rawMap:{val:1e3*e.tint}}}),t}},se=function(e,t){var o,r,n;if(e.transparency){var i=Math.min(Math.max(e.transparency,0),100);o=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*i)}}}]}if(e.recolor)switch(o||(o=[]),e.recolor.toLocaleLowerCase()){case"grayscale":o.push({name:"a:grayscl"});break;case"sepia":o.push((n={color:"D9C3A5",tint:50,saturation:180},{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:(r={color:"black"}).color}},children:ie(r)},{name:"a:srgbClr",properties:{rawMap:{val:n.color}},children:ie(n)}]}));break;case"washout":o.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId"+t,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:o},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},ae=function(e,t){var o={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};return e.rotation&&(o.properties={rawMap:{rot:6e4*Math.min(Math.max(e.rotation,0),360)}}),{name:"xdr:spPr",children:[o,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},le=function(e,t,o,r){return{name:"xdr:pic",children:[ne(e,t+1),se(e,o+1),ae(e,r)]}};const ue=function(e){var t=e.sheetIndex,o=rt.worksheetImages.get(t),r=rt.worksheetImageIds.get(t);return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:o.map(function(e,t){var o=function(e){e.fitCell=!!e.fitCell||!e.width||!e.height;var t=e.position,o=void 0===t?{}:t,r=e.fitCell,n=e.width,i=void 0===n?0:n,s=e.height,a=void 0===s?0:s,l=e.totalHeight,u=e.totalWidth,p=o.offsetX,c=void 0===p?0:p,d=o.offsetY,h=void 0===d?0:d,f=o.row,g=void 0===f?1:f,m=o.rowSpan,v=void 0===m?1:m,y=o.column,C=void 0===y?1:y,w=o.colSpan,S=void 0===w?1:w;return{from:{row:g-1,col:C-1,offsetX:H(c),offsetY:H(h)},to:{row:g-1+(r?1:v-1),col:C-1+(r?1:S-1),offsetX:H(i+c),offsetY:H(a+h)},height:H(l||a),width:H(u||i)}}(e);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[oe("from",o.from),oe("to",o.to),le(e,t,r.get(e.id).index,o),{name:"xdr:clientData"}]}})}};var pe=function(e){var t=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s}(e,4);return{name:"a:"+t[0],children:[{name:"a:"+t[1],properties:{rawMap:{val:t[2],lastClr:t[3]}}}]}};var ce=function(e){var t=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s}(e,4);return{name:"a:"+t[0],properties:{rawMap:{script:t[2],typeface:t[1],panose:t[3]}}}};var de=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s},he=function(e,t,o){return{name:"a:"+e,properties:{rawMap:{val:t}},children:o}},fe=function(e){var t=de(e,6),o=t[0],r=t[1],n=t[3],i=t[4],s=t[5],a=[];return a.push(he("satMod",t[2])),n&&a.push(he("lumMod",n)),i&&a.push(he("tint",i)),s&&a.push(he("shade",s)),{name:"a:gs",properties:{rawMap:{pos:o}},children:[{name:"a:schemeClr",properties:{rawMap:{val:r}},children:a}]}},ge=function(e,t){return{name:"a:solidFill",children:[he("schemeClr",e,t)]}},me=function(e){var t=de(e,5),o=t[0],r=t[1],n=t[2],i=t[3],s=de(t[4],2),a=s[0],l=s[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:o}},children:[{name:"a:gsLst",children:[fe(r),fe(n),fe(i)]},{name:"a:lin",properties:{rawMap:{ang:a,scaled:l}}}]}},ve=function(e){var t=de(e,4);return{name:"a:ln",properties:{rawMap:{w:t[0],cap:t[1],cmpd:t[2],algn:t[3]}},children:[ge("phClr"),he("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},ye=function(e){var t=[];if(e){var o=de(e,5);t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:o[0],dist:o[1],dir:o[2],algn:o[3],rotWithShape:o[4]}},children:[he("srgbClr","000000",[he("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}};var Ce={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},we=["Dashed","DashDot","DashDotDot"],Se={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},Ee={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},Ae={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},be=function(e){return null==e?e:("#"===e.charAt(0)&&(e=e.substr(1)),6===e.length?"FF"+e:e)},Re=function(e,t){if(!e)return"thin";var o=function(e){switch(e){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}}(t),r=Ce[e];return"Continuous"===e?o:"medium"===o&&-1!==we.indexOf(r)?"medium"+r:r.charAt(0).toLowerCase()+r.substr(1)},De=function(e){return Ee[e]||"general"},Oe=function(e){return Ae[e]||void 0},Me=function(e){return{name:"color",properties:{rawMap:{rgb:be(e||"#000000")}}}};const Pe=function(e){return{name:"borders",properties:{rawMap:{count:e.length}},children:e.map(function(e){return function(e){var t=e.left,o=e.right,r=e.top,n=e.bottom,i=e.diagonal,s=t?[Me(t.color)]:void 0,a=o?[Me(o.color)]:void 0,l=r?[Me(r.color)]:void 0,u=n?[Me(n.color)]:void 0,p=i?[Me(i.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:s},{name:"right",properties:{rawMap:{style:o&&o.style}},children:a},{name:"top",properties:{rawMap:{style:r&&r.style}},children:l},{name:"bottom",properties:{rawMap:{style:n&&n.style}},children:u},{name:"diagonal",properties:{rawMap:{style:i&&i.style}},children:p}]}}(e)})}};var xe=function(e){var t=["Context","LeftToRight","RightToLeft"].indexOf(e);return Math.max(t,0)};const Te=function(e){var t=e.alignment,o=e.borderId,r=e.fillId,n=e.fontId,i=e.numFmtId,s=e.protection,a=e.xfId,l=[];return t&&l.push(function(e){var t=e.horizontal,o=e.indent,r=e.readingOrder,n=e.rotate,i=e.shrinkToFit,s=e.vertical,a=e.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:t&&De(t),indent:o,readingOrder:r&&xe(r),textRotation:n,shrinkToFit:i,vertical:s&&Oe(s),wrapText:a}}}}(t)),s&&l.push(function(e){return{name:"protection",properties:{rawMap:{hidden:!0===e.hideFormula?1:0,locked:!1===e.protected?0:1}}}}(s)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:s?1:void 0,applyBorder:o?1:void 0,applyFill:r?1:void 0,borderId:o,fillId:r,applyFont:n?1:void 0,fontId:n,applyNumberFormat:i?1:void 0,numFmtId:i,xfId:a}},children:l.length?l:void 0}};var Ne,_e,Ie,Ge,Fe,Le,ke,Ve,Be,We=function(){return(We=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},He=function(e,t){return-1!==e.indexOf("mixedStyle")&&t>1&&(e+="_"+t),e},Ue=function(){Ne={base:0},_e=[],Ie=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Ge=[{patternType:"none"},{patternType:"gray125"}],Fe=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],Le=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],ke=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],Ve=[{builtinId:0,name:"Normal",xfId:0}]},je=function(e){var t,o,r,n,s,a,l=e.alignment,u=e.borders,p=e.font,c=e.interior,d=e.numberFormat,h=e.protection,f=e.id,g=0,m=0,v=0,y=0;f&&(f=He(f,Be),null==Ne[f]&&(c&&(r=(o=(t=c).pattern)?Se[o]||o:"none",n=be(t.color),s=be(t.patternColor),-1===(a=Ge.findIndex(function(e){return e.patternType==r&&e.fgRgb==n&&e.bgRgb==s}))&&(a=Ge.length,Ge.push({patternType:r,fgRgb:n,bgRgb:s})),g=a),u&&(m=function(e){var t,o,r,n,i,s,a,l,u=e.borderBottom,p=e.borderTop,c=e.borderLeft,d=e.borderRight;c&&(r=Re(c.lineStyle,c.weight),a=be(c.color)),d&&(n=Re(d.lineStyle,d.weight),l=be(d.color)),u&&(t=Re(u.lineStyle,u.weight),i=be(u.color)),p&&(o=Re(p.lineStyle,p.weight),s=be(p.color));var h=Fe.findIndex(function(e){var u=e.left,p=e.right,c=e.top,d=e.bottom;if(!u&&(r||a))return!1;if(!p&&(n||l))return!1;if(!c&&(o||s))return!1;if(!d&&(t||i))return!1;var h=u||{},f=p||{},g=c||{},m=d||{};return h.style==r&&h.color==a&&f.style==n&&f.color==l&&g.style==o&&g.color==s&&m.style==t&&m.color==i});return-1===h&&(h=Fe.length,Fe.push({left:{style:r,color:a},right:{style:n,color:l},top:{style:o,color:s},bottom:{style:t,color:i},diagonal:{style:void 0,color:void 0}})),h}(u)),p&&(v=function(e){var t=e.fontName,o=void 0===t?"Calibri":t,r=e.color,n=e.size,s=e.bold,a=e.italic,l=e.outline,u=e.shadow,p=e.strikeThrough,c=e.underline,d=e.family,h=e.verticalAlign,f=o?i._.utf8_encode(o):o,g=be(r),m=function(e){if(void 0!==e){var t=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(e||"Automatic");return Math.max(t,0)}}(d),v=c?c.toLocaleLowerCase():void 0,y=h?h.toLocaleLowerCase():void 0,C=Ie.findIndex(function(e){return e.fontName==f&&e.color==g&&e.size==n&&e.bold==s&&e.italic==a&&e.outline==l&&e.shadow==u&&e.strikeThrough==p&&e.underline==v&&e.verticalAlign==y&&e.family==m});return-1===C&&(C=Ie.length,Ie.push({fontName:f,color:g,size:n,bold:s,italic:a,outline:l,shadow:u,strikeThrough:p,underline:v,verticalAlign:y,family:null!=m?m.toString():void 0})),C}(p)),d&&(y=function(e){if(e=i._.utf8_encode(e),W[e])return W[e];var t=_e.findIndex(function(t){return t.formatCode===e});return-1===t?_e.push({formatCode:e,numFmtId:t=_e.length+164}):t=_e[t].numFmtId,t}(d.format)),Ne[f]=ke.length,ke.push({alignment:l,borderId:m||0,fillId:g||0,fontId:v||0,numFmtId:y||0,protection:h,xfId:0})))},ze=function(e,t){return Ne[He(e,t)]||0};const qe=function(e){var t,o=function(e){return{name:"numFmts",properties:{rawMap:{count:e.length}},children:e.map(function(e){return function(e){return{name:"numFmt",properties:{rawMap:{formatCode:e.formatCode,numFmtId:e.numFmtId}}}}(e)})}}(_e),r=function(e){return{name:"fonts",properties:{rawMap:{count:e.length}},children:e.map(function(e){return function(e){var t=e.color,o=e.fontName,r=e.family,n=e.scheme,i=e.italic,s=e.bold,a=e.strikeThrough,l=e.outline,u=e.shadow,p=e.underline,c=e.verticalAlign,d=[{name:"sz",properties:{rawMap:{val:e.size}}},{name:"color",properties:{rawMap:{theme:e.colorTheme,rgb:void 0===t?"FF000000":t}}},{name:"name",properties:{rawMap:{val:void 0===o?"Calibri":o}}}];return r&&d.push({name:"family",properties:{rawMap:{val:r}}}),n&&d.push({name:"scheme",properties:{rawMap:{val:n}}}),i&&d.push({name:"i"}),s&&d.push({name:"b"}),a&&d.push({name:"strike"}),l&&d.push({name:"outline"}),u&&d.push({name:"shadow"}),p&&d.push({name:"u",properties:{rawMap:{val:p}}}),c&&d.push({name:"vertAlign",properties:{rawMap:{val:c}}}),{name:"font",children:d}}(e)})}}(Ie.map(function(t){return We(We({},t),{size:null!=t.size?t.size:e})})),n=function(e){return{name:"fills",properties:{rawMap:{count:e.length}},children:e.map(function(e){return function(e){var t=e.fgTheme,o=e.fgTint,r=e.fgRgb,n=e.bgRgb,i=e.bgIndexed,s={name:"patternFill",properties:{rawMap:{patternType:e.patternType}}};return(t||o||r)&&(s.children=[{name:"fgColor",properties:{rawMap:{theme:t,tint:o,rgb:r}}}]),(i||n)&&(s.children||(s.children=[]),s.children.push({name:"bgColor",properties:{rawMap:{indexed:i,rgb:n}}})),{name:"fill",children:[s]}}(e)})}}(Ge),i=Pe(Fe),s={name:"cellStyleXfs",properties:{rawMap:{count:(t=Le).length}},children:t.map(function(e){return Te(e)})},a=function(e){return{name:"cellXfs",properties:{rawMap:{count:e.length}},children:e.map(function(e){return Te(e)})}}(ke),l=function(e){return{name:"cellStyles",properties:{rawMap:{count:e.length}},children:e.map(function(e){return function(e){return{name:"cellStyle",properties:{rawMap:{builtinId:e.builtinId,name:e.name,xfId:e.xfId}}}}(e)})}}(Ve);return Ue(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[o,r,n,i,s,a,l,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}},Ze=function(e){return{name:"sheets",children:e.map(function(e,t){return function(e,t){var o=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:e,sheetId:o,"r:id":"rId"+o}}}}(e,t)})}};var Ke=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s},Je=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ke(arguments[t]));return e},Xe=function(e){var t;return""!==(null===(t=e.data)||void 0===t?void 0:t.value)||void 0!==e.styleId};const Ye=function(e,t,o){var r=e.index,n=e.collapsed,s=e.hidden,a=e.height,l=e.outlineLevel,u=e.cells,p=void 0===u?[]:u;return function(e,t){for(var o=[],r=0,n=0;n<e.length;n++)(s=e[n]).mergeAcross&&(o.push({pos:n,excelPos:r}),r+=s.mergeAcross),r++;if(o.length)for(n=o.length-1;n>=0;n--){for(var i=[],s=e[o[n].pos],a=1;a<=s.mergeAcross;a++)i.push({ref:""+z(o[n].excelPos+1+a)+(t+1),styleId:s.styleId,data:{type:"empty",value:null}});i.length&&e.splice.apply(e,Je([o[n].pos+1,0],i))}}(p,t),{name:"row",properties:{rawMap:{r:r,collapsed:n,hidden:s?"1":"0",ht:a,customHeight:null!=a?"1":"0",spans:"1:1",outlineLevel:l||void 0}},children:p.filter(Xe).map(function(e,t){return function(e,t,o){var r=e.ref,n=e.styleId,s=e.data||{type:"empty",value:null},a=s.type,l=s.value,u=a;"f"===a?u="str":a.charAt(0)===a.charAt(0).toUpperCase()&&(u=function(e){var t=e.charAt(0).toLowerCase();return"s"===t?"inlineStr":t}(a));var p,c={name:"c",properties:{rawMap:{r:r,t:"empty"===u?void 0:u,s:n?ze(n,o):void 0}}};return"empty"===u?c:(p="str"===u&&"f"===a?[{name:"f",textNode:i._.escapeString(i._.utf8_encode(l))}]:"inlineStr"===u?[{name:"is",children:[{name:"t",textNode:i._.escapeString(i._.utf8_encode(l))}]}]:[{name:"v",textNode:l}],Object.assign({},c,{children:p}))}(e,0,o)})}};var Qe=function(e){if(null==e)return 1;var t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(e);return-1===t?1:t+1},$e=function(e){var t=[];return["all","first","even"].forEach(function(o){var r=e[o],n="all"===o?"odd":o;r&&(r.header||r.footer)&&i._.iterateObject(r,function(e,o){var r,s=""+e.charAt(0).toUpperCase()+e.slice(1);o&&t.push({name:""+n+s,properties:{rawMap:{"xml:space":"preserve"}},textNode:(r=o,r.reduce(function(e,t){var o,r,n,s;return""+(n=e+"&amp;"+("Center"===(o=t.position)?"C":"Right"===o?"R":"L"),(s=t.font)?(n+="&amp;&quot;",n+=s.fontName||"Calibri",n+=s.bold!==s.italic?s.bold?",Bold":",Italic":s.bold?",Bold Italic":",Regular",n+="&quot;",s.size&&(n+="&amp;"+s.size),s.strikeThrough&&(n+="&amp;S"),s.underline&&(n+="&amp;"+("Double"===s.underline?"E":"U")),s.color&&(n+="&amp;K"+s.color.replace("#","").toUpperCase()),n):n)+i._.escapeString((r=t.value,i._.iterateObject({"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"},function(e,t){r=r.replace(e,t)}),r))},""))})})}),t};const et=function(e){var t,o=e.currentSheet,r=e.margins,n=void 0===r?{}:r,s=e.pageSetup,a=e.headerFooterConfig,l=e.worksheet.table,u=l.rows,p=l.columns,c=p&&p.length?function(e,t){var o=[],r=[];e.forEach(function(e,n){var i,s=e.cells,a=0;e.index=n+1,s.forEach(function(e,s){var l=s+a+1,u=z(l),p=n+1;if(e.mergeAcross){var c=z(s+(a+=e.mergeAcross)+1);o.push(""+u+p+":"+c+p)}t[l-1]||(t[l-1]={});var d=e.collapsibleRanges;d&&d.forEach(function(e){r.push([l+e[0],l+e[1]])}),(i=t[l-1]).min=l,i.max=l,e.ref=""+u+p})}),r.sort(function(e,t){return e[0]!==t[0]?e[0]-t[0]:t[1]-e[1]});var n=new Map,i=new Map;return r.filter(function(e){var t=e.toString();return!n.get(t)&&(n.set(t,!0),!0)}).forEach(function(e){var o=t.find(function(t){return t.min==e[0]&&t.max==e[1]}),r=i.get(e[0]);t.push({min:e[0],max:e[1],outlineLevel:r||1,width:(o||{width:100}).width}),i.set(e[0],(r||0)+1)}),o}(u,p):[];return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:i._.compose(function(e){return e.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),e},function(e){return function(t){var o=e.reduce(function(e,t){return t.outlineLevel&&t.outlineLevel>e?t.outlineLevel:e},0);return t.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:o||void 0}}}),t}}(u),function(e){return function(t){return e.length&&t.push({name:"cols",children:e.map(function(e){return o=(t=e).min,r=t.max,n=t.outlineLevel,i=t.s,a=t.hidden,l=t.bestFit,u=1,p="0",(s=t.width)>1&&(u=function(e){return Math.ceil((e-12)/7+1)}(s),p="1"),{name:"col",properties:{rawMap:{min:o,max:r,outlineLevel:null!=n?n:void 0,width:u,style:i,hidden:a?"1":"0",bestFit:l?"1":"0",customWidth:p}}};var t,o,r,n,i,s,a,l,u,p})}),t}}(p),function(e,t){return function(o){return e.length&&o.push({name:"sheetData",children:e.map(function(e,o){return Ye(e,o,t)})}),o}}(u,o+1),(t=c,function(e){return t.length&&e.push({name:"mergeCells",properties:{rawMap:{count:t.length}},children:t.map(function(e){return{name:"mergeCell",properties:{rawMap:{ref:e}}}})}),e}),function(e){return function(t){var o=e.top,r=e.right,n=e.bottom,i=e.left,s=e.header,a=e.footer;return t.push({name:"pageMargins",properties:{rawMap:{bottom:void 0===n?.75:n,footer:void 0===a?.3:a,header:void 0===s?.3:s,left:void 0===i?.7:i,right:void 0===r?.7:r,top:void 0===o?.75:o}}}),t}}(n),function(e){return function(t){var o;return e&&t.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:(o=e.orientation,!o||"Portrait"!==o&&"Landscape"!==o?"portrait":o.toLocaleLowerCase()),paperSize:Qe(e.pageSize)}}}),t}}(s),function(e){return function(t){return e?(t.push({name:"headerFooter",properties:{rawMap:{differentFirst:null!=e.first?1:0,differentOddEven:null!=e.even?1:0}},children:$e(e)}),t):t}}(a),function(e){return function(t){return rt.worksheetImages.get(e)&&t.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),t}}(o))([])}},tt=function(e){return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:e.map(function(e){return{name:"Relationship",properties:{rawMap:{Id:(t=e).Id,Type:t.Type,Target:t.Target}}};var t})}};var ot=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s},rt=function(){function e(){}return e.createExcel=function(e,t,o,r,n){return this.addSheetName(t),function(e,t){1===(Be=t)&&Ue(),e.forEach(je)}(e,this.sheetNames.length),this.createWorksheet(t,o,r,n)},e.buildImageMap=function(e,t,o,r,n){var i=this.sheetNames.length,s=this.images.get(e.id);e.position&&e.position.row&&e.position.column||(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:t,column:r.indexOf(o)+1}));var a=e;if(function(e,t){var o=e.position,r=o.colSpan,n=o.column;if(e.width)if(r)for(var i=t.slice(n-1,n+r-1),s=0,a=0;a<i.length;a++){var l=i[a].getActualWidth();if(e.width<s+l){e.position.colSpan=a+1,e.totalWidth=e.width,e.width=e.totalWidth-s;break}s+=l}else e.totalWidth=e.width}(a,r),function(e,t){var o,r=e.position,n=r.rowSpan,i=r.row;if(e.height)if(n)for(var s=0,a=0,l=i;l<i+n;l++){var u=(o=U(l,t)||20,Math.round(96*o/72));if(e.height<s+u){e.position.rowSpan=a+1,e.totalHeight=e.height,e.height=e.totalHeight-s;break}s+=u,a++}else e.totalHeight=e.height}(a,n),s){var l=s.find(function(e){return e.sheetId===i});l?l.image.push(a):s.push({sheetId:i,image:[a]})}else this.images.set(a.id,[{sheetId:i,image:[a]}]),this.workbookImageIds.set(a.id,{type:a.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(i,a)},e.buildSheetImageMap=function(e,t){var o=this.worksheetImageIds.get(e);o||(o=new Map,this.worksheetImageIds.set(e,o));var r=this.worksheetImages.get(e);r?(r.push(t),o.get(t.id)||o.set(t.id,{index:o.size,type:t.imageType})):(this.worksheetImages.set(e,[t]),o.set(t.id,{index:0,type:t.imageType}))},e.addSheetName=function(e){for(var t=i._.escapeString(e.name)||"",o="";-1!==this.sheetNames.indexOf(""+t+o);)if(""===o)o="_1";else{var r=parseInt(o.slice(1),10);o="_"+(r+1)}e.name=""+t+o,this.sheetNames.push(e.name)},e.getStringPosition=function(e){return this.sharedStrings.has(e)?this.sharedStrings.get(e):(this.sharedStrings.set(e,this.sharedStrings.size),this.sharedStrings.size-1)},e.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=i.nPL.SINGLE_SHEET},e.createWorkbook=function(){return j({name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[Ze(this.sheetNames)]})},e.createStylesheet=function(e){return j(qe(e))},e.createSharedStrings=function(){return j({name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:(e=this.sharedStrings).size,uniqueCount:e.size}},children:(t=e,o=[],t.forEach(function(e,t){var r=t.toString(),n={name:"t",textNode:i._.utf8_encode(i._.escapeString(r))};r.trim().length!==r.length&&(n.properties={rawMap:{"xml:space":"preserve"}}),o.push({name:"si",children:[n]})}),o)});var e,t,o},e.createCore=function(e){return j(function(e){var t=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:e},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t}]}}(e))},e.createContentTypes=function(e){return j(te(e))},e.createRels=function(){var e=tt([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return j(e)},e.createTheme=function(){return j({name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[{name:"a:themeElements",children:[{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[pe(["dk1","sysClr","windowText","000000"]),pe(["lt1","sysClr","window","FFFFFF"]),pe(["dk2","srgbClr","44546A"]),pe(["lt2","srgbClr","E7E6E6"]),pe(["accent1","srgbClr","4472C4"]),pe(["accent2","srgbClr","ED7D31"]),pe(["accent3","srgbClr","A5A5A5"]),pe(["accent4","srgbClr","FFC000"]),pe(["accent5","srgbClr","5B9BD5"]),pe(["accent6","srgbClr","70AD47"]),pe(["hlink","srgbClr","0563C1"]),pe(["folHlink","srgbClr","954F72"])]},(e=i._.utf8_encode,{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[ce(["latin","Calibri Light",void 0,"020F0302020204030204"]),ce(["ea",""]),ce(["cs",""]),ce(["font",e("\u6e38\u30b4\u30b7\u30c3\u30af Light"),"Jpan"]),ce(["font",e("\ub9d1\uc740 \uace0\ub515"),"Hang"]),ce(["font",e("\u7b49\u7ebf Light"),"Hans"]),ce(["font",e("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),ce(["font","Times New Roman","Arab"]),ce(["font","Times New Roman","Hebr"]),ce(["font","Tahoma","Thai"]),ce(["font","Nyala","Ethi"]),ce(["font","Vrinda","Beng"]),ce(["font","Shruti","Gujr"]),ce(["font","MoolBoran","Khmr"]),ce(["font","Tunga","Knda"]),ce(["font","Raavi","Guru"]),ce(["font","Euphemia","Cans"]),ce(["font","Plantagenet Cherokee","Cher"]),ce(["font","Microsoft Yi Baiti","Yiii"]),ce(["font","Microsoft Himalaya","Tibt"]),ce(["font","MV Boli","Thaa"]),ce(["font","Mangal","Deva"]),ce(["font","Gautami","Telu"]),ce(["font","Latha","Taml"]),ce(["font","Estrangelo Edessa","Syrc"]),ce(["font","Kalinga","Orya"]),ce(["font","Kartika","Mlym"]),ce(["font","DokChampa","Laoo"]),ce(["font","Iskoola Pota","Sinh"]),ce(["font","Mongolian Baiti","Mong"]),ce(["font","Times New Roman","Viet"]),ce(["font","Microsoft Uighur","Uigh"]),ce(["font","Sylfaen","Geor"]),ce(["font","Arial","Armn"]),ce(["font","Leelawadee UI","Bugi"]),ce(["font","Microsoft JhengHei","Bopo"]),ce(["font","Javanese Text","Java"]),ce(["font","Segoe UI","Lisu"]),ce(["font","Myanmar Text","Mymr"]),ce(["font","Ebrima","Nkoo"]),ce(["font","Nirmala UI","Olck"]),ce(["font","Ebrima","Osma"]),ce(["font","Phagspa","Phag"]),ce(["font","Estrangelo Edessa","Syrn"]),ce(["font","Estrangelo Edessa","Syrj"]),ce(["font","Estrangelo Edessa","Syre"]),ce(["font","Nirmala UI","Sora"]),ce(["font","Microsoft Tai Le","Tale"]),ce(["font","Microsoft New Tai Lue","Talu"]),ce(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[ce(["latin","Calibri",void 0,"020F0502020204030204"]),ce(["ea",""]),ce(["cs",""]),ce(["font",e("\u6e38\u30b4\u30b7\u30c3\u30af"),"Jpan"]),ce(["font",e("\ub9d1\uc740 \uace0\ub515"),"Hang"]),ce(["font",e("\u7b49\u7ebf"),"Hans"]),ce(["font",e("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),ce(["font","Arial","Arab"]),ce(["font","Arial","Hebr"]),ce(["font","Tahoma","Thai"]),ce(["font","Nyala","Ethi"]),ce(["font","Vrinda","Beng"]),ce(["font","Shruti","Gujr"]),ce(["font","DaunPenh","Khmr"]),ce(["font","Tunga","Knda"]),ce(["font","Raavi","Guru"]),ce(["font","Euphemia","Cans"]),ce(["font","Plantagenet Cherokee","Cher"]),ce(["font","Microsoft Yi Baiti","Yiii"]),ce(["font","Microsoft Himalaya","Tibt"]),ce(["font","MV Boli","Thaa"]),ce(["font","Mangal","Deva"]),ce(["font","Gautami","Telu"]),ce(["font","Latha","Taml"]),ce(["font","Estrangelo Edessa","Syrc"]),ce(["font","Kalinga","Orya"]),ce(["font","Kartika","Mlym"]),ce(["font","DokChampa","Laoo"]),ce(["font","Iskoola Pota","Sinh"]),ce(["font","Mongolian Baiti","Mong"]),ce(["font","Arial","Viet"]),ce(["font","Microsoft Uighur","Uigh"]),ce(["font","Sylfaen","Geor"]),ce(["font","Arial","Armn"]),ce(["font","Leelawadee UI","Bugi"]),ce(["font","Microsoft JhengHei","Bopo"]),ce(["font","Javanese Text","Java"]),ce(["font","Segoe UI","Lisu"]),ce(["font","Myanmar Text","Mymr"]),ce(["font","Ebrima","Nkoo"]),ce(["font","Nirmala UI","Olck"]),ce(["font","Ebrima","Osma"]),ce(["font","Phagspa","Phag"]),ce(["font","Estrangelo Edessa","Syrn"]),ce(["font","Estrangelo Edessa","Syrj"]),ce(["font","Estrangelo Edessa","Syre"]),ce(["font","Nirmala UI","Sora"]),ce(["font","Microsoft Tai Le","Tale"]),ce(["font","Microsoft New Tai Lue","Talu"]),ce(["font","Ebrima","Tfng"])]}]}),{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[ge("phClr"),me(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),me(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[ve(["6350","flat","sng","ctr"]),ve(["12700","flat","sng","ctr"]),ve(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[ye(),ye(),ye(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[ge("phClr"),ge("phClr",[he("tint","95000"),he("satMod","170000")]),me(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]}]},{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]});var e},e.createWorkbookRels=function(e){var t=new Array(e).fill(void 0).map(function(e,t){return{Id:"rId"+(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet"+(t+1)+".xml"}}),o=tt(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ot(arguments[t]));return e}(t,[{Id:"rId"+(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId"+(e+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId"+(e+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]));return j(o)},e.createDrawing=function(e){return j(ue({sheetIndex:e}))},e.createDrawingRel=function(e){var t=this,o=this.worksheetImageIds.get(e),r=[];return o.forEach(function(e,o){r.push({Id:"rId"+(e.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image"+(t.workbookImageIds.get(o).index+1)+"."+e.type})}),j(tt(r))},e.createWorksheetDrawingRel=function(e){var t=tt([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing"+(e+1)+".xml"}]);return j(t)},e.createWorksheet=function(e,t,o,r){return j(et({worksheet:e,currentSheet:this.sheetNames.length-1,margins:t,pageSetup:o,headerFooterConfig:r}))},e.sharedStrings=new Map,e.sheetNames=[],e.images=new Map,e.worksheetImages=new Map,e.workbookImageIds=new Map,e.worksheetImageIds=new Map,e.factoryMode=i.nPL.SINGLE_SHEET,e}(),nt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nt(t,e),t.prototype.createExcel=function(e){var t=this.config;return rt.createExcel(this.excelStyles,e,t.margins,t.pageSetup,t.headerFooterConfig)},t.prototype.getDataTypeForValue=function(e){return void 0===e?"empty":i._.isNumeric(e)?"n":"s"},t.prototype.getType=function(e,t,o){if(this.isFormula(o))return"f";if(t&&t.dataType)switch(t.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export ["+t.id+".dataType="+t.dataType+"]")}return e},t.prototype.addImage=function(e,t,o){if(this.config.addImageToCell){var r=this.config.addImageToCell(e,t,o);if(r)return rt.buildImageMap(r.image,e,t,this.columnsToExport,this.config.rowHeight),r}},t.prototype.createCell=function(e,t,o){var r=this.getStyleById(e),n=this.getType(t,r,o)||t;return{styleId:r?e:void 0,data:{type:n,value:this.getCellValue(n,o)}}},t.prototype.createMergedCell=function(e,t,o,r){var n=null==o?"":o;return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:"s"===t?rt.getStringPosition(n).toString():o},mergeAcross:r}},t.prototype.getCellValue=function(e,t){if(null==t)return rt.getStringPosition("").toString();switch(e){case"s":return""===t?"":rt.getStringPosition(t).toString();case"f":return t.slice(1);case"n":return Number(t).toString();default:return t}},t}(X),st=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),at=function(){return(at=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},lt=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},ut=function(e){var t=e.data,o=e.fontSize,r=void 0===o?11:o,n=e.author,i=void 0===n?"AG Grid":n,s=rt.images.size>0;if(N.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),s){N.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var a=0;rt.images.forEach(function(e){var t=e[0].image[0];N.addFile("xl/media/image"+ ++a+"."+t.imageType,t.base64,!0)})}if(!t||0===t.length)return console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),void rt.resetFactory();var l=t.length,u=0;return t.forEach(function(e,t){N.addFile("xl/worksheets/sheet"+(t+1)+".xml",e),s&&rt.worksheetImages.get(t)&&pt(t,u++)}),N.addFile("xl/workbook.xml",rt.createWorkbook()),N.addFile("xl/styles.xml",rt.createStylesheet(r)),N.addFile("xl/sharedStrings.xml",rt.createSharedStrings()),N.addFile("xl/theme/theme1.xml",rt.createTheme()),N.addFile("xl/_rels/workbook.xml.rels",rt.createWorkbookRels(l)),N.addFile("docProps/core.xml",rt.createCore(i)),N.addFile("[Content_Types].xml",rt.createContentTypes(l)),N.addFile("_rels/.rels",rt.createRels()),rt.resetFactory(),N.getContent(e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")},pt=function(e,t){var o="xl/drawings/drawing"+(t+1)+".xml",r="xl/worksheets/_rels/sheet"+(e+1)+".xml.rels";N.addFile("xl/drawings/_rels/drawing"+(t+1)+".xml.rels",rt.createDrawingRel(e)),N.addFile(o,rt.createDrawing(e)),N.addFile(r,rt.createWorksheetDrawingRel(t))},ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.exportMode="xlsx",t}return st(t,e),t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},t.prototype.getMergedParams=function(e){var t=this.gridOptionsWrapper.getDefaultExportParams("excel");return Object.assign({},t,e)},t.prototype.getData=function(t){return this.setExportMode(t.exportMode||"xlsx"),e.prototype.getData.call(this,t)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var t=this.getMergedParams(e),o=this.getData(t),r=this.packageFile({data:[o],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType});return r&&y.download(this.getFileName(t.fileName),r),o},t.prototype.exportDataAsExcel=function(e){return this.export(e)},t.prototype.getDataAsExcel=function(e){var t=this.getMergedParams(e),o=this.getData(t);return e&&"xml"===e.exportMode?o:this.packageFile({data:[o],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType})},t.prototype.setFactoryMode=function(e,t){void 0===t&&(t="xlsx"),("xlsx"===t?rt:B).factoryMode=e},t.prototype.getFactoryMode=function(e){return("xlsx"===e?rt:B).factoryMode},t.prototype.getSheetDataForExcel=function(e){var t=this.getMergedParams(e);return this.getData(t)},t.prototype.getMultipleSheetsAsExcel=function(e){return ut(e)},t.prototype.exportMultipleSheetsAsExcel=function(e){return function(e){var t=e.fileName,o=void 0===t?"export.xlsx":t,r=ut(e);r&&y.download(o,r)}(e)},t.prototype.getDefaultFileName=function(){return"export."+this.getExportMode()},t.prototype.getDefaultFileExtension=function(){return this.getExportMode()},t.prototype.createSerializingSession=function(e){var t=this,o=t.columnModel,r=t.valueService,n=t.gridOptionsWrapper,s="xlsx"===this.getExportMode(),a="ag-grid";null!=e.sheetName&&(a=i._.utf8_encode(e.sheetName.toString().substr(0,31)));var l=at(at({},e),{sheetName:a,columnModel:o,valueService:r,gridOptionsWrapper:n,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:this.gridOptions.excelStyles||[],styleLinker:this.styleLinker.bind(this)});return new(s?it:Q)(l)},t.prototype.styleLinker=function(e,t,o,r,n){if(e===D.HEADER)return["header"];if(e===D.HEADER_GROUPING)return["header","headerGroup"];var i=this.gridOptions.excelStyles,s=["cell"];if(!i||!i.length)return s;var a=i.map(function(e){return e.id});return this.stylingService.processAllCellClasses(r.getColDef(),{value:o,data:n.data,node:n,colDef:r.getColDef(),rowIndex:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()},function(e){a.indexOf(e)>-1&&s.push(e)}),s.sort(function(e,t){return a.indexOf(e)<a.indexOf(t)?-1:1})},t.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressExcelExport()},t.prototype.setExportMode=function(e){this.exportMode=e},t.prototype.getExportMode=function(){return this.exportMode},t.prototype.packageFile=function(e){return"xml"===this.getExportMode()?new Blob(["\ufeff",e.data[0]],{type:e.mimeType||"application/vnd.ms-excel"}):ut(e)},lt([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),lt([(0,i.fsG)("valueService")],t.prototype,"valueService",void 0),lt([(0,i.fsG)("gridOptions")],t.prototype,"gridOptions",void 0),lt([(0,i.fsG)("stylingService")],t.prototype,"stylingService",void 0),lt([(0,i.fsG)("gridSerializer")],t.prototype,"gridSerializer",void 0),lt([(0,i.fsG)("gridOptionsWrapper")],t.prototype,"gridOptionsWrapper",void 0),lt([i.NqP],t.prototype,"postConstruct",null),lt([(0,i.Vu6)("excelCreator")],t)}(m),dt={moduleName:i.GXE.ExcelExportModule,beans:[ct,O,A],dependantModules:[M,_.f]},ht=o(1841),ft=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),gt=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},mt=(()=>(function(e){e[e.EXPANDED=0]="EXPANDED",e[e.COLLAPSED=1]="COLLAPSED",e[e.INDETERMINATE=2]="INDETERMINATE"}(mt||(mt={})),mt))(),vt=(function(e){function t(){return e.call(this,t.TEMPLATE)||this}ft(t,e),t.prototype.postConstruct=function(){var e=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",function(t){t.key===i.VDZ.SPACE&&e.onExpandClicked()}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange(function(){return e.onFilterTextChanged()}),this.addManagedListener(this.eFilterTextField.getInputElement(),"keypress",this.onMiniFilterKeyPress.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var t=this.gridOptionsWrapper.getLocaleTextFunc();this.eSelect.setInputAriaLabel(t("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(t("ariaFilterColumnsInput","Filter Columns Input"))},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=i._.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=i._.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=i._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper)),this.setExpandState(mt.EXPANDED)},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressColumnFilter,t=!this.params.suppressColumnSelectAll,o=!this.params.suppressColumnExpandAll,r=this.columnModel.isPrimaryColumnGroupsPresent(),n=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search...")),i._.setDisplayed(this.eFilterTextField.getGui(),e),i._.setDisplayed(this.eSelect.getGui(),t),i._.setDisplayed(this.eExpand,o&&r)},t.prototype.onFilterTextChanged=function(){var e=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=i._.debounce(function(){var t=e.eFilterTextField.getValue();e.dispatchEvent({type:"filterChanged",filterText:t})},t.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},t.prototype.onMiniFilterKeyPress=function(e){var o=this;e.key===i.VDZ.ENTER&&setTimeout(function(){return o.onSelectClicked()},t.DEBOUNCE_DELAY)},t.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},t.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===mt.EXPANDED?"collapseAll":"expandAll"})},t.prototype.setExpandState=function(e){this.expandState=e,i._.setDisplayed(this.eExpandChecked,this.expandState===mt.EXPANDED),i._.setDisplayed(this.eExpandUnchecked,this.expandState===mt.COLLAPSED),i._.setDisplayed(this.eExpandIndeterminate,this.expandState===mt.INDETERMINATE)},t.prototype.setSelectionState=function(e){this.selectState=e,this.eSelect.setValue(this.selectState)},t.DEBOUNCE_DELAY=300,t.TEMPLATE='<div class="ag-column-select-header" role="presentation" tabindex="-1">\n            <div ref="eExpand" class="ag-column-select-header-icon" tabindex="0"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',gt([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),gt([(0,i.cqo)("eExpand")],t.prototype,"eExpand",void 0),gt([(0,i.cqo)("eSelect")],t.prototype,"eSelect",void 0),gt([(0,i.cqo)("eFilterTextField")],t.prototype,"eFilterTextField",void 0),gt([i.NqP],t.prototype,"postConstruct",null)}(i.wA2),function(){function e(e,t,o,r,n){void 0===r&&(r=!1),this.eventService=new i.POd,this.displayName=e,this.dept=o,this.group=r,r?(this.columnGroup=t,this.expanded=n,this.children=[]):this.column=t}return e.prototype.isGroup=function(){return this.group},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.getColumnGroup=function(){return this.columnGroup},e.prototype.getColumn=function(){return this.column},e.prototype.getDept=function(){return this.dept},e.prototype.isExpanded=function(){return!!this.expanded},e.prototype.getChildren=function(){return this.children},e.prototype.isPassesFilter=function(){return this.passesFilter},e.prototype.setExpanded=function(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:e.EVENT_EXPANDED_CHANGED}))},e.prototype.setPassesFilter=function(e){this.passesFilter=e},e.prototype.addEventListener=function(e,t){this.eventService.addEventListener(e,t)},e.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)},e.EVENT_EXPANDED_CHANGED="expandedChanged",e}()),yt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Ct=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},wt=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s},St=function(e){function t(t,o,r){var n=e.call(this,'<div class="ag-menu"></div>')||this;return n.column=t,n.mouseEvent=o,n.parentEl=r,n.displayName=null,n}return yt(t,e),t.prototype.postConstruct=function(){this.initializeProperties(this.column),this.buildMenuItemMap(),this.displayName=this.column instanceof i.sgG?this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()&&(this.mouseEvent.preventDefault(),this.displayContextMenu())},t.prototype.initializeProperties=function(e){this.columns=e instanceof i.KTm?e.getLeafColumns():[e],this.allowGrouping=this.columns.some(function(e){return e.isPrimary()&&e.isAllowRowGroup()}),this.allowValues=this.columns.some(function(e){return e.isPrimary()&&e.isAllowValue()}),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(function(e){return e.isPrimary()&&e.isAllowPivot()})},t.prototype.buildMenuItemMap=function(){var e=this,t=this.gridOptionsWrapper.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(e){return e.isPrimary()&&e.isAllowRowGroup()},activeFunction:function(e){return e.isRowGroupActive()},activateLabel:function(){return t("groupBy","Group by")+" "+e.displayName},deactivateLabel:function(){return t("ungroupBy","Un-Group by")+" "+e.displayName},activateFunction:function(){var t=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.addColumnsToList(t),"toolPanelUi")},deActivateFunction:function(){var t=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.removeColumnsFromList(t),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(e){return e.isPrimary()&&e.isAllowValue()},activeFunction:function(e){return e.isValueActive()},activateLabel:function(){return t("addToValues","Add "+e.displayName+" to values",[e.displayName])},deactivateLabel:function(){return t("removeFromValues","Remove "+e.displayName+" from values",[e.displayName])},activateFunction:function(){var t=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.addColumnsToList(t),"toolPanelUi")},deActivateFunction:function(){var t=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.removeColumnsFromList(t),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(t){return e.columnModel.isPivotMode()&&t.isPrimary()&&t.isAllowPivot()},activeFunction:function(e){return e.isPivotActive()},activateLabel:function(){return t("addToLabels","Add "+e.displayName+" to labels",[e.displayName])},deactivateLabel:function(){return t("removeFromLabels","Remove "+e.displayName+" from labels",[e.displayName])},activateFunction:function(){var t=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.addColumnsToList(t),"toolPanelUi")},deActivateFunction:function(){var t=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.removeColumnsFromList(t),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},t.prototype.addColumnsToList=function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(wt(arguments[t]));return e}(e).concat(this.columns.filter(function(t){return-1===e.indexOf(t)}))},t.prototype.removeColumnsFromList=function(e){var t=this;return e.filter(function(e){return-1===t.columns.indexOf(e)})},t.prototype.displayContextMenu=function(){var e=this,t=this.getGui(),o=this.createBean(new i.O_3),r=this.getMappedMenuItems(),n=function(){};t.appendChild(o.getGui()),o.addMenuItems(r),o.addManagedListener(o,i.sJC.EVENT_MENU_ITEM_SELECTED,function(){e.parentEl.focus(),n()});var s=this.popupService.addPopup({modal:!0,eChild:t,closeOnEsc:!0,afterGuiAttached:function(){return e.focusService.focusInto(o.getGui())},ariaLabel:"Foo",closedCallback:function(t){t instanceof KeyboardEvent&&e.parentEl.focus(),e.destroyBean(o)}});s&&(n=s.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:t})},t.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},t.prototype.getMappedMenuItems=function(){var e,t,o=[],r=function(e){var t=n.columns.some(function(t){return e.allowedFunction(t)&&!e.activeFunction(t)}),r=n.columns.some(function(t){return e.allowedFunction(t)&&e.activeFunction(t)});t&&o.push({name:e.activateLabel(n.displayName),icon:i._.createIconNoSpan(e.addIcon,n.gridOptionsWrapper,null),action:function(){return e.activateFunction()}}),r&&o.push({name:e.deactivateLabel(n.displayName),icon:i._.createIconNoSpan(e.removeIcon,n.gridOptionsWrapper,null),action:function(){return e.deActivateFunction()}})},n=this;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.menuItemMap.values()),a=s.next();!a.done;a=s.next())r(a.value)}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return o},Ct([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Ct([(0,i.fsG)("popupService")],t.prototype,"popupService",void 0),Ct([(0,i.fsG)("focusService")],t.prototype,"focusService",void 0),Ct([i.NqP],t.prototype,"postConstruct",null),t}(i.wA2),Et=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),At=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},bt=function(e){function t(t,o,r,n){var i=e.call(this)||this;return i.modelItem=t,i.allowDragging=o,i.eventType=r,i.focusWrapper=n,i.processingColumnStateChange=!1,i.modelItem=t,i.columnGroup=t.getColumnGroup(),i.columnDept=t.getDept(),i.allowDragging=o,i}return Et(t,e),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=i._.createIconNoSpan("columnDrag",this.gridOptionsWrapper),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var o=this.cbSelect.getGui(),r=this.cbSelect.getInputElement();o.insertAdjacentElement("afterend",this.eDragHandle),r.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.columnGroup,this.eventType),i._.missing(this.displayName)&&(this.displayName=">>"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,i.jkc.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,vt.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),i.fQL.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsWrapper,null,this.columnGroup).forEach(function(t){return e.addOrRemoveCssClass(t,!0)})},t.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},t.prototype.setupTooltip=function(){var e=this,t=this.columnGroup.getColGroupDef();if(t){var o=function(){e.setTooltip(t.headerTooltip)};o(),this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,o)}},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="columnToolPanelColumnGroup",t},t.prototype.handleKeyDown=function(e){switch(e.key){case i.VDZ.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case i.VDZ.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case i.VDZ.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},t.prototype.onContextMenu=function(e){var t=this,o=this.columnGroup;if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var r=this.createBean(new St(o,e,this.focusWrapper));this.addDestroyFunc(function(){r.isAlive()&&t.destroyBean(r)})}},t.prototype.addVisibilityListenersToAllChildren=function(){var e=this;this.columnGroup.getLeafColumns().forEach(function(t){e.addManagedListener(t,i.sgG.EVENT_VISIBLE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,i.sgG.EVENT_VALUE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,i.sgG.EVENT_PIVOT_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,i.sgG.EVENT_ROW_GROUP_CHANGED,e.onColumnStateChanged.bind(e))})},t.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var t=!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns(),o={type:i.rvo.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:t?i.jUB.ICON_HIDE:i.jUB.ICON_NOT_ALLOWED,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){e.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.columnGroup})},onDragStopped:function(){e.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_END})},onGridEnter:function(){t&&e.onChangeCommon(!0)},onGridExit:function(){t&&e.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(o,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(o)})}else i._.setDisplayed(this.eDragHandle,!1)},t.prototype.createDragItem=function(){var e={};return this.columnGroup.getLeafColumns().forEach(function(t){e[t.getId()]=t.isVisible()}),{columns:this.columnGroup.getLeafColumns(),visibleState:e}},t.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(i._.createIcon("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(i._.createIcon("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var e=new i.rwP(this.eColumnGroupIcons,!0);this.addManagedListener(e,i.rwP.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))},t.prototype.onLabelClicked=function(){var e=!this.cbSelect.getValue();this.onChangeCommon(e)},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.getVisibleLeafColumns=function(){var e=[],t=function(o){o.forEach(function(o){o.isPassesFilter()&&(o.isGroup()?t(o.getChildren()):e.push(o.getColumn()))})};return t(this.modelItem.getChildren()),e},t.prototype.onChangeCommon=function(e){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)},t.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=e("ariaColumnGroup","Column Group"),o=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),r=e("ariaToggleVisibility","Press SPACE to toggle visibility");i._.setAriaLabel(this.focusWrapper,this.displayName+" "+t),this.cbSelect.setInputAriaLabel(r+" ("+o+")"),i._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.onColumnStateChanged=function(){var e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(t),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1},t.prototype.workOutSelectedValue=function(){var e=this,t=this.columnModel.isPivotMode(),o=this.getVisibleLeafColumns(),r=0,n=0;if(o.forEach(function(o){!t&&o.getColDef().lockVisible||(e.isColumnChecked(o,t)?r++:n++)}),!(r>0&&n>0))return r>0},t.prototype.workOutReadOnlyValue=function(){var e=this.columnModel.isPivotMode(),t=0;return this.columnGroup.getLeafColumns().forEach(function(o){e?o.isAnyFunctionAllowed()&&t++:o.getColDef().lockVisible||t++}),0===t},t.prototype.isColumnChecked=function(e,t){if(t){var o=e.isPivotActive(),r=e.isRowGroupActive(),n=e.isValueActive();return o||r||n}return e.isVisible()},t.prototype.onExpandOrContractClicked=function(){var e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)},t.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},t.prototype.setOpenClosedIcons=function(){var e=this.modelItem.isExpanded();i._.setDisplayed(this.eGroupClosedIcon,!e),i._.setDisplayed(this.eGroupOpenedIcon,e)},t.prototype.refreshAriaExpanded=function(){i._.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){var t=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!t||!e&&t)&&this.cbSelect.toggle()},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.setSelected=function(e){this.cbSelect.setValue(e,!0)},t.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',At([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),At([(0,i.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),At([(0,i.fsG)("modelItemUtils")],t.prototype,"modelItemUtils",void 0),At([(0,i.cqo)("cbSelect")],t.prototype,"cbSelect",void 0),At([(0,i.cqo)("eLabel")],t.prototype,"eLabel",void 0),At([(0,i.cqo)("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),At([(0,i.cqo)("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),At([(0,i.cqo)("eColumnGroupIcons")],t.prototype,"eColumnGroupIcons",void 0),At([i.NqP],t.prototype,"init",null),t}(i.wA2),Rt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Dt=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Ot="ag-list-item-hovered",Mt=function(e){function t(t,o){var r=e.call(this)||this;return r.comp=t,r.virtualList=o,r.currentDragColumn=null,r.lastHoveredColumnItem=null,r}return Rt(t,e),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_START,this.columnPanelItemDragStart.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_END,this.columnPanelItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},t.prototype.columnPanelItemDragStart=function(e){this.currentDragColumn=e.column,this.getCurrentColumns().find(function(e){var t=e.getColDef();return!!t.suppressMovable||!!t.lockPosition})&&(this.moveBlocked=!0)},t.prototype.columnPanelItemDragEnd=function(){var e=this;window.setTimeout(function(){e.currentDragColumn=null,e.moveBlocked=!1},10)},t.prototype.createDropTarget=function(){var e=this;this.dragAndDropService.addDropTarget({isInterestedIn:function(e){return e===i.rvo.ToolPanel},getIconName:function(){return i.jUB[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(t){return e.onDragging(t)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}})},t.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new i.Cvn({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(t){return e.scrollTop=t}})},t.prototype.onDragging=function(e){if(this.currentDragColumn&&!this.moveBlocked){var t=this.getDragColumnItem(e),o=this.virtualList.getComponentAt(t.rowIndex);if(o){var r=o.getGui().parentElement;this.lastHoveredColumnItem&&this.lastHoveredColumnItem.rowIndex===t.rowIndex&&this.lastHoveredColumnItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredColumnItem=t,i._.radioCssClass(r,""+Ot),i._.radioCssClass(r,"ag-item-highlight-"+t.position))}}},t.prototype.getDragColumnItem=function(e){var t=this.virtualList.getGui(),o=parseFloat(window.getComputedStyle(t).paddingTop),r=this.virtualList.getRowHeight(),n=this.virtualList.getScrollTop(),i=Math.max(0,(e.y-o+n)/r),s=this.comp.getDisplayedColsList().length-1,a=0|Math.min(s,i);return{rowIndex:a,position:Math.round(i)>i||i>s?"bottom":"top",component:this.virtualList.getComponentAt(a)}},t.prototype.onDragStop=function(){if(!this.moveBlocked){var e=this.getTargetIndex(),t=this.getCurrentColumns();null!=e&&this.columnModel.moveColumns(t,e),this.clearHoveredItems(),this.autoScrollService.ensureCleared()}},t.prototype.getMoveDiff=function(e){var t=this.columnModel.getAllGridColumns(),o=this.getCurrentColumns(),r=o.length;return t.indexOf(o[0])<e?r:0},t.prototype.getCurrentColumns=function(){return this.currentDragColumn instanceof i.KTm?this.currentDragColumn.getLeafColumns():[this.currentDragColumn]},t.prototype.getTargetIndex=function(){if(!this.lastHoveredColumnItem)return null;var e,t=this.lastHoveredColumnItem.component,o="top"===this.lastHoveredColumnItem.position;t instanceof bt?(e=t.getColumns()[0],o=!0):e=t.getColumn();var r=this.columnModel.getAllGridColumns().indexOf(e),n=o?r:r+1;return n-this.getMoveDiff(n)},t.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){this.virtualList.getGui().querySelectorAll("."+Ot).forEach(function(e){[Ot,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(function(t){e.classList.remove(t)})}),this.lastHoveredColumnItem=null},Dt([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Dt([(0,i.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Dt([i.NqP],t.prototype,"postConstruct",null),t}(i.AS9),Pt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),xt=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Tt=function(e){function t(t,o,r,n,i){var s=e.call(this)||this;return s.column=t,s.columnDept=o,s.allowDragging=r,s.groupsExist=n,s.focusWrapper=i,s.processingColumnStateChange=!1,s}return Pt(t,e),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=i._.createIconNoSpan("columnDrag",this.gridOptionsWrapper),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var o=this.cbSelect.getGui(),r=this.cbSelect.getInputElement();o.insertAdjacentElement("afterend",this.eDragHandle),r.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel");var n=i._.escapeString(this.displayName);this.eLabel.innerHTML=n;var s=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+s),this.setupDragging(),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,i.sgG.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,i.sgG.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,i.sgG.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,i.sgG.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,i.jkc.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),i.fQL.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsWrapper,this.column,null).forEach(function(t){return e.addOrRemoveCssClass(t,!0)})},t.prototype.getColumn=function(){return this.column},t.prototype.setupTooltip=function(){var e=this,t=function(){var t=e.column.getColDef().headerTooltip;e.setTooltip(t)};t(),this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,t)},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="columnToolPanelColumn",t.colDef=this.column.getColDef(),t},t.prototype.onContextMenu=function(e){var t=this,o=this.column;if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var r=this.createBean(new St(o,e,this.focusWrapper));this.addDestroyFunc(function(){r.isAlive()&&t.destroyBean(r)})}},t.prototype.handleKeyDown=function(e){e.key===i.VDZ.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},t.prototype.onLabelClicked=function(){if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var e=!this.cbSelect.getValue();this.onChangeCommon(e)}},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.onChangeCommon=function(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))},t.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=e("ariaColumn","Column"),o=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),r=e("ariaToggleVisibility","Press SPACE to toggle visibility");i._.setAriaLabel(this.focusWrapper,this.displayName+" "+t),this.cbSelect.setInputAriaLabel(r+" ("+o+")"),i._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var t=!this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns(),o={type:i.rvo.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,defaultIconName:t?i.jUB.ICON_HIDE:i.jUB.ICON_NOT_ALLOWED,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){e.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.column})},onDragStopped:function(){e.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_PANEL_ITEM_DRAG_END})},onGridEnter:function(){t&&e.onChangeCommon(!0)},onGridExit:function(){t&&e.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(o,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(o)})}else i._.setDisplayed(this.eDragHandle,!1)},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var e=this.columnModel.isPivotMode();if(e){var t=this.column.isAnyFunctionActive();this.cbSelect.setValue(t)}else this.cbSelect.setValue(this.column.isVisible());var o=!0,r=!0;if(e){var n=this.gridOptionsWrapper.isFunctionsReadOnly(),i=!this.column.isAnyFunctionAllowed();r=o=!n&&!i}else{var s=this.column.getColDef();o=!s.lockVisible,r=!!s.enableRowGroup||!!s.enableValue||!(s.lockPosition||s.suppressMovable)}this.cbSelect.setReadOnly(!o),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!r),this.addOrRemoveCssClass("ag-column-select-column-readonly",!r&&!o);var a=e&&this.gridOptionsWrapper.isFunctionsPassive();this.cbSelect.setPassive(a),this.processingColumnStateChange=!1},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.isExpandable=function(){return!1},t.prototype.setExpanded=function(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},t.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',xt([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),xt([(0,i.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),xt([(0,i.fsG)("modelItemUtils")],t.prototype,"modelItemUtils",void 0),xt([(0,i.cqo)("eLabel")],t.prototype,"eLabel",void 0),xt([(0,i.cqo)("cbSelect")],t.prototype,"cbSelect",void 0),xt([i.NqP],t.prototype,"init",null),t}(i.wA2),Nt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),_t=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},It=function(){function e(e){this.items=e}return e.prototype.getRowCount=function(){return this.items.length},e.prototype.getRow=function(e){return this.items[e]},e}(),Gt=(function(e){function t(){var o=e.call(this,t.TEMPLATE)||this;return o.destroyColumnItemFuncs=[],o}Nt(t,e),t.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(function(e){return e()}),this.destroyColumnItemFuncs=[]},t.prototype.init=function(e,t,o){var r=this;this.params=e,this.allowDragging=t,this.eventType=o,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[i.zW2.EVENT_COLUMN_PIVOT_CHANGED,i.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,i.zW2.EVENT_COLUMN_ROW_GROUP_CHANGED,i.zW2.EVENT_COLUMN_VALUE_CHANGED,i.zW2.EVENT_COLUMN_VISIBLE,i.zW2.EVENT_NEW_COLUMNS_LOADED].forEach(function(e){r.addManagedListener(r.eventService,e,r.fireSelectionChangedEvent.bind(r))}),this.expandGroupsByDefault=!this.params.contractColumnSelection;var n=this.gridOptionsWrapper.getLocaleTextFunc()("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new i.CPJ("column-select","tree",n)),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator(function(e,t){return i._.setAriaLevel(t,e.getDept()+1),r.createComponentFromItem(e,t)}),this.columnModel.isReady()&&this.onColumnsChanged(),e.suppressColumnMove||this.gridOptionsWrapper.isSuppressMovableColumns()||this.createManagedBean(new Mt(this,this.virtualList))},t.prototype.createComponentFromItem=function(e,t){if(e.isGroup()){var o=new bt(e,this.allowDragging,this.eventType,t);return this.getContext().createBean(o),o}var r=new Tt(e.getColumn(),e.getDept(),this.allowDragging,this.groupsExist,t);return this.getContext().createBean(r),r},t.prototype.onColumnsChanged=function(){var e=this.getExpandedStates(),t=this.columnModel.isPivotMode();this.params.suppressSyncLayoutWithGrid||t?this.buildTreeFromProvidedColumnDefs():this.buildTreeFromWhatGridIsDisplaying(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.getDisplayedColsList=function(){return this.displayedColsList},t.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var e={};return this.forEachItem(function(t){if(t.isGroup()){var o=t.getColumnGroup();o&&(e[o.getId()]=t.isExpanded())}}),e},t.prototype.setExpandedStates=function(e){this.allColsTree&&this.forEachItem(function(t){if(t.isGroup()){var o=t.getColumnGroup();if(o){var r=e[o.getId()];null!=r&&t.setExpanded(r)}}})},t.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},t.prototype.setColumnLayout=function(e){var t=this.colDefService.createColumnTree(e);this.buildListModel(t),this.groupsExist=e.some(function(e){return e&&void 0!==e.children}),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},t.prototype.buildListModel=function(e){var t=this,o=this.onColumnExpanded.bind(this),r=function(e,t,o){e.forEach(function(e){e instanceof i.KTm?n(e,t,o):s(e,t,o)})},n=function(e,n,i){var s=e.getColGroupDef();if(!s||!s.suppressColumnsToolPanel)if(e.isPadding())r(e.getChildren(),n,i);else{var a=t.columnModel.getDisplayNameForProvidedColumnGroup(null,e,t.eventType),l=new vt(a,e,n,!0,t.expandGroupsByDefault);i.push(l),function(e){e.addEventListener(vt.EVENT_EXPANDED_CHANGED,o);var r=e.removeEventListener.bind(e,vt.EVENT_EXPANDED_CHANGED,o);t.destroyColumnItemFuncs.push(r)}(l),r(e.getChildren(),n+1,l.getChildren())}},s=function(e,o,r){if(!e.getColDef()||!e.getColDef().suppressColumnsToolPanel){var n=t.columnModel.getDisplayNameForColumn(e,"columnToolPanel");r.push(new vt(n,e,o))}};this.destroyColumnTree(),r(e,0,this.allColsTree)},t.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},t.prototype.flattenAndFilterModel=function(){var e=this;this.displayedColsList=[];var t=function(o){o.isPassesFilter()&&(e.displayedColsList.push(o),o.isGroup()&&o.isExpanded()&&o.getChildren().forEach(t))};this.allColsTree.forEach(t),this.virtualList.setModel(new It(this.displayedColsList));var o=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=o&&this.focusRowIfAlive(o),this.notifyListeners()},t.prototype.focusRowIfAlive=function(e){var t=this;window.setTimeout(function(){t.isAlive()&&t.virtualList.focusRow(e)},0)},t.prototype.forEachItem=function(e){var t=function(o){o.forEach(function(o){e(o),o.isGroup()&&t(o.getChildren())})};t(this.allColsTree)},t.prototype.doSetExpandedAll=function(e){this.forEachItem(function(t){t.isGroup()&&t.setExpanded(e)})},t.prototype.setGroupsExpanded=function(e,t){if(t){var o=[];this.forEachItem(function(r){if(r.isGroup()){var n=r.getColumnGroup().getId();t.indexOf(n)>=0&&(r.setExpanded(e),o.push(n))}});var r=t.filter(function(e){return!i._.includes(o,e)});r.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",r)}else this.doSetExpandedAll(e)},t.prototype.getExpandState=function(){var e=0,t=0;return this.forEachItem(function(o){o.isGroup()&&(o.isExpanded()?e++:t++)}),e>0&&t>0?mt.INDETERMINATE:t>0?mt.COLLAPSED:mt.EXPANDED},t.prototype.doSetSelectedAll=function(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)},t.prototype.getSelectionState=function(){var e=0,t=0,o=this.columnModel.isPivotMode();if(this.forEachItem(function(r){if(!r.isGroup()&&r.isPassesFilter()){var n,i=r.getColumn(),s=i.getColDef();if(o){if(!i.isAllowPivot()&&!i.isAllowRowGroup()&&!i.isAllowValue())return;n=i.isValueActive()||i.isPivotActive()||i.isRowGroupActive()}else{if(s.lockVisible)return;n=i.isVisible()}n?e++:t++}}),!(e>0&&t>0))return!(0===e||t>0)},t.prototype.setFilterText=function(e){this.filterText=i._.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.markFilteredColumns=function(){var e=this,t=function(t){if(!i._.exists(e.filterText))return!0;var o=t.getDisplayName();return null==o||-1!==o.toLowerCase().indexOf(e.filterText)},o=function(e,r){var n=!1;if(e.isGroup()){var i=t(e);e.getChildren().forEach(function(e){var t=o(e,i||r);t&&(n=t)})}var s=!(!r&&!n)||t(e);return e.setPassesFilter(s),s};this.allColsTree.forEach(function(e){return o(e,!1)})},t.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},t.prototype.fireGroupExpandedEvent=function(){var e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})},t.prototype.fireSelectionChangedEvent=function(){var e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})},t.TEMPLATE='<div class="ag-column-select-list" role="presentation"></div>',_t([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),_t([(0,i.fsG)("toolPanelColDefService")],t.prototype,"colDefService",void 0),_t([(0,i.fsG)("modelItemUtils")],t.prototype,"modelItemUtils",void 0),_t([i.FXL],t.prototype,"destroyColumnTree",null)}(i.wA2),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),Ft=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gt(t,e),t.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},t.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var e=this.gridOptionsWrapper.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,i.jkc.EVENT_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},t.prototype.onBtPivotMode=function(){var e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");var t=this.gridOptionsWrapper.getApi();t&&t.refreshHeader()}},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)},Ft([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Ft([(0,i.cqo)("cbPivotMode")],t.prototype,"cbPivotMode",void 0),Ft([i.$j7],t.prototype,"init",null),t}(i.wA2),kt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Vt=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Bt=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}kt(t,e),t.prototype.execute=function(e){var t=i._.missingOrEmpty(this.columnModel.getValueColumns()),o=!this.gridOptionsWrapper.getGroupRowAggFunc(),r=e.changedPath&&e.changedPath.isActive();if(!(t&&o&&r)){var n=this.createAggDetails(e);this.recursivelyCreateAggData(n)}},t.prototype.createAggDetails=function(e){var t=this.columnModel.isPivotActive(),o=this.columnModel.getValueColumns(),r=t?this.columnModel.getPivotColumns():[];return{changedPath:e.changedPath,valueColumns:o,pivotColumns:r}},t.prototype.recursivelyCreateAggData=function(e){var t=this;this.filteredOnly=!this.gridOptionsWrapper.isSuppressAggFilteredOnly(),e.changedPath.forEachChangedNodeDepthFirst(function(o){if(o.hasChildren()){if(-1===o.level){var r=!t.columnModel.isPivotMode();if(t.gridOptionsWrapper.isSuppressAggAtRootLevel()&&r)return}t.aggregateRowNode(o,e)}else o.aggData&&o.setAggData(null)},!0)},t.prototype.aggregateRowNode=function(e,t){var o,r=0===t.valueColumns.length,n=0===t.pivotColumns.length,i=this.gridOptionsWrapper.getGroupRowAggFunc();o=i?i({nodes:e.childrenAfterFilter}):r?null:n?this.aggregateRowNodeUsingValuesOnly(e,t):this.aggregateRowNodeUsingValuesAndPivot(e),e.setAggData(o),e.sibling&&e.sibling.setAggData(o)},t.prototype.aggregateRowNodeUsingValuesAndPivot=function(e){var t=this,o={},r=this.pivotStage.getPivotColumnDefs();return r.filter(function(e){return!i._.exists(e.pivotTotalColumnIds)}).forEach(function(r){var n,i=r.pivotValueColumn,s=r.colId;n=e.leafGroup?t.getValuesFromMappedSet(e.childrenMapped,r.pivotKeys||[],i):t.getValuesPivotNonLeaf(e,s),o[s]=t.aggregateValues(n,i.getAggFunc(),i,e)}),r.filter(function(e){return i._.exists(e.pivotTotalColumnIds)}).forEach(function(r){var n=[],i=r.pivotValueColumn,s=r.pivotTotalColumnIds,a=r.colId;s&&s.length&&(s.forEach(function(e){n.push(o[e])}),o[a]=t.aggregateValues(n,i.getAggFunc(),i,e))}),o},t.prototype.aggregateRowNodeUsingValuesOnly=function(e,t){var o=this,r={},n=t.changedPath.isActive()?t.changedPath.getValueColumnsForNode(e,t.valueColumns):t.valueColumns,i=t.changedPath.isActive()?t.changedPath.getNotValueColumnsForNode(e,t.valueColumns):null,s=this.getValuesNormal(e,n),a=e.aggData;return n.forEach(function(t,n){r[t.getId()]=o.aggregateValues(s[n],t.getAggFunc(),t,e)}),i&&a&&i.forEach(function(e){r[e.getId()]=a[e.getId()]}),r},t.prototype.getValuesPivotNonLeaf=function(e,t){var o=[];return e.childrenAfterFilter.forEach(function(e){o.push(e.aggData[t])}),o},t.prototype.getValuesFromMappedSet=function(e,t,o){var r=this,n=e;if(t.forEach(function(e){return n=n?n[e]:null}),!n)return[];var i=[];return n.forEach(function(e){var t=r.valueService.getValue(o,e);i.push(t)}),i},t.prototype.getValuesNormal=function(e,t){var o=[];t.forEach(function(){return o.push([])});for(var r=t.length,n=this.filteredOnly?e.childrenAfterFilter:e.childrenAfterGroup,i=n.length,s=0;s<i;s++)for(var a=n[s],l=0;l<r;l++){var u=this.valueService.getValue(t[l],a);o[l].push(u)}return o},t.prototype.aggregateValues=function(e,t,o,r){var n="string"==typeof t?this.aggFuncService.getAggFunc(t):t;return"function"!=typeof n?(console.error("AG Grid: unrecognised aggregation function "+t),null):n({values:e,column:o,colDef:o?o.getColDef():void 0,rowNode:r,data:r?r.data:void 0,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()})},Vt([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Vt([(0,i.fsG)("valueService")],t.prototype,"valueService",void 0),Vt([(0,i.fsG)("pivotStage")],t.prototype,"pivotStage",void 0),Vt([(0,i.fsG)("aggFuncService")],t.prototype,"aggFuncService",void 0),Vt([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),Vt([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),t=Vt([(0,i.Vu6)("aggregationStage")],t)}(i.AS9),function(){function e(){this.allSets={},this.allParents=[]}return e.prototype.removeFromChildrenAfterGroup=function(e,t){this.getSet(e).removeFromChildrenAfterGroup[t.id]=!0},e.prototype.removeFromAllLeafChildren=function(e,t){this.getSet(e).removeFromAllLeafChildren[t.id]=!0},e.prototype.getSet=function(e){return this.allSets[e.id]||(this.allSets[e.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(e)),this.allSets[e.id]},e.prototype.getAllParents=function(){return this.allParents},e.prototype.flush=function(){var e=this;this.allParents.forEach(function(t){var o=e.allSets[t.id];t.childrenAfterGroup=t.childrenAfterGroup.filter(function(e){return!o.removeFromChildrenAfterGroup[e.id]}),t.allLeafChildren=t.allLeafChildren.filter(function(e){return!o.removeFromAllLeafChildren[e.id]}),t.updateHasChildren(),t.sibling&&(t.sibling.childrenAfterGroup=t.childrenAfterGroup,t.sibling.allLeafChildren=t.allLeafChildren)}),this.allSets={},this.allParents.length=0},e}()),Wt=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Ht=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Ut=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s},jt=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.groupIdSequence=new i.at1,t}Wt(t,e),t.prototype.postConstruct=function(){this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.usingTreeData&&(this.getDataPath=this.gridOptionsWrapper.getDataPathFunc())},t.prototype.execute=function(e){var t=this.createGroupingDetails(e);t.transactions?this.handleTransaction(t):this.shotgunResetEverything(t,!0===e.afterColumnsChanged),this.positionLeafsAboveGroups(e.changedPath),this.orderGroups(t.rootNode),this.selectableService.updateSelectableAfterGrouping(t.rootNode)},t.prototype.positionLeafsAboveGroups=function(e){this.usingTreeData||e.forEachChangedNodeDepthFirst(function(e){if(e.childrenAfterGroup){var t=[],o=[];e.childrenAfterGroup.forEach(function(e){var r;(null===(r=e.childrenAfterGroup)||void 0===r?void 0:r.length)?o.push(e):t.push(e)}),e.childrenAfterGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ut(arguments[t]));return e}(t,o)}},!1)},t.prototype.createGroupingDetails=function(e){var t=e.rowNode,o=e.changedPath,r=e.rowNodeTransactions,n=e.rowNodeOrder,i=this.usingTreeData?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsWrapper.isSuppressParentsInRowNodes(),expandByDefault:this.gridOptionsWrapper.getGroupDefaultExpanded(),groupedCols:i,rootNode:t,pivotMode:this.columnModel.isPivotMode(),groupedColCount:this.usingTreeData||!i?0:i.length,rowNodeOrder:n,transactions:r,changedPath:o}},t.prototype.handleTransaction=function(e){var t=this;e.transactions.forEach(function(o){var r=t.usingTreeData?void 0:new Bt;if(i._.existsAndNotEmpty(o.remove)&&t.removeNodes(o.remove,e,r),i._.existsAndNotEmpty(o.update)&&t.moveNodesInWrongPath(o.update,e,r),i._.existsAndNotEmpty(o.add)&&t.insertNodes(o.add,e,!1),r){var n=r.getAllParents().slice();r.flush(),t.removeEmptyGroups(n,e)}}),e.rowNodeOrder&&this.sortChildren(e)},t.prototype.sortChildren=function(e){e.changedPath.forEachChangedNodeDepthFirst(function(t){i._.sortRowNodesByOrder(t.childrenAfterGroup,e.rowNodeOrder)})},t.prototype.orderGroups=function(e){if(!this.usingTreeData){var t=this.gridOptionsWrapper.getInitialGroupOrderComparator();i._.exists(t)&&function e(o){i._.exists(o.childrenAfterGroup)&&!o.leafGroup&&(o.childrenAfterGroup.sort(function(e,o){return t({nodeA:e,nodeB:o})}),o.childrenAfterGroup.forEach(function(t){return e(t)}))}(e)}},t.prototype.getExistingPathForNode=function(e,t){for(var o=[],r=this.usingTreeData?e:e.parent;r&&r!==t.rootNode;)o.push({key:r.key,rowGroupColumn:r.rowGroupColumn,field:r.field}),r=r.parent;return o.reverse(),o},t.prototype.moveNodesInWrongPath=function(e,t,o){var r=this;e.forEach(function(e){t.changedPath.isActive()&&t.changedPath.addParentNode(e.parent);var n=function(e){return e.key},s=r.getExistingPathForNode(e,t).map(n),a=r.getGroupInfo(e,t).map(n);i._.areEqual(s,a)||r.moveNode(e,t,o)})},t.prototype.moveNode=function(e,t,o){this.removeNodesInStages([e],t,o),this.insertOneNode(e,t,!0),e.setData(e.data),t.changedPath.isActive()&&t.changedPath.addParentNode(e.parent)},t.prototype.removeNodes=function(e,t,o){this.removeNodesInStages(e,t,o),t.changedPath.isActive()&&e.forEach(function(e){return t.changedPath.addParentNode(e.parent)})},t.prototype.removeNodesInStages=function(e,t,o){if(this.removeNodesFromParents(e,t,o),this.usingTreeData){this.postRemoveCreateFillerNodes(e,t);var r=e.map(function(e){return e.parent});this.removeEmptyGroups(r,t)}},t.prototype.forEachParentGroup=function(e,t,o){for(var r=t;r&&r!==e.rootNode;)o(r),r=r.parent},t.prototype.removeNodesFromParents=function(e,t,o){var r=this,n=null==o,i=o||new Bt;e.forEach(function(e){r.removeFromParent(e,i),r.forEachParentGroup(t,e.parent,function(t){i.removeFromAllLeafChildren(t,e)})}),n&&i.flush()},t.prototype.postRemoveCreateFillerNodes=function(e,t){var o=this;e.forEach(function(e){if(e.hasChildren()){var r=o.getExistingPathForNode(e,t),n=o.findParentForNode(e,r,t);n.expanded=e.expanded,n.allLeafChildren=e.allLeafChildren,n.childrenAfterGroup=e.childrenAfterGroup,n.childrenMapped=e.childrenMapped,n.updateHasChildren(),n.childrenAfterGroup.forEach(function(e){return e.parent=n})}})},t.prototype.removeEmptyGroups=function(e,t){for(var o=this,r=!0,n=function(){r=!1;var n=new Bt;e.forEach(function(e){o.forEachParentGroup(t,e,function(e){(function(e){var t=o.getChildrenMappedKey(e.key,e.rowGroupColumn),r=e.parent;return!!(r&&r.childrenMapped&&r.childrenMapped[t]&&e.isEmptyRowGroupNode())})(e)&&(r=!0,o.removeFromParent(e,n),e.setSelected(!1))})}),n.flush()};r;)n()},t.prototype.removeFromParent=function(e,t){e.parent&&(t?t.removeFromChildrenAfterGroup(e.parent,e):(i._.removeFromArray(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));var o=this.getChildrenMappedKey(e.key,e.rowGroupColumn);e.parent&&e.parent.childrenMapped&&(e.parent.childrenMapped[o]=void 0),e.setRowTop(null),e.setRowIndex(null)},t.prototype.addToParent=function(e,t){var o=this.getChildrenMappedKey(e.key,e.rowGroupColumn);t&&(null!=t.childrenMapped&&(t.childrenMapped[o]=e),t.childrenAfterGroup.push(e),t.updateHasChildren())},t.prototype.areGroupColsEqual=function(e,t){return null!=e&&null!=t&&e.pivotMode===t.pivotMode&&i._.areEqual(e.groupedCols,t.groupedCols)},t.prototype.checkAllGroupDataAfterColsChanged=function(e){var t=this,o=function(e){e&&e.forEach(function(e){!t.usingTreeData&&!e.group||(t.setGroupData(e,{field:e.field,key:e.key,rowGroupColumn:e.rowGroupColumn}),o(e.childrenAfterGroup))})};o(e.rootNode.childrenAfterGroup)},t.prototype.shotgunResetEverything=function(e,t){if(!this.noChangeInGroupingColumns(e,t)){this.selectionService.removeGroupsFromSelection();var o=e.rootNode;o.leafGroup=!this.usingTreeData&&0===e.groupedCols.length,o.childrenAfterGroup=[],o.childrenMapped={},o.updateHasChildren();var r=o.sibling;r&&(r.childrenAfterGroup=o.childrenAfterGroup,r.childrenMapped=o.childrenMapped),this.insertNodes(o.allLeafChildren,e,!1)}},t.prototype.noChangeInGroupingColumns=function(e,t){var o=!1,r=this.columnModel.getGroupDisplayColumns(),n=r?r.map(function(e){return e.getId()}).join("-"):"";return t&&(o=this.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==n&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=n,o},t.prototype.insertNodes=function(e,t,o){var r=this;e.forEach(function(e){r.insertOneNode(e,t,o),t.changedPath.isActive()&&t.changedPath.addParentNode(e.parent)})},t.prototype.insertOneNode=function(e,t,o){var r=this.getGroupInfo(e,t),n=this.findParentForNode(e,r,t);n.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[n.data,e.data]),this.usingTreeData?this.swapGroupWithUserNode(n,e,o):(e.parent=n,e.level=r.length,n.childrenAfterGroup.push(e),n.updateHasChildren())},t.prototype.findParentForNode=function(e,t,o){var r=this,n=o.rootNode;return t.forEach(function(t,i){(n=r.getOrCreateNextNode(n,t,i,o)).allLeafChildren.push(e)}),n},t.prototype.swapGroupWithUserNode=function(e,t,o){t.parent=e.parent,t.key=e.key,t.field=e.field,t.groupData=e.groupData,t.level=e.level,o||(t.expanded=e.expanded),t.leafGroup=e.leafGroup,t.rowGroupIndex=e.rowGroupIndex,t.allLeafChildren=e.allLeafChildren,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenMapped=e.childrenMapped,t.updateHasChildren(),this.removeFromParent(e),t.childrenAfterGroup.forEach(function(e){return e.parent=t}),this.addToParent(t,e.parent)},t.prototype.getOrCreateNextNode=function(e,t,o,r){var n=this.getChildrenMappedKey(t.key,t.rowGroupColumn),i=e.childrenMapped?e.childrenMapped[n]:void 0;return i||(i=this.createGroup(t,e,o,r),this.addToParent(i,e)),i},t.prototype.createGroup=function(e,t,o,r){var n=new i.Fxk(this.beans);return n.group=!0,n.field=e.field,n.rowGroupColumn=e.rowGroupColumn,this.setGroupData(n,e),n.id=i.Fxk.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),n.key=e.key,n.level=o,n.leafGroup=!this.usingTreeData&&o===r.groupedColCount-1,n.allLeafChildren=[],n.setAllChildrenCount(0),n.rowGroupIndex=this.usingTreeData?null:o,n.childrenAfterGroup=[],n.childrenMapped={},n.updateHasChildren(),n.parent=r.includeParents?t:null,this.setExpandedInitialValue(r,n),n},t.prototype.setGroupData=function(e,t){var o=this;e.groupData={},this.columnModel.getGroupDisplayColumns().forEach(function(r){(o.usingTreeData||e.rowGroupColumn&&r.isRowGroupDisplayed(e.rowGroupColumn.getId()))&&(e.groupData[r.getColId()]=t.key)})},t.prototype.getChildrenMappedKey=function(e,t){return t?t.getId()+"-"+e:e},t.prototype.setExpandedInitialValue=function(e,t){if(e.pivotMode&&t.leafGroup)t.expanded=!1;else{var o=this.gridOptionsWrapper.getIsGroupOpenByDefaultFunc();t.expanded=o?1==o({rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn}):-1===e.expandByDefault||t.level<e.expandByDefault}},t.prototype.getGroupInfo=function(e,t){return this.usingTreeData?this.getGroupInfoFromCallback(e):this.getGroupInfoFromGroupColumns(e,t)},t.prototype.getGroupInfoFromCallback=function(e){var t=this.getDataPath?this.getDataPath(e.data):null;return null!=t&&0!==t.length||i._.doOnce(function(){return console.warn("AG Grid: getDataPath() should not return an empty path for data",e.data)},"groupStage.getGroupInfoFromCallback"),t?t.map(function(e){return{key:e,field:null,rowGroupColumn:null}}):[]},t.prototype.getGroupInfoFromGroupColumns=function(e,t){var o=this,r=[];return t.groupedCols.forEach(function(n){var i=o.valueService.getKeyForNode(n,e),s=null!=i;if(t.pivotMode&&!s&&(i=" ",s=!0),s){var a={key:i,field:n.getColDef().field,rowGroupColumn:n};r.push(a)}}),r},Ht([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Ht([(0,i.fsG)("selectableService")],t.prototype,"selectableService",void 0),Ht([(0,i.fsG)("valueService")],t.prototype,"valueService",void 0),Ht([(0,i.fsG)("beans")],t.prototype,"beans",void 0),Ht([(0,i.fsG)("selectionService")],t.prototype,"selectionService",void 0),Ht([i.NqP],t.prototype,"postConstruct",null),t=Ht([(0,i.Vu6)("groupStage")],t)}(i.AS9),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),zt=function(){return(zt=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},qt=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Zt=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s},Kt=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zt(arguments[t]));return e},Jt=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;jt(t,e),o=t,t.prototype.createPivotColumnDefs=function(e){var t=this.columnModel.getPivotColumns(),o=this.columnModel.getValueColumns(),r=this.recursiveBuildGroup(0,e,[],t.length,t),n=function e(t,o){return void 0===o&&(o=[]),t.forEach(function(t){void 0!==t.children?e(t.children,o):o.push(t)}),o}(r);return this.addRowGroupTotals(r,n,o),this.addExpandablePivotGroups(r,n),this.addPivotTotalsToGroups(r,n),{pivotColumnGroupDefs:r,pivotColumnDefs:n.map(function(e){return i._.cloneObject(e)})}},t.prototype.recursiveBuildGroup=function(e,t,o,r,n){var s=this,a=this.columnModel.getValueColumns();if(e>=r)return this.buildMeasureCols(o);var l=n[e].getColDef(),u=this.headerNameComparator.bind(this,l.pivotComparator);if(1===a.length&&this.gridOptionsWrapper.isRemovePivotHeaderRowWhenSingleValueColumn()&&e===r-1){var p=[];return i._.iterateObject(t,function(e){var t=Kt(o,[e]);p.push(zt(zt({},s.createColDef(a[0],e,t)),{columnGroupShow:"open"}))}),p.sort(u),p}var c=[];return i._.iterateObject(t,function(t,i){var a=Kt(o,[t]);c.push({children:s.recursiveBuildGroup(e+1,i,a,r,n),headerName:t,pivotKeys:a,columnGroupShow:"open",groupId:s.generateColumnGroupId(a)})}),c.sort(u),c},t.prototype.buildMeasureCols=function(e){var t=this,o=this.columnModel.getValueColumns();return 0===o.length?[this.createColDef(null,"-",e)]:o.map(function(o){var r=t.columnModel.getDisplayNameForColumn(o,"header");return zt(zt({},t.createColDef(o,r,e)),{columnGroupShow:"open"})})},t.prototype.addExpandablePivotGroups=function(e,t){var o=this;if(!this.gridOptionsWrapper.isSuppressExpandablePivotGroups()&&!this.gridOptionsWrapper.getPivotColumnGroupTotals()){var r=function(e,t,n){var i=e;if(i.children){var s=new Map;i.children.forEach(function(e){r(e,t,s)});var a=!i.children.some(function(e){return e.children});o.columnModel.getValueColumns().forEach(function(r){var n=o.columnModel.getDisplayNameForColumn(r,"header"),i=o.createColDef(r,n,e.pivotKeys);i.pivotTotalColumnIds=s.get(r.getColId()),i.columnGroupShow="closed",i.aggFunc=r.getAggFunc(),a||(e.children.push(i),t.push(i))}),o.merge(n,s)}else{var l=e;if(!l.pivotValueColumn)return;var u=l.pivotValueColumn.getColId(),p=n.has(u)?n.get(u):[];p.push(l.colId),n.set(u,p)}};e.forEach(function(e){r(e,t,new Map)})}},t.prototype.addPivotTotalsToGroups=function(e,t){var o=this;if(this.gridOptionsWrapper.getPivotColumnGroupTotals()){var r="after"===this.gridOptionsWrapper.getPivotColumnGroupTotals(),n=this.columnModel.getValueColumns(),i=n.map(function(e){return e.getAggFunc()});if(i&&!(i.length<1)&&this.sameAggFuncs(i)){var s=n[0];e.forEach(function(e){o.recursivelyAddPivotTotal(e,t,s,r)})}}},t.prototype.recursivelyAddPivotTotal=function(e,t,o,r){var n=this,i=e;if(!i.children)return e.colId?[e.colId]:null;var s=[];if(i.children.forEach(function(e){var i=n.recursivelyAddPivotTotal(e,t,o,r);i&&(s=s.concat(i))}),i.children.length>1){var a=this.gridOptionsWrapper.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),l=this.createColDef(o,a,e.pivotKeys,!0);l.pivotTotalColumnIds=s,l.aggFunc=o.getAggFunc();var u=e.children;r?u.push(l):u.unshift(l),t.push(l)}return s},t.prototype.addRowGroupTotals=function(e,t,o){var r=this;if(this.gridOptionsWrapper.getPivotRowTotals())for(var n="after"===this.gridOptionsWrapper.getPivotRowTotals(),i=n?o.slice():o.slice().reverse(),s=function(o){var s=i[o],l=[];e.forEach(function(e){l=l.concat(r.extractColIdsForValueColumn(e,s))}),a.createRowGroupTotal(e,t,s,l,n)},a=this,l=0;l<i.length;l++)s(l)},t.prototype.extractColIdsForValueColumn=function(e,t){var o=this;if(!e.children)return e.pivotValueColumn===t&&e.colId?[e.colId]:[];var r=[];return e.children.forEach(function(e){o.extractColIdsForValueColumn(e,t);var n=o.extractColIdsForValueColumn(e,t);r=r.concat(n)}),r},t.prototype.createRowGroupTotal=function(e,t,r,n,i){var s;if(0===this.columnModel.getValueColumns().length)s=this.createColDef(null,"-",[]);else{var a=this.columnModel.getDisplayNameForColumn(r,"header");(s=this.createColDef(r,a,[])).pivotTotalColumnIds=n}s.colId=o.PIVOT_ROW_TOTAL_PREFIX+s.colId,t.push(s),i?e.push(s):e.unshift(s)},t.prototype.createColDef=function(e,t,o,r){void 0===r&&(r=!1);var n={};if(e){var i=e.getColDef();Object.assign(n,i),n.hide=!1}return n.headerName=t,n.colId=this.generateColumnId(o||[],e&&!r?e.getColId():""),n.field=n.colId,n.pivotKeys=o,n.pivotValueColumn=e,!0===n.filter&&(n.filter="agNumberColumnFilter"),n},t.prototype.sameAggFuncs=function(e){if(1==e.length)return!0;for(var t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0},t.prototype.headerNameComparator=function(e,t,o){return e?e(t.headerName,o.headerName):t.headerName&&!o.headerName?1:!t.headerName&&o.headerName?-1:t.headerName&&o.headerName?t.headerName<o.headerName?-1:t.headerName>o.headerName?1:0:0},t.prototype.merge=function(e,t){t.forEach(function(t,o,r){var n=e.has(o)?e.get(o):[],i=Kt(n,t);e.set(o,i)})},t.prototype.generateColumnGroupId=function(e){return"pivotGroup_"+this.columnModel.getPivotColumns().map(function(e){return e.getColId()}).join("-")+"_"+e.join("-")},t.prototype.generateColumnId=function(e,t){return"pivot_"+this.columnModel.getPivotColumns().map(function(e){return e.getColId()}).join("-")+"_"+e.join("-")+"_"+t},t.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",qt([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),t=o=qt([(0,i.Vu6)("pivotColDefService")],t)}(i.AS9),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),Xt=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Yt=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uniqueValues={},t}Jt(t,e),t.prototype.execute=function(e){var t=e.rowNode,o=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(t,o):this.executePivotOff(o)},t.prototype.executePivotOff=function(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())},t.prototype.executePivotOn=function(e,t){var o=this.bucketUpRowNodes(e),r=this.setUniqueValues(o),n=this.columnModel.getValueColumns(),i=n.map(function(e){return e.getId()+"-"+e.getColDef().headerName}).join("#"),s=n.map(function(e){return e.getAggFunc().toString()}).join("#"),a=this.aggregationColumnsHashLastTime!==i,l=this.aggregationFuncsHashLastTime!==s;if(this.aggregationColumnsHashLastTime=i,this.aggregationFuncsHashLastTime=s,r||a||l){var u=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),p=u.pivotColumnGroupDefs;this.pivotColumnDefs=u.pivotColumnDefs,this.columnModel.setSecondaryColumns(p,"rowModelUpdated"),t&&t.setInactive()}},t.prototype.setUniqueValues=function(e){return!(JSON.stringify(e)===JSON.stringify(this.uniqueValues)||(this.uniqueValues=e,0))},t.prototype.bucketUpRowNodes=function(e){var t=this,o={},r=function(e){e.leafGroup?t.bucketRowNode(e,o):e.childrenAfterFilter.forEach(function(e){r(e)})};return r(e),o},t.prototype.bucketRowNode=function(e,t){var o=this.columnModel.getPivotColumns();e.childrenMapped=0===o.length?null:this.bucketChildren(e.childrenAfterFilter,o,0,t),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)},t.prototype.bucketChildren=function(e,t,o,r){var n=this,s={},a=t[o];if(e.forEach(function(e){var t=n.valueService.getKeyForNode(a,e);i._.missing(t)&&(t=""),r[t]||(r[t]={}),s[t]||(s[t]=[]),s[t].push(e)}),o===t.length-1)return s;var l={};return i._.iterateObject(s,function(e,i){l[e]=n.bucketChildren(i,t,o+1,r[e])}),l},t.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},Xt([(0,i.fsG)("valueService")],t.prototype,"valueService",void 0),Xt([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Xt([(0,i.fsG)("pivotColDefService")],t.prototype,"pivotColDefService",void 0),t=Xt([(0,i.Vu6)("pivotStage")],t)}(i.AS9),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),Qt=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},$t="undefined"==typeof BigInt?null:BigInt;function eo(e){for(var t=e.values,o=null,r=0;r<t.length;r++){var n=t[r];"number"==typeof n?null===o?o=n:o+=$t?"number"==typeof o?n:$t(n):n:"bigint"==typeof n&&(o=null===o?n:("bigint"==typeof o?o:$t(o))+n)}return o}function to(e){return e.values.length>0?e.values[0]:null}function oo(e){return e.values.length>0?i._.last(e.values):null}function ro(e){for(var t=e.values,o=null,r=0;r<t.length;r++){var n=t[r];"number"!=typeof n&&"bigint"!=typeof n||!(null===o||o>n)||(o=n)}return o}function no(e){for(var t=e.values,o=null,r=0;r<t.length;r++){var n=t[r];"number"!=typeof n&&"bigint"!=typeof n||!(null===o||o<n)||(o=n)}return o}function io(e){for(var t=e.values,o=0,r=0;r<t.length;r++){var n=t[r];o+=null!=n&&"number"==typeof n.value?n.value:1}return{value:o,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function so(e){for(var t=e.values,o=0,r=0,n=0;n<t.length;n++){var i=t[n],s=null;"number"==typeof i||"bigint"==typeof i?(s=i,r++):null==i||"number"!=typeof i.value&&"bigint"!=typeof i.value||"number"!=typeof i.count||(s=$t?i.value*("number"==typeof i.value?i.count:$t(i.count)):i.value*i.count,r+=i.count),"number"==typeof s?o+=$t?"number"==typeof o?s:$t(s):s:"bigint"==typeof s&&(o=("bigint"==typeof o?o:$t(o))+s)}var a=null;return r>0&&(a=$t?o/("number"==typeof o?r:$t(r)):o/r),{count:r,value:a,toString:function(){return"number"==typeof this.value||"bigint"==typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aggFuncsMap={},t.initialised=!1,t}var o;Yt(t,e),o=t,t.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsWrapper.getAggFuncs()))},t.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[o.AGG_SUM]=eo,this.aggFuncsMap[o.AGG_FIRST]=to,this.aggFuncsMap[o.AGG_LAST]=oo,this.aggFuncsMap[o.AGG_MIN]=ro,this.aggFuncsMap[o.AGG_MAX]=no,this.aggFuncsMap[o.AGG_COUNT]=io,this.aggFuncsMap[o.AGG_AVG]=so,this.initialised=!0},t.prototype.isAggFuncPossible=function(e,t){var o=this.getFuncNames(e),r=i._.includes(o,t),n=i._.exists(this.aggFuncsMap[t]);return r&&n},t.prototype.getDefaultAggFunc=function(e){var t=e.getColDef().defaultAggFunc;if(i._.exists(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,o.AGG_SUM))return o.AGG_SUM;var r=this.getFuncNames(e);return i._.existsAndNotEmpty(r)?r[0]:null},t.prototype.addAggFuncs=function(e){i._.iterateObject(e,this.addAggFunc.bind(this))},t.prototype.addAggFunc=function(e,t){this.init(),this.aggFuncsMap[e]=t},t.prototype.getAggFunc=function(e){return this.init(),this.aggFuncsMap[e]},t.prototype.getFuncNames=function(e){var t=e.getColDef().allowedAggFuncs;return null==t?Object.keys(this.aggFuncsMap).sort():t},t.prototype.clear=function(){this.aggFuncsMap={}},t.AGG_SUM="sum",t.AGG_FIRST="first",t.AGG_LAST="last",t.AGG_MIN="min",t.AGG_MAX="max",t.AGG_COUNT="count",t.AGG_AVG="avg",Qt([i.NqP],t.prototype,"init",null),t=o=Qt([(0,i.Vu6)("aggFuncService")],t)}(i.AS9);var ao=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),lo=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},uo=function(e){function t(t,o,r,n,i){var s=e.call(this)||this;return s.column=t,s.dragSourceDropTarget=o,s.ghost=r,s.dropZonePurpose=n,s.horizontal=i,s.popupShowing=!1,s}return ao(t,e),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE);var o=this.getGui(),r=this.gridOptionsWrapper.isFunctionsReadOnly();this.addElementClasses(o),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(i._.createIconNoSpan("columnDrag",this.gridOptionsWrapper)),this.eButton.appendChild(i._.createIconNoSpan("cancel",this.gridOptionsWrapper)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),this.ghost||r||this.addDragSource(),this.setupAria(),this.addManagedListener(this.column,i.sgG.EVENT_SORT_CHANGED,function(){e.setupAria()}),this.setupTooltip()},t.prototype.setupAria=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=this.getColumnAndAggFuncName(),o=t.name,r=t.aggFuncName,n=e("ariaDropZoneColumnComponentAggFuncSeperator"," of "),s={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},a=this.column.getSort(),l=[[r&&""+r+n,o,this.isGroupingZone()&&a&&", "+s[a]].filter(function(e){return!!e}).join("")],u=this.gridOptionsWrapper.isFunctionsReadOnly();if(this.isAggregationZone()&&!u){var p=e("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");l.push(p)}if(this.isGroupingZone()&&this.column.getColDef().sortable){var c=e("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");l.push(c)}var d=e("ariaDropZoneColumnComponentDescription","Press DELETE to remove");l.push(d),i._.setAriaLabel(this.getGui(),l.join(". "))},t.prototype.setupTooltip=function(){var e=this,t=function(){var t=e.column.getColDef().headerTooltip;e.setTooltip(t)};t(),this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,t)},t.prototype.setupSort=function(){var e=this,t=this.column.getColDef().sortable,o=this.isGroupingZone();if(t&&o){this.eSortIndicator.setupSort(this.column,!0);var r=function(t){t.preventDefault();var o=e.gridOptionsWrapper.isMultiSortKeyCtrl();e.sortController.progressSort(e.column,o?t.ctrlKey||t.metaKey:t.shiftKey,"uiColumnSorted")};this.addGuiEventListener("click",r),this.addGuiEventListener("keydown",function(t){t.key===i.VDZ.ENTER&&e.isGroupingZone()&&r(t)})}},t.prototype.addDragSource=function(){var e=this,t={type:i.rvo.ToolPanel,eElement:this.eDragHandle,defaultIconName:i.jUB.ICON_HIDE,getDragItem:function(){return e.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(t)})},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsWrapper.isFunctionsReadOnly()&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},t.prototype.setupRemove=function(){var e=this;i._.setDisplayed(this.eButton,!this.gridOptionsWrapper.isFunctionsReadOnly());var o={type:t.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",function(t){var r=t.key===i.VDZ.ENTER;t.key===i.VDZ.DELETE&&(t.preventDefault(),e.dispatchEvent(o)),r&&e.isAggregationZone()&&!e.gridOptionsWrapper.isFunctionsReadOnly()&&(t.preventDefault(),e.onShowAggFuncSelection())}),this.addManagedListener(this.eButton,"click",function(t){e.dispatchEvent(o),t.stopPropagation()});var r=new i.rwP(this.eButton);this.addManagedListener(r,i.rwP.EVENT_TAP,function(){e.dispatchEvent(o)}),this.addDestroyFunc(r.destroy.bind(r))},t.prototype.getColumnAndAggFuncName=function(){var e=this.displayName,t="";if(this.isAggregationZone()){var o=this.column.getAggFunc(),r="string"==typeof o?o:"agg";t=this.gridOptionsWrapper.getLocaleTextFunc()(r,r)}return{name:e,aggFuncName:t}},t.prototype.setTextValue=function(){var e=this.getColumnAndAggFuncName(),t=e.name,o=e.aggFuncName,r=this.isAggregationZone()?o+"("+t+")":t,n=i._.escapeString(r);this.eText.innerHTML=n},t.prototype.onShowAggFuncSelection=function(){var e=this;if(!this.popupShowing){this.popupShowing=!0;var t=new i.CPJ("select-agg-func"),o=this.aggFuncService.getFuncNames(this.column),r=this.getGui(),n=t.getGui();t.setModel({getRow:function(e){return o[e]},getRowCount:function(){return o.length}}),this.getContext().createBean(t);var s=i._.loadTemplate('<div class="ag-select-agg-func-popup"></div>');s.style.top="0px",s.style.left="0px",s.appendChild(n),s.style.width=r.clientWidth+"px";var a=this.gridOptionsWrapper.getLocaleTextFunc(),l=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:function(){e.destroyBean(t),e.popupShowing=!1,r.focus()},ariaLabel:a("ariaLabelAggregationFunction","Aggregation Function")});l&&t.setComponentCreator(this.createAggSelect.bind(this,l.hideFunc)),t.addGuiEventListener("keydown",function(e){if(e.key===i.VDZ.ENTER||e.key===i.VDZ.SPACE){var o=t.getLastFocusedRow();if(null==o)return;var r=t.getComponentAt(o);r&&r.selectItem()}}),this.popupService.positionPopupUnderComponent({type:"aggFuncSelect",eventSource:r,ePopup:s,keepWithinBounds:!0,column:this.column}),t.refresh();var u=o.findIndex(function(t){return t===e.column.getAggFunc()});-1===u&&(u=0),t.focusRow(u)}},t.prototype.createAggSelect=function(e,t){var o=this,r=this.gridOptionsWrapper.getLocaleTextFunc(),n=t.toString(),s=r(n,n);return new po(function(){e(),o.gridOptionsWrapper.isFunctionsPassive()?o.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[o.column],aggFunc:t,api:o.gridApi,columnApi:o.columnApi}):o.columnModel.setColumnAggFunc(o.column,t,"toolPanelDragAndDrop")},s)},t.prototype.addElementClasses=function(e,t){e.classList.add("ag-column-drop-cell"+(t=t?"-"+t:""),"ag-column-drop-"+(this.horizontal?"horizontal":"vertical")+"-cell"+t)},t.prototype.isAggregationZone=function(){return"aggregation"===this.dropZonePurpose},t.prototype.isGroupingZone=function(){return"rowGroup"===this.dropZonePurpose},t.EVENT_COLUMN_REMOVE="columnRemove",t.TEMPLATE='<span role="option" tabindex="0">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',lo([(0,i.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),lo([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),lo([(0,i.fsG)("popupService")],t.prototype,"popupService",void 0),lo([(0,i.FiY)("aggFuncService")],t.prototype,"aggFuncService",void 0),lo([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),lo([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),lo([(0,i.fsG)("sortController")],t.prototype,"sortController",void 0),lo([(0,i.cqo)("eText")],t.prototype,"eText",void 0),lo([(0,i.cqo)("eDragHandle")],t.prototype,"eDragHandle",void 0),lo([(0,i.cqo)("eButton")],t.prototype,"eButton",void 0),lo([(0,i.cqo)("eSortIndicator")],t.prototype,"eSortIndicator",void 0),lo([i.NqP],t.prototype,"init",null),t}(i.wA2),po=function(e){function t(t,o){var r=e.call(this,'<div class="ag-select-agg-func-item"/>')||this;return r.selectItem=t,r.getGui().innerText=o,r.addGuiEventListener("click",r.selectItem),r}return ao(t,e),t}(i.wA2),co=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ho=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},fo=function(e){function t(o,r){var n=e.call(this,'<div class="ag-unselectable" role="presentation"></div>')||this;return n.horizontal=o,n.dropZonePurpose=r,n.state=t.STATE_NOT_DRAGGING,n.guiDestroyFunctions=[],n.childColumnComponents=[],n.resizeEnabled=!1,n.addElementClasses(n.getGui()),n.eColumnDropList=document.createElement("div"),n.addElementClasses(n.eColumnDropList,"list"),i._.setAriaRole(n.eColumnDropList,"listbox"),n}return co(t,e),t.prototype.isHorizontal=function(){return this.horizontal},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e},t.prototype.setBeans=function(e){this.beans=e},t.prototype.destroy=function(){this.destroyGui(),e.prototype.destroy.call(this)},t.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach(function(e){return e()}),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,i._.clearElement(this.getGui()),i._.clearElement(this.eColumnDropList)},t.prototype.init=function(e){this.params=e,this.createManagedBean(new i.D_6(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new i.Gxm(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),i._.setAriaLabel(this.eColumnDropList,this.getAriaLabel())},t.prototype.handleKeyDown=function(e){var t=e.key===i.VDZ.DOWN,o=e.key===i.VDZ.UP;if(this.horizontal){var r=this.gridOptionsWrapper.isEnableRtl();t=!r&&e.key===i.VDZ.RIGHT||r&&e.key===i.VDZ.LEFT,o=!r&&e.key===i.VDZ.LEFT||r&&e.key===i.VDZ.RIGHT}if(t||o){var n=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,o);n&&(e.preventDefault(),n.focus())}},t.prototype.addElementClasses=function(e,t){e.classList.add("ag-column-drop"+(t=t?"-"+t:""),"ag-column-drop-"+(this.horizontal?"horizontal":"vertical")+t)},t.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},t.prototype.isInterestedIn=function(e){return e===i.rvo.HeaderCell||e===i.rvo.ToolPanel},t.prototype.checkInsertIndex=function(e){var t=this.horizontal?this.getNewHorizontalInsertIndex(e):this.getNewVerticalInsertIndex(e);if(t<0)return!1;var o=t!==this.insertIndex;return o&&(this.insertIndex=t),o},t.prototype.getNewHorizontalInsertIndex=function(e){if(i._.missing(e.hDirection))return-1;var t=0,o=e.event,r=this.beans.gridOptionsWrapper.isEnableRtl(),n=e.hDirection===i.poj.Left,s=o.clientX;return this.childColumnComponents.forEach(function(e){var o=e.getGui().getBoundingClientRect(),i=n?o.right:o.left;(r?s<=i:s>=i)&&t++}),t},t.prototype.getNewVerticalInsertIndex=function(e){if(i._.missing(e.vDirection))return-1;var t=0,o=e.event;return this.childColumnComponents.forEach(function(r){var n=r.getGui().getBoundingClientRect();o.clientY>=(e.vDirection===i.HO_.Down?n.top:n.bottom)&&t++}),t},t.prototype.checkDragStartedBySelf=function(e){this.state===t.STATE_NOT_DRAGGING&&(this.state=t.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=e.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())},t.prototype.onDragging=function(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()},t.prototype.onDragEnter=function(e){var o=e.dragSource.getDragItem().columns||[];this.state=t.STATE_NEW_COLUMNS_IN;var r=o.filter(this.isColumnDroppable.bind(this));if(r.length>0){if(this.isRowGroupPanel()&&!this.gridOptionsWrapper.isSuppressRowGroupHidesColumns()&&!e.fromNudge){var n=e.dragSource.getDragItem();this.setColumnsVisible(n.columns,!1,"uiColumnDragged")}this.potentialDndColumns=r,this.checkInsertIndex(e),this.refreshGui()}},t.prototype.setColumnsVisible=function(e,t,o){if(void 0===o&&(o="api"),e){var r=e.filter(function(e){return!e.getColDef().lockVisible});this.colModel.setColumnsVisible(r,t,o)}},t.prototype.isPotentialDndColumns=function(){return i._.existsAndNotEmpty(this.potentialDndColumns)},t.prototype.isRowGroupPanel=function(){return"rowGroup"===this.dropZonePurpose},t.prototype.onDragLeave=function(e){if(this.state===t.STATE_REARRANGE_COLUMNS){var o=e.dragSource.getDragItem().columns||[];this.removeColumns(o)}if(this.isPotentialDndColumns()){if(this.isRowGroupPanel()&&!this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()&&!e.fromNudge){var r=e.dragSource.getDragItem(),n=this.potentialDndColumns.filter(function(e){var t,o;return null!=(o=null===(t=r.visibleState)||void 0===t?void 0:t[e.getId()])&&o}),i=this.potentialDndColumns.filter(function(e){var t,o;return!(null!=(o=null===(t=r.visibleState)||void 0===t?void 0:t[e.getId()])&&o)});this.setColumnsVisible(n,!1,"uiColumnDragged"),this.setColumnsVisible(i,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var e=!1;this.state===t.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),e=!0):e=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],this.beans.gridOptionsWrapper.isFunctionsPassive()&&e||this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.removeColumns=function(e){var t=this.getExistingColumns().filter(function(t){return!i._.includes(e,t)});this.updateColumns(t)},t.prototype.addColumns=function(e){if(e){var t=this.getExistingColumns().slice(),o=e.filter(function(e){return t.indexOf(e)<0});i._.insertArrayIntoArray(t,o,this.insertIndex),this.updateColumns(t)}},t.prototype.rearrangeColumns=function(e){var t=this.getNonGhostColumns().slice();return i._.insertArrayIntoArray(t,e,this.insertIndex),!i._.areEqual(t,this.getExistingColumns())&&(this.updateColumns(t),!0)},t.prototype.refreshGui=function(){var e=this.eColumnDropList.scrollTop,t=this.resizeEnabled,o=this.getFocusedItem(),r=this.focusService.findNextFocusableElement();r||(r=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=e),t&&this.toggleResizable(t),this.restoreFocus(o,r)},t.prototype.getFocusedItem=function(){var e=this.getGui(),t=this.gridOptionsWrapper.getDocument().activeElement;return e.contains(t)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t):-1},t.prototype.restoreFocus=function(e,t){var o=this.getGui(),r=Array.from(o.querySelectorAll(".ag-column-drop-cell"));if(-1!==e){0===r.length&&t.focus();var n=r[Math.min(r.length-1,e)];n&&n.focus()}},t.prototype.getNonGhostColumns=function(){var e=this,t=this.getExistingColumns();return this.isPotentialDndColumns()?t.filter(function(t){return!i._.includes(e.potentialDndColumns,t)}):t},t.prototype.addColumnsToGui=function(){var e=this,t=this.getNonGhostColumns(),o=this.isPotentialDndColumns(),r=[];t.forEach(function(t,n){if(!(o&&n>=e.insertIndex)){var i=e.createColumnComponent(t,!1);r.push(i)}}),this.isPotentialDndColumns()&&(this.potentialDndColumns.forEach(function(t){var o=e.createColumnComponent(t,!0);r.push(o)}),t.forEach(function(t,o){if(!(o<e.insertIndex)){var n=e.createColumnComponent(t,!1);r.push(n)}})),this.appendChild(this.eColumnDropList),r.forEach(function(t,o){o>0&&e.addArrow(e.eColumnDropList),e.eColumnDropList.appendChild(t.getGui())}),this.addAriaLabelsToComponents()},t.prototype.addAriaLabelsToComponents=function(){var e=this;this.childColumnComponents.forEach(function(t,o){var r=t.getGui();i._.setAriaPosInSet(r,o+1),i._.setAriaSetSize(r,e.childColumnComponents.length)})},t.prototype.createColumnComponent=function(e,t){var o=this,r=new uo(e,this.dropTarget,t,this.dropZonePurpose,this.horizontal);return r.addEventListener(uo.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[e])),this.beans.context.createBean(r),this.guiDestroyFunctions.push(function(){return o.destroyBean(r)}),t||this.childColumnComponents.push(r),r},t.prototype.addIconAndTitleToGui=function(){var e=this.params.icon,t=document.createElement("div");if(t.setAttribute("aria-hidden","true"),this.addElementClasses(t,"title-bar"),this.addElementClasses(e,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),t.appendChild(e),!this.horizontal){var o=document.createElement("span");this.addElementClasses(o,"title"),o.innerHTML=this.params.title,t.appendChild(o)}this.appendChild(t)},t.prototype.isExistingColumnsEmpty=function(){return 0===this.getExistingColumns().length},t.prototype.addEmptyMessageToGui=function(){if(this.isExistingColumnsEmpty()&&!this.isPotentialDndColumns()){var e=document.createElement("span");e.innerHTML=this.params.emptyMessage,this.addElementClasses(e,"empty-message"),this.eColumnDropList.appendChild(e)}},t.prototype.addArrow=function(e){if(this.horizontal){var t=this.beans.gridOptionsWrapper.isEnableRtl(),o=i._.createIconNoSpan(t?"smallLeft":"smallRight",this.beans.gridOptionsWrapper);this.addElementClasses(o,"cell-separator"),e.appendChild(o)}},t.STATE_NOT_DRAGGING="notDragging",t.STATE_NEW_COLUMNS_IN="newColumnsIn",t.STATE_REARRANGE_COLUMNS="rearrangeColumns",ho([(0,i.fsG)("columnModel")],t.prototype,"colModel",void 0),ho([(0,i.fsG)("focusService")],t.prototype,"focusService",void 0),t}(i.wA2),go=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),mo=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},vo=function(e){function t(t){return e.call(this,t,"rowGroup")||this}return go(t,e),t.prototype.passBeansUp=function(){e.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var t=this.gridOptionsWrapper.getLocaleTextFunc(),o=t("rowGroupColumnsEmptyMessage","Drag here to set row groups"),r=t("groups","Row Groups");e.prototype.init.call(this,{dragAndDropIcon:i.jUB.ICON_GROUP,icon:i._.createIconNoSpan("rowGroupPanel",this.gridOptionsWrapper,null),emptyMessage:o,title:r}),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){return this.gridOptionsWrapper.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="rowGroupColumnsList",t},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary())&&e.isAllowRowGroup()&&!e.isRowGroupActive()},t.prototype.updateColumns=function(e){this.gridOptionsWrapper.isFunctionsPassive()?this.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e,api:this.gridApi,columnApi:this.columnApi}):this.columnModel.setRowGroupColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?i.jUB.ICON_GROUP:i.jUB.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},mo([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),mo([(0,i.fsG)("loggerFactory")],t.prototype,"loggerFactory",void 0),mo([(0,i.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),mo([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),mo([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),mo([i.NqP],t.prototype,"passBeansUp",null),t}(fo),yo=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Co=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},wo=function(e){function t(t){return e.call(this,t,"pivot")||this}return yo(t,e),t.prototype.passBeansUp=function(){e.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var t=this.gridOptionsWrapper.getLocaleTextFunc(),o=t("pivotColumnsEmptyMessage","Drag here to set column labels"),r=t("pivots","Column Labels");e.prototype.init.call(this,{dragAndDropIcon:i.jUB.ICON_GROUP,icon:i._.createIconNoSpan("pivotPanel",this.gridOptionsWrapper,null),emptyMessage:o,title:r}),this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},t.prototype.getAriaLabel=function(){return this.gridOptionsWrapper.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="pivotColumnsList",t},t.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},t.prototype.checkVisibility=function(){var e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsWrapper.getPivotPanelShow()){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":var t=this.columnModel.isPivotActive();this.setDisplayed(e&&t);break;default:this.setDisplayed(!1)}else this.setDisplayed(e)},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary())&&e.isAllowPivot()&&!e.isPivotActive()},t.prototype.updateColumns=function(e){this.gridOptionsWrapper.isFunctionsPassive()?this.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e,api:this.gridApi,columnApi:this.columnApi}):this.columnModel.setPivotColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?i.jUB.ICON_PIVOT:i.jUB.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},Co([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Co([(0,i.fsG)("loggerFactory")],t.prototype,"loggerFactory",void 0),Co([(0,i.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Co([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),Co([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),Co([i.NqP],t.prototype,"passBeansUp",null),t}(fo),So=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Eo=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Ao=(function(e){function t(){return e.call(this)||this}So(t,e),t.prototype.postConstruct=function(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()},t.prototype.createNorthPanel=function(){var e=document.createElement("div"),t=this.onDropPanelVisible.bind(this);return e.classList.add("ag-column-drop-wrapper"),i._.setAriaRole(e,"presentation"),this.rowGroupComp=new vo(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new wo(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,i.wA2.EVENT_DISPLAYED_CHANGED,t),this.addManagedListener(this.pivotComp,i.wA2.EVENT_DISPLAYED_CHANGED,t),this.onDropPanelVisible(),e},t.prototype.onDropPanelVisible=function(){var e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)},t.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var e=this.gridOptionsWrapper.getRowGroupPanelShow();if(e===i.gTE.ALWAYS)this.rowGroupComp.setDisplayed(!0);else if(e===i.gTE.ONLY_WHEN_GROUPING){var t=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(t)}else this.rowGroupComp.setDisplayed(!1)}},Eo([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Eo([i.NqP],t.prototype,"postConstruct",null)}(i.wA2),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),bo=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Ro=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Ao(t,e),t.prototype.execute=function(e){var t=this,o=this.columnModel.isPivotMode(),r=this.filterManager.isAggregateFilterPresent(),n=this.gridOptionsWrapper.getGroupAggFiltering()||(o?function(e){return e.node.leafGroup}:function(e){return!e.node.group}),i=function(e,o){void 0===o&&(o=!1),e.childrenAfterFilter&&(e.childrenAfterAggFilter=e.childrenAfterFilter,o&&e.childrenAfterAggFilter.forEach(function(e){return i(e,o)}),t.setAllChildrenCount(e)),e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)};e.changedPath.forEachChangedNodeDepthFirst(r?function(e){var o;e.childrenAfterAggFilter=(null===(o=e.childrenAfterFilter)||void 0===o?void 0:o.filter(function(e){var o;return n({node:e})&&t.filterManager.doesRowPassAggregateFilters({rowNode:e})?(i(e,!0),!0):null===(o=e.childrenAfterAggFilter)||void 0===o?void 0:o.length}))||null,t.setAllChildrenCount(e),e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)}:i,!0)},t.prototype.setAllChildrenCountTreeData=function(e){var t=0;e.childrenAfterAggFilter.forEach(function(e){t++,t+=e.allChildrenCount}),e.setAllChildrenCount(t)},t.prototype.setAllChildrenCountGridGrouping=function(e){var t=0;e.childrenAfterAggFilter.forEach(function(e){e.group?t+=e.allChildrenCount:t++}),e.setAllChildrenCount(t)},t.prototype.setAllChildrenCount=function(e){e.hasChildren()?this.gridOptionsWrapper.isTreeData()?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e):e.setAllChildrenCount(null)},bo([(0,i.fsG)("filterManager")],t.prototype,"filterManager",void 0),bo([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),t=bo([(0,i.Vu6)("filterAggregatesStage")],t)}(i.AS9),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),Do=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Oo=function(e){function t(t){return e.call(this,t,"aggregation")||this}return Ro(t,e),t.prototype.passBeansUp=function(){e.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var t=this.gridOptionsWrapper.getLocaleTextFunc(),o=t("valueColumnsEmptyMessage","Drag here to aggregate"),r=t("values","Values");e.prototype.init.call(this,{dragAndDropIcon:i.jUB.ICON_AGGREGATE,icon:i._.createIconNoSpan("valuePanel",this.gridOptionsWrapper,null),emptyMessage:o,title:r}),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){return this.gridOptionsWrapper.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="valueColumnsList",t},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?i.jUB.ICON_AGGREGATE:i.jUB.ICON_NOT_ALLOWED},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary())&&e.isAllowValue()&&!e.isValueActive()},t.prototype.updateColumns=function(e){this.gridOptionsWrapper.isFunctionsPassive()?this.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e,api:this.gridApi,columnApi:this.columnApi}):this.columnModel.setValueColumns(e,"toolPanelUi")},t.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},Do([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Do([(0,i.fsG)("loggerFactory")],t.prototype,"loggerFactory",void 0),Do([(0,i.fsG)("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Do([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),Do([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),Do([i.NqP],t.prototype,"passBeansUp",null),t}(fo),Mo=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Po=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},xo=function(e){function t(){return e.call(this,t.TEMPLATE)||this}return Mo(t,e),t.prototype.postConstruct=function(){this.initialiseTabGuard({})},t.prototype.init=function(e,t,o){this.allowDragging=e,this.params=t,this.eventType=o,this.primaryColsHeaderPanel.init(this.params),this.params.suppressColumnExpandAll&&this.params.suppressColumnFilter&&this.params.suppressColumnSelectAll&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new i.Gxm(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})},t.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},t.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},t.prototype.expandGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)},t.prototype.collapseGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)},t.prototype.setColumnLayout=function(e){this.primaryColsListPanel.setColumnLayout(e)},t.prototype.onFilterChanged=function(e){this.primaryColsListPanel.setFilterText(e.filterText)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},t.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},t.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},t.prototype.onGroupExpanded=function(e){this.primaryColsHeaderPanel.setExpandState(e.state)},t.prototype.onSelectionChange=function(e){this.primaryColsHeaderPanel.setSelectionState(e.state)},t.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',Po([(0,i.cqo)("primaryColsHeaderPanel")],t.prototype,"primaryColsHeaderPanel",void 0),Po([(0,i.cqo)("primaryColsListPanel")],t.prototype,"primaryColsListPanel",void 0),Po([i.NqP],t.prototype,"postConstruct",null),t}(i.BxR),To=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),No=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},_o=(function(e){function t(){var o=e.call(this,t.TEMPLATE)||this;return o.initialised=!1,o.childDestroyFuncs=[],o}To(t,e),t.prototype.setVisible=function(t){e.prototype.setDisplayed.call(this,t),t&&!this.initialised&&this.init(this.params)},t.prototype.init=function(e){var t=this,o={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(i._.mergeDeep(o,e),this.params=o,this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new Lt),this.childDestroyFuncs.push(function(){return t.destroyBean(t.pivotModePanel)}),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new xo),this.childDestroyFuncs.push(function(){return t.destroyBean(t.primaryColsPanel)}),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new vo(!1)),this.childDestroyFuncs.push(function(){return t.destroyBean(t.rowGroupDropZonePanel)}),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new Oo(!1)),this.childDestroyFuncs.push(function(){return t.destroyBean(t.valuesDropZonePanel)}),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new wo(!1)),this.childDestroyFuncs.push(function(){return t.destroyBean(t.pivotDropZonePanel)}),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var r=this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){t.resetChildrenHeight(),t.setLastVisible()});this.childDestroyFuncs.push(function(){return r()})}this.initialised=!0},t.prototype.setPivotModeSectionVisible=function(e){var t=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new Lt),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(function(){return t.destroyBean(t.pivotModePanel)})),this.setLastVisible())},t.prototype.setRowGroupsSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new vo(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},t.prototype.setValuesSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new Oo(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},t.prototype.setPivotSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new wo(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())},t.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(function(e){if(e){var t=e.getGui();e.toggleResizable(!t.classList.contains("ag-last-column-drop")&&!t.classList.contains("ag-hidden"))}})},t.prototype.setLastVisible=function(){var e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach(function(e){return e.classList.remove("ag-last-column-drop")});var t=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),o=i._.last(t);o&&o.classList.add("ag-last-column-drop"),this.setResizers()},t.prototype.resetChildrenHeight=function(){for(var e=this.getGui().children,t=0;t<e.length;t++){var o=e[t];o.style.removeProperty("height"),o.style.removeProperty("flex")}},t.prototype.isRowGroupingModuleLoaded=function(){return i.O3h.assertRegistered(i.GXE.RowGroupingModule,"Row Grouping")},t.prototype.expandColumnGroups=function(e){this.primaryColsPanel.expandGroups(e)},t.prototype.collapseColumnGroups=function(e){this.primaryColsPanel.collapseGroups(e)},t.prototype.setColumnLayout=function(e){this.primaryColsPanel.setColumnLayout(e)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},t.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach(function(e){return e()}),this.childDestroyFuncs.length=0,i._.clearElement(this.getGui())},t.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},t.prototype.destroy=function(){this.destroyChildren(),e.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-column-panel"></div>',No([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),No([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0)}(i.wA2),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),Io=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Go=function(e){function t(){var t=e.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return t.minWidth=100,t.maxWidth=null,t}return _o(t,e),t.prototype.setElementToResize=function(e){this.elementToResize=e},t.prototype.postConstruct=function(){var e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizing.bind(this)});this.addDestroyFunc(e),this.setInverted(this.gridOptionsWrapper.isEnableRtl())},t.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth},t.prototype.onResizing=function(e){var t=Math.max(this.minWidth,Math.floor(this.startingWidth-e*(this.inverted?-1:1)));null!=this.maxWidth&&(t=Math.min(this.maxWidth,t)),this.elementToResize.style.width=t+"px"},t.prototype.setInverted=function(e){this.inverted=e},t.prototype.setMaxWidth=function(e){this.maxWidth=e},t.prototype.setMinWidth=function(e){this.minWidth=null!=e?e:100},Io([(0,i.fsG)("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),Io([i.NqP],t.prototype,"postConstruct",null),t}(i.wA2),Fo=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Lo=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},ko=function(e){function t(t){var o=e.call(this)||this;return o.toolPanelDef=t,o}return Fo(t,e),t.prototype.getToolPanelId=function(){return this.toolPanelDef.id},t.prototype.postConstruct=function(){var e=this.createTemplate();this.setTemplate(e),this.eIconWrapper.insertAdjacentElement("afterbegin",i._.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsWrapper)),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this))},t.prototype.createTemplate=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=this.toolPanelDef;return'<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" class="ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span class="ag-side-button-label">'+e(t.labelKey,t.labelDefault)+"</span>\n                </button>\n            </div>"},t.prototype.onButtonPressed=function(){this.dispatchEvent({type:t.EVENT_TOGGLE_BUTTON_CLICKED})},t.prototype.setSelected=function(e){this.addOrRemoveCssClass("ag-selected",e)},t.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",Lo([(0,i.cqo)("eToggleButton")],t.prototype,"eToggleButton",void 0),Lo([(0,i.cqo)("eIconWrapper")],t.prototype,"eIconWrapper",void 0),Lo([i.NqP],t.prototype,"postConstruct",null),t}(i.wA2),Vo=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Bo=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Wo=function(e){function t(){var o=e.call(this,t.TEMPLATE)||this;return o.buttonComps=[],o}return Vo(t,e),t.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){if(e.key===i.VDZ.TAB&&e.shiftKey){var t=i._.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(t,!0)&&e.preventDefault()}},t.prototype.setToolPanelDefs=function(e){e.forEach(this.addButtonComp.bind(this))},t.prototype.setActiveButton=function(e){this.buttonComps.forEach(function(t){t.setSelected(e===t.getToolPanelId())})},t.prototype.addButtonComp=function(e){var o=this,r=this.createBean(new ko(e));this.buttonComps.push(r),this.appendChild(r),r.addEventListener(ko.EVENT_TOGGLE_BUTTON_CLICKED,function(){o.dispatchEvent({type:t.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})})},t.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),i._.clearElement(this.getGui())},t.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",t.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',Bo([(0,i.fsG)("focusService")],t.prototype,"focusService",void 0),Bo([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Bo([i.NqP],t.prototype,"postConstruct",null),Bo([i.FXL],t.prototype,"clearButtons",null),t}(i.wA2),Ho=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Uo=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},jo=function(e){function t(){return e.call(this,t.TEMPLATE)||this}return Ho(t,e),t.prototype.setupResize=function(){var e=this.getGui(),t=this.resizeBar=new Go;this.getContext().createBean(t),t.setElementToResize(e),this.appendChild(t)},t.prototype.getToolPanelId=function(){return this.toolPanelId},t.prototype.setToolPanelDef=function(e){var t=e.id,o=e.minWidth,r=e.maxWidth,n=e.width;this.toolPanelId=t,this.width=n;var i=this.userComponentFactory.getToolPanelCompDetails(e,{}).newAgStackInstance();null!=i?(i.then(this.setToolPanelComponent.bind(this)),null!=o&&this.resizeBar.setMinWidth(o),null!=r&&this.resizeBar.setMaxWidth(r)):console.warn("AG Grid: error processing tool panel component "+t+". You need to specify either 'toolPanel' or 'toolPanelFramework'")},t.prototype.setToolPanelComponent=function(e){var t=this;this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(function(){t.destroyBean(e)}),this.width&&(this.getGui().style.width=this.width+"px")},t.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},t.prototype.setResizerSizerSide=function(e){var t=this.gridOptionsWrapper.isEnableRtl(),o="left"===e;this.resizeBar.setInverted(t?o:!o)},t.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},t.TEMPLATE='<div class="ag-tool-panel-wrapper"/>',Uo([(0,i.fsG)("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Uo([i.NqP],t.prototype,"setupResize",null),t}(i.wA2),zo=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),qo=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Zo=(function(e){function t(){var o=e.call(this,t.TEMPLATE)||this;return o.toolPanelWrappers=[],o}zo(t,e),t.prototype.postConstruct=function(){var e=this;this.sideBarButtonsComp.addEventListener(Wo.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.gridOptionsWrapper.addEventListener("sideBar",function(){e.clearDownUi(),e.setSideBarDef()}),this.gridApi.registerSideBarComp(this),this.createManagedBean(new i.D_6(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var t=this.focusService,o=this.sideBarButtonsComp,r=this.getGui(),n=o.getGui(),i=this.gridOptionsWrapper.getDocument().activeElement,s=r.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)");if(s)if(n.contains(i))t.focusInto(s,e.shiftKey)&&e.preventDefault();else if(!t.isFocusUnderManagedComponent(s)&&e.shiftKey){var a=t.findFocusableElements(s)[0];if(this.gridOptionsWrapper.getDocument().activeElement===a){var l=n.querySelector(".ag-selected button");l&&(e.preventDefault(),l.focus())}}}},t.prototype.handleKeyDown=function(e){var t=this.gridOptionsWrapper.getDocument();if(this.sideBarButtonsComp.getGui().contains(t.activeElement)){var o=this.sideBarButtonsComp.getGui(),r=Array.prototype.slice.call(o.querySelectorAll(".ag-side-button")),n=t.activeElement,s=r.findIndex(function(e){return e.contains(n)}),a=null;switch(e.key){case i.VDZ.LEFT:case i.VDZ.UP:a=Math.max(0,s-1);break;case i.VDZ.RIGHT:case i.VDZ.DOWN:a=Math.min(s+1,r.length-1)}if(null!==a){var l=r[a].querySelector("button");l&&(l.focus(),e.preventDefault())}}},t.prototype.onToolPanelButtonClicked=function(e){var t=e.toolPanelId,o=this.openedItem();this.openToolPanel(o===t?void 0:t)},t.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},t.prototype.setSideBarDef=function(){this.setDisplayed(!1);var e=this.gridOptionsWrapper.getSideBar(),t=!!e&&!!e.toolPanels;if(t){this.setDisplayed(t&&!e.hiddenByDefault);var o=e.toolPanels;this.sideBarButtonsComp.setToolPanelDefs(o),this.setupToolPanels(o),this.setSideBarPosition(e.position),e.hiddenByDefault||this.openToolPanel(e.defaultToolPanel)}},t.prototype.setSideBarPosition=function(e){e||(e="right");var t="left"===e,o=t?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",t),this.addOrRemoveCssClass("ag-side-bar-right",!t),this.toolPanelWrappers.forEach(function(e){e.setResizerSizerSide(o)}),this},t.prototype.setupToolPanels=function(e){var t=this;e.forEach(function(e){if(null!=e.id){if("agColumnsToolPanel"===e.toolPanel&&!i.O3h.assertRegistered(i.GXE.ColumnToolPanelModule,"Column Tool Panel"))return;if("agFiltersToolPanel"===e.toolPanel&&!i.O3h.assertRegistered(i.GXE.FiltersToolPanelModule,"Filters Tool Panel"))return;var o=new jo;t.getContext().createBean(o),o.setToolPanelDef(e),o.setDisplayed(!1),t.getGui().appendChild(o.getGui()),t.toolPanelWrappers.push(o)}else console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id")})},t.prototype.refresh=function(){this.toolPanelWrappers.forEach(function(e){return e.refresh()})},t.prototype.openToolPanel=function(e){var t=this.openedItem();t!==e&&(this.toolPanelWrappers.forEach(function(t){var o=e===t.getToolPanelId();t.setDisplayed(o)}),t!==this.openedItem()&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e)))},t.prototype.getToolPanelInstance=function(e){var t=this.toolPanelWrappers.filter(function(t){return t.getToolPanelId()===e})[0];if(t)return t.getToolPanelInstance();console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: "+e)},t.prototype.raiseToolPanelVisibleEvent=function(e){var t={type:i.zW2.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};this.eventService.dispatchEvent(t)},t.prototype.close=function(){this.openToolPanel(void 0)},t.prototype.isToolPanelShowing=function(){return!!this.openedItem()},t.prototype.openedItem=function(){var e=null;return this.toolPanelWrappers.forEach(function(t){t.isDisplayed()&&(e=t.getToolPanelId())}),e},t.prototype.destroyToolPanelWrappers=function(){var e=this;this.toolPanelWrappers.forEach(function(t){i._.removeFromParent(t.getGui()),e.destroyBean(t)}),this.toolPanelWrappers.length=0},t.prototype.destroy=function(){this.destroyToolPanelWrappers(),e.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',qo([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),qo([(0,i.fsG)("focusService")],t.prototype,"focusService",void 0),qo([(0,i.cqo)("sideBarButtons")],t.prototype,"sideBarButtonsComp",void 0),qo([i.NqP],t.prototype,"postConstruct",null)}(i.wA2),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),Ko=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Jo=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isColGroupDef=function(e){return e&&void 0!==e.children},t.getId=function(e){return t.isColGroupDef(e)?e.groupId:e.colId},t}Zo(t,e),t.prototype.createColumnTree=function(e){var t=this,o=[],r=function(e,n){if(t.isColGroupDef(e)){var s=e,a=new i.KTm(s,void 0!==s.groupId?s.groupId:s.headerName,!1,n),l=[];return s.children.forEach(function(e){var t=r(e,n+1);t&&l.push(t)}),a.setChildren(l),a}var u=e,p=t.columnModel.getPrimaryColumn(u.colId?u.colId:u.field);return p||o.push(u),p},n=[];return e.forEach(function(e){var t=r(e,0);t&&n.push(t)}),o.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",o),n},t.prototype.syncLayoutWithGrid=function(e){var t=this.getLeafPathTrees();e(this.mergeLeafPathTrees(t))},t.prototype.getLeafPathTrees=function(){var e=function(t,o){var r;if(t instanceof i.KTm)if(t.isPadding())r=o;else{var n=Object.assign({},t.getColGroupDef());n.groupId=t.getGroupId(),n.children=[o],r=n}else{var s=Object.assign({},t.getColDef());s.colId=t.getColId(),r=s}var a=t.getOriginalParent();return a?e(a,r):r};return this.columnModel.getAllGridColumns().filter(function(e){var t=e.getColDef();return e.isPrimary()&&!t.showRowGroup}).map(function(t){return e(t,t.getColDef())})},t.prototype.mergeLeafPathTrees=function(e){for(var t,o,r=this,n=function(e,t){if(!r.isColGroupDef(t))return e;var o=e,i=t;return i.children&&i.groupId&&r.addChildrenToGroup(o,i.groupId,i.children[0])||i.children.forEach(function(e){return n(o,e)}),o},i=[],s=1;s<=e.length;s++){var a=e[s-1],l=e[s];o=l,r.isColGroupDef(t=a)&&r.isColGroupDef(o)&&r.getId(t)===r.getId(o)?e[s]=n(a,l):i.push(a)}return i},t.prototype.addChildrenToGroup=function(e,t,o){var r=this;if(!this.isColGroupDef(e))return!0;var n=e,s=o;if(function(e,t){var o=e.children.map(r.getId),n=i._.includes(o,r.getId(t)),s=i._.last(e.children),a=s&&r.getId(s)!==r.getId(t);return n&&a}(n,s))return n.children.push(s),!0;if(n.groupId===t){var a=n.children.map(this.getId);if(!i._.includes(a,this.getId(s)))return n.children.push(s),!0}return n.children.forEach(function(e){return r.addChildrenToGroup(e,t,o)}),!1},Ko([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),t=Ko([(0,i.Vu6)("toolPanelColDefService")],t)}(i.AS9),function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s}),Xo=(function(){function e(){}e.prototype.selectAllChildren=function(e,t,o){var r=this.extractAllLeafColumns(e);this.setAllColumns(r,t,o)},e.prototype.setColumn=function(e,t,o){this.setAllColumns([e],t,o)},e.prototype.setAllColumns=function(e,t,o){this.columnModel.isPivotMode()?this.setAllPivot(e,t,o):this.setAllVisible(e,t,o)},e.prototype.extractAllLeafColumns=function(e){var t=[],o=function(e){e.forEach(function(e){e.isPassesFilter()&&(e.isGroup()?o(e.getChildren()):t.push(e.getColumn()))})};return o(e),t},e.prototype.setAllVisible=function(e,t,o){var r=[];e.forEach(function(e){e.getColDef().lockVisible||e.isVisible()!=t&&r.push({colId:e.getId(),hide:!t})}),r.length>0&&this.columnModel.applyColumnState({state:r},o)},e.prototype.setAllPivot=function(e,t,o){this.gridOptionsWrapper.isFunctionsPassive()?this.setAllPivotPassive(e,t):this.setAllPivotActive(e,t,o)},e.prototype.setAllPivotPassive=function(e,t){var o=this.columnModel.getPivotColumns().slice(),r=this.columnModel.getValueColumns().slice(),n=this.columnModel.getRowGroupColumns().slice(),s=!1,a=!1,l=!1;e.forEach(t?function(e){e.isAnyFunctionActive()||(e.isAllowValue()?(r.push(e),a=!0):e.isAllowRowGroup()?(n.push(e),s=!0):e.isAllowPivot()&&(o.push(e),l=!0))}:function(e){e.isAnyFunctionActive()&&(o.indexOf(e)>=0&&(i._.removeFromArray(o,e),s=!0),r.indexOf(e)>=0&&(i._.removeFromArray(r,e),a=!0),n.indexOf(e)>=0&&(i._.removeFromArray(n,e),l=!0))}),s&&this.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:o,api:this.gridApi,columnApi:this.columnApi}),l&&this.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:n,api:this.gridApi,columnApi:this.columnApi}),a&&this.eventService.dispatchEvent({type:i.zW2.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:n,api:this.gridApi,columnApi:this.columnApi})},e.prototype.setAllPivotActive=function(e,t,o){var r=this,n=[];e.forEach(t?function(e){if(!e.isAnyFunctionActive())if(e.isAllowValue()){var t="string"==typeof e.getAggFunc()?e.getAggFunc():r.aggFuncService.getDefaultAggFunc(e);n.push({colId:e.getId(),aggFunc:t})}else e.isAllowRowGroup()?n.push({colId:e.getId(),rowGroup:!0}):e.isAllowPivot()&&n.push({colId:e.getId(),pivot:!0})}:function(e){(e.isPivotActive()||e.isRowGroupActive()||e.isValueActive())&&n.push({colId:e.getId(),pivot:!1,rowGroup:!1,aggFunc:null})}),n.length>0&&this.columnModel.applyColumnState({state:n},o)},Jo([(0,i.fsG)("aggFuncService")],e.prototype,"aggFuncService",void 0),Jo([(0,i.fsG)("columnModel")],e.prototype,"columnModel",void 0),Jo([(0,i.fsG)("gridOptionsWrapper")],e.prototype,"gridOptionsWrapper",void 0),Jo([(0,i.fsG)("columnApi")],e.prototype,"columnApi",void 0),Jo([(0,i.fsG)("gridApi")],e.prototype,"gridApi",void 0),Jo([(0,i.fsG)("eventService")],e.prototype,"eventService",void 0),e=Jo([(0,i.Vu6)("modelItemUtils")],e)}(),function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}()),Yo=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Qo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xo(t,e),t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.showMenuAfterMouseEvent=function(e,t,o){var r=this;this.showMenu(e,function(n){var i=n.getGui();r.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:e,mouseEvent:t,ePopup:i}),o&&n.showTab(o)},"columnMenu",o,void 0,t.target)},t.prototype.showMenuAfterButtonClick=function(e,t,o,r,n){var i=this,s=-1,a="left";this.gridOptionsWrapper.isEnableRtl()&&(s=1,a="right"),this.showMenu(e,function(n){var l=n.getGui();i.popupService.positionPopupUnderComponent({type:o,column:e,eventSource:t,ePopup:l,alignSide:a,nudgeX:9*s,nudgeY:-23,keepWithinBounds:!0}),r&&n.showTab(r)},o,r,n,t)},t.prototype.showMenu=function(e,t,o,r,n,s){var a=this,l=this.createBean(new $o(e,this.lastSelectedTab,n)),u=l.getGui(),p=s||this.ctrlsService.getGridBodyCtrl().getGui(),c=[];c.push(function(t){if(a.destroyBean(l),e.setMenuVisible(!1,"contextMenu"),t instanceof KeyboardEvent&&s&&i._.isVisible(s)){var o=a.focusService.findTabbableParent(s);o&&o.focus()}});var d=this.gridOptionsWrapper.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:function(e){c.forEach(function(t){return t(e)})},afterGuiAttached:function(e){return l.afterGuiAttached(Object.assign({},{container:o},e))},positionCallback:function(){return t(l)},anchorToElement:p,ariaLabel:d("ariaLabelColumnMenu","Column Menu")});if(h){var f=h.stopAnchoringPromise;f&&f.then(function(t){e.addEventListener(i.sgG.EVENT_LEFT_CHANGED,t),e.addEventListener(i.sgG.EVENT_VISIBLE_CHANGED,t),c.push(function(){e.removeEventListener(i.sgG.EVENT_LEFT_CHANGED,t),e.removeEventListener(i.sgG.EVENT_VISIBLE_CHANGED,t)})})}r||(l.showTabBasedOnPreviousSelection(),t(l)),l.addEventListener($o.EVENT_TAB_SELECTED,function(e){a.lastSelectedTab=e.key}),e.setMenuVisible(!0,"contextMenu"),this.activeMenu=l,l.addEventListener(i.AS9.EVENT_DESTROYED,function(){a.activeMenu===l&&(a.activeMenu=null)})},t.prototype.isMenuEnabled=function(e){return e.getMenuTabs($o.TABS_DEFAULT).length>0},Yo([(0,i.fsG)("popupService")],t.prototype,"popupService",void 0),Yo([(0,i.fsG)("focusService")],t.prototype,"focusService",void 0),Yo([(0,i.fsG)("ctrlsService")],t.prototype,"ctrlsService",void 0),Yo([(0,i.Vu6)("menuFactory")],t)}(i.AS9),$o=function(e){function t(o,r,n){var i=e.call(this)||this;return i.tabFactories={},i.includeChecks={},i.column=o,i.initialSelection=r,i.tabFactories[t.TAB_GENERAL]=i.createMainPanel.bind(i),i.tabFactories[t.TAB_FILTER]=i.createFilterPanel.bind(i),i.tabFactories[t.TAB_COLUMNS]=i.createColumnsPanel.bind(i),i.includeChecks[t.TAB_GENERAL]=function(){return!0},i.includeChecks[t.TAB_FILTER]=function(){return o.isFilterAllowed()},i.includeChecks[t.TAB_COLUMNS]=function(){return!0},i.restrictTo=n,i}return Xo(t,e),t.prototype.init=function(){var e=this,t=this.getTabsToCreate().map(function(t){return e.createTab(t)});this.tabbedLayout=new i.WD6({items:t,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout)},t.prototype.getTabsToCreate=function(){var e=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(t.TABS_DEFAULT).filter(function(t){return e.isValidMenuTabItem(t)}).filter(function(t){return e.isNotSuppressed(t)}).filter(function(t){return e.isModuleLoaded(t)})},t.prototype.isModuleLoaded=function(e){return e!==t.TAB_COLUMNS||i.O3h.isRegistered(i.GXE.ColumnToolPanelModule)},t.prototype.isValidMenuTabItem=function(e){var o=!0,r=t.TABS_DEFAULT;return null!=this.restrictTo&&(o=this.restrictTo.indexOf(e)>-1,r=this.restrictTo),(o=o&&t.TABS_DEFAULT.indexOf(e)>-1)||console.warn("AG Grid: Trying to render an invalid menu item '"+e+"'. Check that your 'menuTabs' contains one of ["+r+"]"),o},t.prototype.isNotSuppressed=function(e){return this.includeChecks[e]()},t.prototype.createTab=function(e){return this.tabFactories[e]()},t.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},t.prototype.showTab=function(e){this.tabItemColumns&&e===t.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===t.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===t.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},t.prototype.onTabItemClicked=function(e){var o=null;switch(e.item){case this.tabItemColumns:o=t.TAB_COLUMNS;break;case this.tabItemFilter:o=t.TAB_FILTER;break;case this.tabItemGeneral:o=t.TAB_GENERAL}o&&this.activateTab(o)},t.prototype.activateTab=function(e){this.dispatchEvent({type:t.EVENT_TAB_SELECTED,key:e})},t.prototype.getMenuItems=function(){var e,o=this.getDefaultMenuOptions(),r=this.gridOptionsWrapper.getMainMenuItemsFunc();return e=r?r({column:this.column,defaultItems:o}):o,i._.removeRepeatsFromArray(e,t.MENU_ITEM_SEPARATOR),e},t.prototype.getDefaultMenuOptions=function(){var e=[],o=!this.column.getColDef().lockPinned,r=this.columnModel.getRowGroupColumns().length,n=r>0,s=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,a=this.column.isAllowValue(),l=this.column.isAllowRowGroup(),u=this.column.isPrimary(),p=this.columnModel.isPivotMode(),c=this.rowModel.getType()===i.gTE.ROW_MODEL_TYPE_CLIENT_SIDE,d=this.gridOptionsWrapper.isTreeData(),h=u&&n&&a||!u;return o&&e.push("pinSubMenu"),h&&e.push("valueAggSubMenu"),(o||h)&&e.push(t.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(t.MENU_ITEM_SEPARATOR),l&&this.column.isPrimary()&&e.push(s?"rowUnGroup":"rowGroup"),e.push(t.MENU_ITEM_SEPARATOR),e.push("resetColumns"),c&&(d||r>(p?1:0))&&(e.push("expandAll"),e.push("contractAll")),e},t.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new i.O_3);var e=this.getMenuItems(),o=this.menuItemMapper.mapWithStockItems(e,this.column);return this.mainMenuList.addMenuItems(o),this.mainMenuList.addEventListener(i.sJC.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:i._.createIconNoSpan("menu",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_GENERAL.replace("MenuTab",""),bodyPromise:i.j_S.resolve(this.mainMenuList.getGui()),name:t.TAB_GENERAL},this.tabItemGeneral},t.prototype.onHidePopup=function(e){var t;e&&e.event&&e.event instanceof KeyboardEvent&&(t=e.event),this.hidePopupFunc(t&&{keyboardEvent:t});var o=this.focusService.getFocusedCell(),r=this.gridOptionsWrapper.getDocument();r.activeElement===r.body&&o&&this.focusService.setFocusedCell({rowIndex:o.rowIndex,column:o.column,rowPinned:o.rowPinned,forceBrowserFocus:!0})},t.prototype.createFilterPanel=function(){var e,o=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!o)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:i._.createIconNoSpan("filter",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_FILTER.replace("MenuTab",""),bodyPromise:null===(e=o)||void 0===e?void 0:e.guiPromise,afterAttachedCallback:function(e){var t;(null===(t=o)||void 0===t?void 0:t.filterPromise)&&o.filterPromise.then(function(t){t&&t.afterGuiAttached&&t.afterGuiAttached(e)})},name:t.TAB_FILTER},this.tabItemFilter},t.prototype.createColumnsPanel=function(){var e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper"),this.columnSelectPanel=this.createManagedBean(new xo);var o=this.column.getColDef().columnsMenuParams;o||(o={}),this.columnSelectPanel.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!o.contractColumnSelection,suppressColumnExpandAll:!!o.suppressColumnExpandAll,suppressColumnFilter:!!o.suppressColumnFilter,suppressColumnSelectAll:!!o.suppressColumnSelectAll,suppressSyncLayoutWithGrid:!!o.suppressSyncLayoutWithGrid,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},"columnMenu");var r=this.columnSelectPanel.getGui();return r.classList.add("ag-menu-column-select"),e.appendChild(r),this.tabItemColumns={title:i._.createIconNoSpan("columns",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:i.j_S.resolve(e),name:t.TAB_COLUMNS},this.tabItemColumns},t.prototype.afterGuiAttached=function(e){var t=e.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:e.container,hidePopup:t}),t&&(this.hidePopupFunc=t,this.addDestroyFunc(t))},t.prototype.getGui=function(){return this.tabbedLayout.getGui()},t.EVENT_TAB_SELECTED="tabSelected",t.TAB_FILTER="filterMenuTab",t.TABS_DEFAULT=[t.TAB_GENERAL="generalMenuTab",t.TAB_FILTER,t.TAB_COLUMNS="columnsMenuTab"],t.MENU_ITEM_SEPARATOR="separator",Yo([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Yo([(0,i.fsG)("filterManager")],t.prototype,"filterManager",void 0),Yo([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),Yo([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),Yo([(0,i.fsG)("menuItemMapper")],t.prototype,"menuItemMapper",void 0),Yo([(0,i.fsG)("rowModel")],t.prototype,"rowModel",void 0),Yo([(0,i.fsG)("focusService")],t.prototype,"focusService",void 0),Yo([i.NqP],t.prototype,"init",null),t}(i.AS9),er=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),tr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},or="ag-context-menu-open",rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return er(t,e),t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.getMenuItems=function(e,t,o){var r=[];if(i._.exists(e)&&i.O3h.isRegistered(i.GXE.ClipboardModule)&&t&&r.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator"),this.gridOptionsWrapper.isEnableCharts()&&i.O3h.isRegistered(i.GXE.RangeSelectionModule)&&i.O3h.isRegistered(i.GXE.GridChartsModule)&&(this.columnModel.isPivotMode()&&r.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&r.push("chartRange")),i._.exists(e)){var n=!i.O3h.isRegistered(i.GXE.CsvExportModule),s=!i.O3h.isRegistered(i.GXE.ExcelExportModule),a=this.gridOptionsWrapper.isSuppressExcelExport()||s,l=this.gridOptionsWrapper.isSuppressCsvExport()||n;!(i._.isIOSUserAgent()||a&&l)&&r.push("export")}if(this.gridOptionsWrapper.getContextMenuItemsFunc()){var u=this.gridOptionsWrapper.getContextMenuItemsFunc();return u?u({node:e,column:t,value:o,defaultItems:r.length?r:void 0}):void 0}return r},t.prototype.onContextMenu=function(e,t,o,r,n,i){!this.gridOptionsWrapper.isAllowContextMenuWithControlKey()&&e&&(e.ctrlKey||e.metaKey)||(e&&this.blockMiddleClickScrollsIfNeeded(e),this.gridOptionsWrapper.isSuppressContextMenu()||this.showMenu(o,r,n,e||t.touches[0],i)&&(e||t).preventDefault())},t.prototype.blockMiddleClickScrollsIfNeeded=function(e){var t=e.which;this.gridOptionsWrapper.isSuppressMiddleClickScrolls()&&2===t&&e.preventDefault()},t.prototype.showMenu=function(e,t,o,r,n){var s=this,a=this.getMenuItems(e,t,o),l=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===a||i._.missingOrEmpty(a))return!1;var u=new nr(a);this.createBean(u);var p=u.getGui(),c={column:t,rowNode:e,type:"contextMenu",mouseEvent:r,ePopup:p,nudgeY:1},d=this.gridOptionsWrapper.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:p,closeOnEsc:!0,closedCallback:function(){l.classList.remove(or),s.destroyBean(u)},click:r,positionCallback:function(){s.popupService.positionPopupUnderMouseEvent(Object.assign({},{nudgeX:s.gridOptionsWrapper.isEnableRtl()?-1*(p.offsetWidth+1):1},c))},anchorToElement:n,ariaLabel:d("ariaLabelContextMenu","Context Menu")});return h&&(l.classList.add(or),u.afterGuiAttached({container:"contextMenu",hidePopup:h.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=u,u.addEventListener(i.AS9.EVENT_DESTROYED,function(){s.activeMenu===u&&(s.activeMenu=null)}),h&&u.addEventListener(i.sJC.EVENT_MENU_ITEM_SELECTED,h.hideFunc),!0},tr([(0,i.fsG)("popupService")],t.prototype,"popupService",void 0),tr([(0,i.FiY)("rangeService")],t.prototype,"rangeService",void 0),tr([(0,i.fsG)("ctrlsService")],t.prototype,"ctrlsService",void 0),tr([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),tr([(0,i.Vu6)("contextMenuFactory")],t)}(i.AS9),nr=function(e){function t(t){var o=e.call(this,'<div class="ag-menu" role="presentation"></div>')||this;return o.menuList=null,o.focusedCell=null,o.menuItems=t,o}return er(t,e),t.prototype.addMenuItems=function(){var e=this,t=this.createBean(new i.O_3),o=this.menuItemMapper.mapWithStockItems(this.menuItems,null);t.addMenuItems(o),this.appendChild(t),this.menuList=t,t.addEventListener(i.sJC.EVENT_MENU_ITEM_SELECTED,function(t){return e.dispatchEvent(t)})},t.prototype.afterGuiAttached=function(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},t.prototype.restoreFocusedCell=function(){var e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){var t=this.focusedCell,o=t.rowIndex,r=t.rowPinned,n=t.column,i=this.gridOptionsWrapper.getDocument();i.activeElement===i.body&&this.focusService.setFocusedCell({rowIndex:o,column:n,rowPinned:r,forceBrowserFocus:!0})}},t.prototype.destroy=function(){this.restoreFocusedCell(),e.prototype.destroy.call(this)},tr([(0,i.fsG)("menuItemMapper")],t.prototype,"menuItemMapper",void 0),tr([(0,i.fsG)("focusService")],t.prototype,"focusService",void 0),tr([(0,i.fsG)("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),tr([i.NqP],t.prototype,"addMenuItems",null),t}(i.wA2),ir=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),sr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},ar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ir(t,e),t.prototype.mapWithStockItems=function(e,t){var o=this;if(!e)return[];var r=[];return e.forEach(function(e){var n;if(n="string"==typeof e?o.getStockMenuItem(e,t):e){var i=n.subMenu;i&&i instanceof Array&&(n.subMenu=o.mapWithStockItems(n.subMenu,t)),null!=n&&r.push(n)}}),r},t.prototype.getStockMenuItem=function(e,t){var o=this,r=this.gridOptionsWrapper.getLocaleTextFunc(),n=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();switch(e){case"pinSubMenu":return{name:r("pinColumn","Pin Column"),icon:i._.createIconNoSpan("menuPin",this.gridOptionsWrapper,null),subMenu:["pinLeft","pinRight","clearPinned"]};case"pinLeft":return{name:r("pinLeft","Pin Left"),action:function(){return o.columnModel.setColumnPinned(t,i.gTE.PINNED_LEFT,"contextMenu")},checked:!!t&&t.isPinnedLeft()};case"pinRight":return{name:r("pinRight","Pin Right"),action:function(){return o.columnModel.setColumnPinned(t,i.gTE.PINNED_RIGHT,"contextMenu")},checked:!!t&&t.isPinnedRight()};case"clearPinned":return{name:r("noPin","No Pin"),action:function(){return o.columnModel.setColumnPinned(t,null,"contextMenu")},checked:!!t&&!t.isPinned()};case"valueAggSubMenu":return i.O3h.assertRegistered(i.GXE.RowGroupingModule,"Aggregation from Menu")?{name:r("valueAggregation","Value Aggregation"),icon:i._.createIconNoSpan("menuValue",this.gridOptionsWrapper,null),subMenu:this.createAggregationSubMenu(t)}:null;case"autoSizeThis":return{name:r("autosizeThiscolumn","Autosize This Column"),action:function(){return o.columnModel.autoSizeColumn(t,n,"contextMenu")}};case"autoSizeAll":return{name:r("autosizeAllColumns","Autosize All Columns"),action:function(){return o.columnModel.autoSizeAllColumns(n,"contextMenu")}};case"rowGroup":return{name:r("groupBy","Group by")+" "+i._.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),action:function(){return o.columnModel.addRowGroupColumn(t,"contextMenu")},icon:i._.createIconNoSpan("menuAddRowGroup",this.gridOptionsWrapper,null)};case"rowUnGroup":return{name:r("ungroupBy","Un-Group by")+" "+i._.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),action:function(){return o.columnModel.removeRowGroupColumn(t,"contextMenu")},icon:i._.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsWrapper,null)};case"resetColumns":return{name:r("resetColumns","Reset Columns"),action:function(){return o.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:r("expandAll","Expand All"),action:function(){return o.gridApi.expandAll()}};case"contractAll":return{name:r("collapseAll","Collapse All"),action:function(){return o.gridApi.collapseAll()}};case"copy":return i.O3h.assertRegistered(i.GXE.ClipboardModule,"Copy from Menu")?{name:r("copy","Copy"),shortcut:r("ctrlC","Ctrl+C"),icon:i._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return o.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return i.O3h.assertRegistered(i.GXE.ClipboardModule,"Copy with Headers from Menu")?{name:r("copyWithHeaders","Copy with Headers"),icon:i._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return o.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return i.O3h.assertRegistered(i.GXE.ClipboardModule,"Copy with Group Headers from Menu")?{name:r("copyWithGroupHeaders","Copy with Group Headers"),icon:i._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return o.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"paste":return i.O3h.assertRegistered(i.GXE.ClipboardModule,"Paste from Clipboard")?{name:r("paste","Paste"),shortcut:r("ctrlV","Ctrl+V"),disabled:!0,icon:i._.createIconNoSpan("clipboardPaste",this.gridOptionsWrapper,null),action:function(){return o.clipboardService.pasteFromClipboard()}}:null;case"export":var s=[],a=i.O3h.isRegistered(i.GXE.CsvExportModule),l=i.O3h.isRegistered(i.GXE.ExcelExportModule);return!this.gridOptionsWrapper.isSuppressCsvExport()&&a&&s.push("csvExport"),!this.gridOptionsWrapper.isSuppressExcelExport()&&l&&s.push("excelExport"),{name:r("export","Export"),subMenu:s,icon:i._.createIconNoSpan("save",this.gridOptionsWrapper,null)};case"csvExport":return{name:r("csvExport","CSV Export"),icon:i._.createIconNoSpan("csvExport",this.gridOptionsWrapper,null),action:function(){return o.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:r("excelExport","Excel Export"),icon:i._.createIconNoSpan("excelExport",this.gridOptionsWrapper,null),action:function(){return o.gridApi.exportDataAsExcel()}};case"separator":return"separator";default:return this.getChartItems(e)||(console.warn("AG Grid: unknown menu item type "+e),null)}},t.prototype.getChartItems=function(e){var t=this,o=this.gridOptionsWrapper.getLocaleTextFunc(),r=function(e,r,n){return{name:o(e,r),action:function(){return t.chartService.createPivotChart({chartType:n})}}},n=function(e,r,n){return{name:o(e,r),action:function(){return t.chartService.createChartFromCurrentRange(n)}}};switch(e){case"pivotChart":return{name:o("pivotChart","Pivot Chart"),subMenu:["pivotColumnChart","pivotBarChart","pivotPieChart","pivotLineChart","pivotXYChart","pivotAreaChart"],icon:i._.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"chartRange":return{name:o("chartRange","Chart Range"),subMenu:["rangeColumnChart","rangeBarChart","rangePieChart","rangeLineChart","rangeXYChart","rangeAreaChart","rangeHistogramChart","rangeCombinationChart"],icon:i._.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"pivotColumnChart":return{name:o("columnChart","Column"),subMenu:["pivotGroupedColumn","pivotStackedColumn","pivotNormalizedColumn"]};case"pivotGroupedColumn":return r("groupedColumn","Grouped&lrm;","groupedColumn");case"pivotStackedColumn":return r("stackedColumn","Stacked&lrm;","stackedColumn");case"pivotNormalizedColumn":return r("normalizedColumn","100% Stacked&lrm;","normalizedColumn");case"rangeColumnChart":return{name:o("columnChart","Column"),subMenu:["rangeGroupedColumn","rangeStackedColumn","rangeNormalizedColumn"]};case"rangeGroupedColumn":return n("groupedColumn","Grouped&lrm;","groupedColumn");case"rangeStackedColumn":return n("stackedColumn","Stacked&lrm;","stackedColumn");case"rangeNormalizedColumn":return n("normalizedColumn","100% Stacked&lrm;","normalizedColumn");case"pivotBarChart":return{name:o("barChart","Bar"),subMenu:["pivotGroupedBar","pivotStackedBar","pivotNormalizedBar"]};case"pivotGroupedBar":return r("groupedBar","Grouped&lrm;","groupedBar");case"pivotStackedBar":return r("stackedBar","Stacked&lrm;","stackedBar");case"pivotNormalizedBar":return r("normalizedBar","100% Stacked&lrm;","normalizedBar");case"rangeBarChart":return{name:o("barChart","Bar"),subMenu:["rangeGroupedBar","rangeStackedBar","rangeNormalizedBar"]};case"rangeGroupedBar":return n("groupedBar","Grouped&lrm;","groupedBar");case"rangeStackedBar":return n("stackedBar","Stacked&lrm;","stackedBar");case"rangeNormalizedBar":return n("normalizedBar","100% Stacked&lrm;","normalizedBar");case"pivotPieChart":return{name:o("pieChart","Pie"),subMenu:["pivotPie","pivotDoughnut"]};case"pivotPie":return r("pie","Pie&lrm;","pie");case"pivotDoughnut":return r("doughnut","Doughnut&lrm;","doughnut");case"rangePieChart":return{name:o("pieChart","Pie"),subMenu:["rangePie","rangeDoughnut"]};case"rangePie":return n("pie","Pie&lrm;","pie");case"rangeDoughnut":return n("doughnut","Doughnut&lrm;","doughnut");case"pivotLineChart":return r("line","Line&lrm;","line");case"rangeLineChart":return n("line","Line&lrm;","line");case"pivotXYChart":return{name:o("xyChart","X Y (Scatter)"),subMenu:["pivotScatter","pivotBubble"]};case"pivotScatter":return r("scatter","Scatter&lrm;","scatter");case"pivotBubble":return r("bubble","Bubble&lrm;","bubble");case"rangeXYChart":return{name:o("xyChart","X Y (Scatter)"),subMenu:["rangeScatter","rangeBubble"]};case"rangeScatter":return n("scatter","Scatter&lrm;","scatter");case"rangeBubble":return n("bubble","Bubble&lrm;","bubble");case"pivotAreaChart":return{name:o("areaChart","Area"),subMenu:["pivotArea","pivotStackedArea","pivotNormalizedArea"]};case"pivotArea":return r("area","Area&lrm;","area");case"pivotStackedArea":return r("stackedArea","Stacked&lrm;","stackedArea");case"pivotNormalizedArea":return r("normalizedArea","100% Stacked&lrm;","normalizedArea");case"rangeAreaChart":return{name:o("areaChart","Area"),subMenu:["rangeArea","rangeStackedArea","rangeNormalizedArea"]};case"rangeArea":return n("area","Area&lrm;","area");case"rangeStackedArea":return n("stackedArea","Stacked&lrm;","stackedArea");case"rangeNormalizedArea":return n("normalizedArea","100% Stacked&lrm;","normalizedArea");case"rangeHistogramChart":return n("histogramChart","Histogram&lrm;","histogram");case"rangeColumnLineCombo":return n("columnLineCombo","Column & Line&lrm;","columnLineCombo");case"rangeAreaColumnCombo":return n("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo");case"rangeCombinationChart":return{name:o("combinationChart","Combination"),subMenu:["rangeColumnLineCombo","rangeAreaColumnCombo"]};default:return null}},t.prototype.createAggregationSubMenu=function(e){var t,o=this,r=this.gridOptionsWrapper.getLocaleTextFunc(),n=e.isValueActive(),s=this.aggFuncService.getFuncNames(e);if(e.isPrimary())t=e;else{var a=e.getColDef().pivotValueColumn;t=i._.exists(a)?a:void 0}var l=[];return s.forEach(function(e){l.push({name:r(e,e),action:function(){o.columnModel.setColumnAggFunc(t,e,"contextMenu"),o.columnModel.addValueColumn(t,"contextMenu")},checked:n&&t.getAggFunc()===e})}),l},sr([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),sr([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),sr([(0,i.FiY)("clipboardService")],t.prototype,"clipboardService",void 0),sr([(0,i.FiY)("aggFuncService")],t.prototype,"aggFuncService",void 0),sr([(0,i.FiY)("chartService")],t.prototype,"chartService",void 0),sr([(0,i.Vu6)("menuItemMapper")],t)}(i.AS9),lr={moduleName:i.GXE.MenuModule,beans:[Qo,rr,ar],dependantModules:[_.f]},ur=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),pr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseStoreUpdateListening=!1,t.started=!1,t}return ur(t,e),t.prototype.ensureRowHeightsValid=function(){return!1},t.prototype.start=function(){this.started=!0;var e=this.gridOptionsWrapper.getServerSideDatasource();e&&this.setDatasource(e)},t.prototype.destroyDatasource=function(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_VALUE_CHANGED,e),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_CHANGED,e),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.verifyProps()},t.prototype.verifyProps=function(){null!=this.gridOptionsWrapper.getInitialGroupOrderComparator()&&i._.doOnce(function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Infinite Scroll, then sorting is done on the server side, nothing to do with the client.")},"SSRM.InitialGroupOrderComparator"),this.gridOptionsWrapper.isRowSelection()&&null==this.gridOptionsWrapper.getRowIdFunc()&&i._.doOnce(function(){return console.warn("AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.")},"SSRM.SelectionNeedsRowNodeIdFunc")},t.prototype.setDatasource=function(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())},t.prototype.isLastRowIndexKnown=function(){var e=this.getRootStore();return!!e&&e.isLastRowIndexKnown()},t.prototype.onColumnEverything=function(){if(!this.gridOptionsWrapper.isSuppressEnterpriseResetOnNewColumns())if(this.storeParams){var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),t=this.columnsToValueObjects(this.columnModel.getValueColumns()),o=this.columnsToValueObjects(this.columnModel.getPivotColumns()),r=!i._.jsonEquals(this.storeParams.sortModel,this.sortController.getSortModel()),n=!i._.jsonEquals(this.storeParams.rowGroupCols,e),s=!i._.jsonEquals(this.storeParams.pivotCols,o),a=!i._.jsonEquals(this.storeParams.valueCols,t);(r||n||s||a)&&this.resetRootStore()}else this.resetRootStore()},t.prototype.destroyRootStore=function(){this.rootNode&&this.rootNode.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},t.prototype.refreshAfterSort=function(e,t){this.storeParams&&(this.storeParams.sortModel=e);var o=this.getRootStore();o&&(o.refreshAfterSort(t),this.onStoreUpdated())},t.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new i.Fxk(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.eventService.dispatchEvent({type:i.zW2.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi}),this.dispatchModelUpdated(!0)},t.prototype.columnsToValueObjects=function(e){var t=this;return e.map(function(e){return{id:e.getId(),aggFunc:e.getAggFunc(),displayName:t.columnModel.getDisplayNameForColumn(e,"model"),field:e.getColDef().field}})},t.prototype.createStoreParams=function(){var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),t=this.columnsToValueObjects(this.columnModel.getValueColumns()),o=this.columnsToValueObjects(this.columnModel.getPivotColumns()),r=this.gridOptionsWrapper.isDynamicRowHeight();return{valueCols:t,rowGroupCols:e,pivotCols:o,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new i.at1,dynamicRowHeight:r}},t.prototype.getParams=function(){return this.storeParams},t.prototype.dispatchModelUpdated=function(e){void 0===e&&(e=!1),this.eventService.dispatchEvent({type:i.zW2.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1})},t.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},t.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},t.prototype.updateRowIndexesAndBounds=function(){var e=this.getRootStore();e&&e.setDisplayIndexes(new i.at1,{value:0})},t.prototype.retryLoads=function(){var e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())},t.prototype.getRow=function(e){var t=this.getRootStore();if(t)return t.getRowUsingDisplayIndex(e)},t.prototype.expandAll=function(e){this.pauseStoreUpdateListening=!0,this.forEachNode(function(t){t.group&&t.setExpanded(e)}),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},t.prototype.refreshAfterFilter=function(e,t){this.storeParams&&(this.storeParams.filterModel=e);var o=this.getRootStore();o&&(o.refreshAfterFilter(t),this.onStoreUpdated())},t.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},t.prototype.getRowCount=function(){var e=this.getRootStore();return e?e.getDisplayIndexEnd():0},t.prototype.getTopLevelRowCount=function(){var e=this.getRootStore();return e?e.getRowCount():1},t.prototype.getTopLevelRowDisplayedIndex=function(e){var t=this.getRootStore();return t?t.getTopLevelRowDisplayedIndex(e):e},t.prototype.getRowBounds=function(e){var t=this.getRootStore();return t?t.getRowBounds(e):{rowTop:0,rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber()}},t.prototype.getRowIndexAtPixel=function(e){var t=this.getRootStore();return e<=0||!t?0:t.getRowIndexAtPixel(e)},t.prototype.isEmpty=function(){return!1},t.prototype.isRowsToRender=function(){return null!=this.getRootStore()&&this.getRowCount()>0},t.prototype.getType=function(){return i.gTE.ROW_MODEL_TYPE_SERVER_SIDE},t.prototype.forEachNode=function(e){var t=this.getRootStore();t&&t.forEachNodeDeep(e)},t.prototype.forEachNodeAfterFilterAndSort=function(e){var t=this.getRootStore();t&&t.forEachNodeDeepAfterFilterAndSort(e)},t.prototype.executeOnStore=function(e,t){var o=this.getRootStore();if(o){var r=o.getChildStore(e);r&&t(r)}},t.prototype.refreshStore=function(e){void 0===e&&(e={}),this.executeOnStore(e.route?e.route:[],function(t){return t.refreshStore(1==e.purge)})},t.prototype.getStoreState=function(){var e=[],t=this.getRootStore();return t&&t.addStoreStates(e),e},t.prototype.getNodesInRangeForSelection=function(e,t){return i._.exists(t)&&e.parent!==t.parent?[]:e.parent.childStore.getRowNodesInRange(t,e)},t.prototype.getRowNode=function(e){var t;return this.forEachNode(function(o){o.id===e&&(t=o),o.detailNode&&o.detailNode.id===e&&(t=o.detailNode)}),t},t.prototype.isRowPresent=function(e){return!!this.getRowNode(e.id)},pr([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),pr([(0,i.fsG)("filterManager")],t.prototype,"filterManager",void 0),pr([(0,i.fsG)("sortController")],t.prototype,"sortController",void 0),pr([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),pr([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),pr([(0,i.fsG)("rowRenderer")],t.prototype,"rowRenderer",void 0),pr([(0,i.fsG)("ssrmSortService")],t.prototype,"sortListener",void 0),pr([(0,i.fsG)("ssrmNodeManager")],t.prototype,"nodeManager",void 0),pr([(0,i.fsG)("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),pr([(0,i.fsG)("beans")],t.prototype,"beans",void 0),pr([i.FXL],t.prototype,"destroyDatasource",null),pr([i.NqP],t.prototype,"addEventListeners",null),pr([i.FXL],t.prototype,"destroyRootStore",null),pr([(0,i.Vu6)("rowModel")],t)}(i.AS9),dr=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),hr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},fr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return dr(t,e),t.prototype.loadFromDatasource=function(e){var t=e.storeParams,o=e.parentBlock,r=e.parentNode.getGroupKeys();if(t.datasource){var n={successCallback:e.successCallback,success:e.success,failCallback:e.failCallback,fail:e.fail,request:{startRow:e.startRow,endRow:e.endRow,rowGroupCols:t.rowGroupCols,valueCols:t.valueCols,pivotCols:t.pivotCols,pivotMode:t.pivotMode,groupKeys:r,filterModel:t.filterModel,sortModel:t.sortModel},parentNode:e.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};window.setTimeout(function(){t.datasource&&o.isAlive()?t.datasource.getRows(n):e.failCallback()},0)}},t.prototype.getChildStore=function(e,t,o){if(i._.missingOrEmpty(e))return t;var r=o(e[0]);if(r){var n=e.slice(1,e.length),s=r.childStore;return s?s.getChildStore(n):null}return null},t.prototype.isServerRefreshNeeded=function(e,t,o){if(o.valueColChanged||o.secondaryColChanged)return!0;var r=e.level+1;return!(r<t.length&&!(o.changedColumns.indexOf(t[r].id)>-1))},hr([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),hr([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),hr([(0,i.Vu6)("ssrmStoreUtils")],t)}(i.AS9),gr=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),mr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},vr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gr(t,e),t.prototype.postConstruct=function(){this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.usingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},t.prototype.createRowNode=function(e){var t=new i.Fxk(this.beans);return t.setRowHeight(null!=e.rowHeight?e.rowHeight:this.rowHeight),t.group=e.group,t.leafGroup=e.leafGroup,t.level=e.level,t.uiLevel=e.level,t.parent=e.parent,t.stub=!0,t.group&&(t.expanded=!1,t.field=e.field,t.rowGroupColumn=e.rowGroupColumn),t},t.prototype.destroyRowNodes=function(e){var t=this;e&&e.forEach(function(e){return t.destroyRowNode(e)})},t.prototype.destroyRowNode=function(e,t){void 0===t&&(t=!1),e.childStore&&!t&&(this.destroyBean(e.childStore),e.childStore=null),e.clearRowTopAndRowIndex(),null!=e.id&&this.nodeManager.removeNode(e)},t.prototype.setTreeGroupInfo=function(e){var t=this.gridOptionsWrapper.getIsServerSideGroupFunc(),o=this.gridOptionsWrapper.getServerSideGroupKeyFunc();null!=t&&(e.setGroup(t(e.data)),e.group&&null!=o&&(e.key=o(e.data))),e.group||null==e.childStore||(this.destroyBean(e.childStore),e.childStore=null)},t.prototype.setRowGroupInfo=function(e){e.key=this.valueService.getValue(e.rowGroupColumn,e),null==e.key&&i._.doOnce(function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),e.rowGroupColumn&&console.warn("column = "+e.rowGroupColumn.getId()),console.warn("data is ",e.data)},"ServerSideBlock-CannotHaveNullOrUndefinedForKey")},t.prototype.setMasterDetailInfo=function(e){var t=this.gridOptionsWrapper.getIsRowMasterFunc();e.master=null==t||t(e.data)},t.prototype.updateDataIntoRowNode=function(e,t){e.updateData(t),this.usingTreeData&&this.setTreeGroupInfo(e)},t.prototype.setDataIntoRowNode=function(e,t,o,r){e.stub=!1,i._.exists(t)?(e.setDataAndId(t,o),this.usingTreeData?this.setTreeGroupInfo(e):e.group?this.setRowGroupInfo(e):this.usingMasterDetail&&this.setMasterDetailInfo(e)):(e.setDataAndId(void 0,void 0),e.key=null),(this.usingTreeData||e.group)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),i._.exists(t)&&e.setRowHeight(this.gridOptionsWrapper.getRowHeightForNode(e,!1,r).height)},t.prototype.setChildCountIntoRowNode=function(e){var t=this.gridOptionsWrapper.getChildCountFunc();t&&(e.allChildrenCount=t(e.data))},t.prototype.setGroupDataIntoRowNode=function(e){var t=this,o=this.columnModel.getGroupDisplayColumns(),r=this.gridOptionsWrapper.isTreeData();o.forEach(function(o){if(null==e.groupData&&(e.groupData={}),r)e.groupData[o.getColId()]=e.key;else if(o.isRowGroupDisplayed(e.rowGroupColumn.getId())){var n=t.valueService.getValue(e.rowGroupColumn,e);e.groupData[o.getColId()]=n}})},t.prototype.clearDisplayIndex=function(e){e.clearRowTopAndRowIndex(),e.group&&i._.exists(e.childStore)&&e.childStore.clearDisplayIndexes(),e.master&&e.detailNode&&e.detailNode.clearRowTopAndRowIndex()},t.prototype.setDisplayIndex=function(e,t,o){if(e.setRowIndex(t.next()),e.setRowTop(o.value),o.value+=e.rowHeight,e.master&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(t.next()),e.detailNode.setRowTop(o.value),o.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex()),e.group&&i._.exists(e.childStore)){var r=e.childStore;e.expanded?r.setDisplayIndexes(t,o):r.clearDisplayIndexes()}},t.prototype.binarySearchForDisplayIndex=function(e,t){var o=0,r=t.length-1;if(i._.missing(r)||i._.missing(o))console.warn("AG Grid: error: topPointer = "+r+", bottomPointer = "+o);else for(;;){var n=Math.floor((o+r)/2),s=t[n];if(s.rowIndex===e)return s;var a=s.detailNode;if(s.master&&s.expanded&&a&&a.rowIndex===e)return s.detailNode;var l=s.childStore;if(s.expanded&&l&&l.isDisplayIndexInStore(e))return l.getRowUsingDisplayIndex(e);if(s.rowIndex<e)o=n+1;else{if(!(s.rowIndex>e))return void console.warn("AG Grid: error: unable to locate rowIndex = "+e+" in cache");r=n-1}}},t.prototype.extractRowBounds=function(e,t){var o=function(e){return{rowHeight:e.rowHeight,rowTop:e.rowTop}};if(e.rowIndex===t)return o(e);if(e.group&&e.expanded&&i._.exists(e.childStore)){var r=e.childStore;if(r.isDisplayIndexInStore(t))return r.getRowBounds(t)}else if(e.master&&e.expanded&&i._.exists(e.detailNode)&&e.detailNode.rowIndex===t)return o(e.detailNode)},t.prototype.getIndexAtPixel=function(e,t){if(e.isPixelInRange(t))return e.rowIndex;var o=e.detailNode;if(e.master&&e.expanded&&o&&o.isPixelInRange(t))return e.detailNode.rowIndex;if(e.group&&e.expanded&&i._.exists(e.childStore)){var r=e.childStore;if(r.isPixelInRange(t))return r.getRowIndexAtPixel(t)}return null},t.prototype.createNodeIdPrefix=function(e){for(var t=[],o=e;o&&o.level>=0;)t.push(o.key),o=o.parent;if(t.length>0)return t.reverse().join("-")},t.prototype.checkOpenByDefault=function(e){if(e.isExpandable()){var t=this.gridOptionsWrapper.getIsServerSideGroupOpenByDefaultFunc();t&&t({data:e.data,rowNode:e})&&window.setTimeout(function(){return e.setExpanded(!0)},0)}},mr([(0,i.fsG)("valueService")],t.prototype,"valueService",void 0),mr([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),mr([(0,i.fsG)("ssrmNodeManager")],t.prototype,"nodeManager",void 0),mr([(0,i.fsG)("beans")],t.prototype,"beans",void 0),mr([i.NqP],t.prototype,"postConstruct",null),mr([(0,i.Vu6)("ssrmBlockUtils")],t)}(i.AS9),yr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Cr=function(){function e(){this.rowNodes={}}return e.prototype.addRowNode=function(e){var t=e.id;this.rowNodes[t]&&(console.warn("AG Grid: Duplicate node id "+e.id+". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),console.warn("first instance",this.rowNodes[t].data),console.warn("second instance",e.data)),this.rowNodes[t]=e},e.prototype.removeNode=function(e){var t=e.id;this.rowNodes[t]&&(this.rowNodes[t]=void 0)},e.prototype.clear=function(){this.rowNodes={}},yr([i.FXL],e.prototype,"clear",null),yr([(0,i.Vu6)("ssrmNodeManager")],e)}(),wr=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Sr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Er=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.asyncTransactions=[],t}return wr(t,e),t.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()},t.prototype.applyTransactionAsync=function(e,t){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:t})},t.prototype.scheduleExecuteAsync=function(){var e=this,t=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout(function(){e.executeAsyncTransactions()},t)},t.prototype.executeAsyncTransactions=function(){var e=this;if(this.asyncTransactions){var t=[],o=[],r=[],n=!1;if(this.asyncTransactions.forEach(function(s){var a;e.serverSideRowModel.executeOnStore(s.transaction.route,function(e){a=e.applyTransaction(s.transaction)}),null==a&&(a={status:i.Qk6.StoreNotFound}),o.push(a),a.status==i.Qk6.StoreLoading?r.push(s):(s.callback&&t.push(function(){return s.callback(a)}),a.status===i.Qk6.Applied&&(n=!0))}),t.length>0&&window.setTimeout(function(){t.forEach(function(e){return e()})},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=r,n&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:i.zW2.EVENT_STORE_UPDATED})),o.length>0){var s={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),type:i.zW2.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:o};this.eventService.dispatchEvent(s)}}},t.prototype.flushAsyncTransactions=function(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},t.prototype.applyTransaction=function(e){var t;return this.serverSideRowModel.executeOnStore(e.route,function(o){t=o.applyTransaction(e)}),t?(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:i.zW2.EVENT_STORE_UPDATED}),t):{status:i.Qk6.StoreNotFound}},Sr([(0,i.fsG)("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Sr([(0,i.fsG)("valueCache")],t.prototype,"valueCache",void 0),Sr([(0,i.fsG)("rowModel")],t.prototype,"serverSideRowModel",void 0),Sr([i.NqP],t.prototype,"postConstruct",null),Sr([(0,i.Vu6)("ssrmTransactionManager")],t)}(i.AS9),Ar=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),br=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ar(t,e),t.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()&&this.addManagedListener(this.eventService,i.zW2.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},t.prototype.onRowGroupOpened=function(e){var t=e.node;if(t.expanded){if(t.master)this.createDetailNode(t);else if(i._.missing(t.childStore)){var o=this.serverSideRowModel.getParams();t.childStore=this.createBean(this.storeFactory.createStore(o,t))}}else this.gridOptionsWrapper.isPurgeClosedRowNodes()&&i._.exists(t.childStore)&&(t.childStore=this.destroyBean(t.childStore));this.eventService.dispatchEvent({type:i.zW2.EVENT_STORE_UPDATED})},t.prototype.createDetailNode=function(e){if(i._.exists(e.detailNode))return e.detailNode;var t=new i.Fxk(this.beans);t.detail=!0,t.selectable=!1,t.parent=e,i._.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1;var o=this.gridOptionsWrapper.getRowHeightForNode(t).height;return t.rowHeight=o||200,e.detailNode=t,t},br([(0,i.fsG)("rowModel")],t.prototype,"serverSideRowModel",void 0),br([(0,i.fsG)("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),br([(0,i.fsG)("beans")],t.prototype,"beans",void 0),br([i.NqP],t.prototype,"postConstruct",null),br([(0,i.Vu6)("ssrmExpandListener")],t)}(i.AS9),Dr=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Or=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dr(t,e),t.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()&&this.addManagedListener(this.eventService,i.zW2.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},t.prototype.extractSortModel=function(){var e=this.sortController.getSortModel();return this.gridOptionsWrapper.isTreeData()||(this.replaceAutoGroupColumnWithActualRowGroupColumns(e),this.removeMultiColumnPrefixOnColumnIds(e)),e},t.prototype.removeMultiColumnPrefixOnColumnIds=function(e){if(this.gridOptionsWrapper.isGroupMultiAutoColumn())for(var t=i.gTE.GROUP_AUTO_COLUMN_ID+"-",o=0;o<e.length;++o)e[o].colId.indexOf(t)>-1&&(e[o].colId=e[o].colId.substr(t.length))},t.prototype.replaceAutoGroupColumnWithActualRowGroupColumns=function(e){var t=e.find(function(e){return e.colId==i.gTE.GROUP_AUTO_COLUMN_ID});if(t){var o=e.indexOf(t);i._.removeFromArray(e,t);var r=this.columnModel.getRowGroupColumns().filter(function(t){return 0==e.filter(function(e){return e.colId===t.getColId()}).length}).map(function(e){return{colId:e.getId(),sort:t.sort}});i._.insertArrayIntoArray(e,r,o)}},t.prototype.onSortChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var t=this.extractSortModel(),o=this.findChangedColumnsInSort(t,e.sortModel),r=this.listenerUtils.isSortingWithValueColumn(o),n=this.listenerUtils.isSortingWithSecondaryColumn(o);this.serverSideRowModel.refreshAfterSort(t,{valueColChanged:r,secondaryColChanged:n,changedColumns:o})}},t.prototype.findChangedColumnsInSort=function(e,t){var o=[];return[e,t].forEach(function(e){if(e){var t=e.map(function(e){return e.colId});o=o.concat(t)}}),o.filter(function(o){var r=t.find(function(e){return e.colId===o}),n=e.find(function(e){return e.colId===o});return function(e,t){return(e?e.sort:null)!==(t?t.sort:null)}(r,n)||function(o,r){return(o?t.indexOf(o):-1)!==(r?e.indexOf(r):-1)}(r,n)})},Or([(0,i.fsG)("sortController")],t.prototype,"sortController",void 0),Or([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Or([(0,i.fsG)("rowModel")],t.prototype,"serverSideRowModel",void 0),Or([(0,i.fsG)("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),Or([i.NqP],t.prototype,"postConstruct",null),Or([(0,i.Vu6)("ssrmSortService")],t)}(i.AS9),Pr=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),xr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Tr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pr(t,e),t.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()&&this.addManagedListener(this.eventService,i.zW2.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},t.prototype.onFilterChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var t=this.filterManager.getFilterModel(),o=this.findChangedColumns(t,e?e.filterModel:{}),r=this.listenerUtils.isSortingWithValueColumn(o),n=this.listenerUtils.isSortingWithSecondaryColumn(o);this.serverSideRowModel.refreshAfterFilter(t,{valueColChanged:r,secondaryColChanged:n,changedColumns:o})}},t.prototype.findChangedColumns=function(e,t){var o={};Object.keys(e).forEach(function(e){return o[e]=!0}),Object.keys(t).forEach(function(e){return o[e]=!0});var r=[];return Object.keys(o).forEach(function(o){JSON.stringify(e[o])!=JSON.stringify(t[o])&&r.push(o)}),r},xr([(0,i.fsG)("rowModel")],t.prototype,"serverSideRowModel",void 0),xr([(0,i.fsG)("filterManager")],t.prototype,"filterManager",void 0),xr([(0,i.fsG)("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),xr([i.NqP],t.prototype,"postConstruct",null),xr([(0,i.Vu6)("ssrmFilterListener")],t)}(i.AS9),Nr=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),_r=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Ir=function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gr=function(e){function t(t,o,r,n,i){var s=e.call(this,t)||this;return s.ssrmParams=r,s.storeParams=n,s.parentRowNode=o,s.startRow=t*n.cacheBlockSize,s.parentStore=i,s.level=o.level+1,s.groupLevel=r.rowGroupCols?s.level<r.rowGroupCols.length:void 0,s.leafGroup=!!r.rowGroupCols&&s.level===r.rowGroupCols.length-1,s}return Nr(t,e),t.prototype.postConstruct=function(){this.usingTreeData=this.gridOptionsWrapper.isTreeData(),!this.usingTreeData&&this.groupLevel&&(this.groupField=this.ssrmParams.rowGroupCols[this.level].field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),this.setData([])},t.prototype.isDisplayIndexInBlock=function(e){return e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.isBlockBefore=function(e){return e>=this.displayIndexEnd},t.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.getBlockHeightPx=function(){return this.blockHeightPx},t.prototype.getBlockTopPx=function(){return this.blockTopPx},t.prototype.isGroupLevel=function(){return this.groupLevel},t.prototype.getGroupField=function(){return this.groupField},t.prototype.prefixId=function(e){return null!=this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()},t.prototype.getBlockStateJson=function(){return{id:this.prefixId(this.getId()),state:{blockNumber:this.getId(),startRow:this.startRow,endRow:this.startRow+this.storeParams.cacheBlockSize,pageStatus:this.getState()}}},t.prototype.isAnyNodeOpen=function(){return this.rowNodes.filter(function(e){return e.expanded}).length>0},t.prototype.forEachNode=function(e,t,o,r){void 0===t&&(t=new i.at1),this.rowNodes.forEach(function(n){if(e(n,t.next()),o&&n.childStore){var i=n.childStore;r?i.forEachNodeDeepAfterFilterAndSort(e,t):i.forEachNodeDeep(e,t)}})},t.prototype.forEachNodeDeep=function(e,t){this.forEachNode(e,t,!0,!1)},t.prototype.forEachNodeAfterFilterAndSort=function(e,t){this.forEachNode(e,t,!0,!0)},t.prototype.forEachNodeShallow=function(e,t){this.forEachNode(e,t,!1,!1)},t.prototype.getLastAccessed=function(){return this.lastAccessed},t.prototype.getRowUsingLocalIndex=function(e){return this.rowNodes[e-this.startRow]},t.prototype.touchLastAccessed=function(){this.lastAccessed=this.ssrmParams.lastAccessedSequence.next()},t.prototype.processServerFail=function(){this.parentStore.onBlockLoadFailed(this)},t.prototype.retryLoads=function(){this.getState()===i.NlK.STATE_FAILED&&(this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad(),this.setData()),this.forEachNodeShallow(function(e){e.childStore&&e.childStore.retryLoads()})},t.prototype.processServerResult=function(e){this.parentStore.onBlockLoaded(this,e)},t.prototype.setData=function(e,t){var o=this;void 0===e&&(e=[]),void 0===t&&(t=!1),this.destroyRowNodes();for(var r=this.parentStore.getRowCount(),n=this.getId()*this.storeParams.cacheBlockSize,i=Math.min(n+this.storeParams.cacheBlockSize,r)-n,s=this.columnModel.getAllDisplayedAutoHeightCols().length>0?this.parentStore.getCachedBlockHeight(this.getId()):void 0,a=s?Math.round(s/i):void 0,l=function(r){var n=r<e.length,i=function(i){var s=null!=i?i:o.blockUtils.createRowNode({field:o.groupField,group:o.groupLevel,leafGroup:o.leafGroup,level:o.level,parent:o.parentRowNode,rowGroupColumn:o.rowGroupColumn,rowHeight:a});if(n){var l=e[r];if(i)o.blockUtils.updateDataIntoRowNode(s,l);else{var u=o.prefixId(o.startRow+r);o.blockUtils.setDataIntoRowNode(s,l,u,a),o.blockUtils.checkOpenByDefault(s)}o.parentStore.removeDuplicateNode(s.id),o.nodeManager.addRowNode(s),o.allNodesMap[s.id]=s}return t&&(s.failedLoad=!0),s},s=u.gridOptionsWrapper.getRowIdFunc(),l=void 0;if(s&&n){var p=e[r],c=u.parentRowNode.getGroupKeys(),d=s({data:p,level:u.level,parentKeys:c.length>0?c:void 0});l=i(u.parentStore.retrieveNodeFromCache(d))}l||(l=i()),u.rowNodes.push(l)},u=this,p=0;p<i;p++)l(p)},t.prototype.removeDuplicateNode=function(e){if(this.getState()!=i.NlK.STATE_LOADED){var t=this.allNodesMap[e];if(t){this.blockUtils.destroyRowNode(t);var o=this.rowNodes.indexOf(t),r=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});this.rowNodes[o]=r}}},t.prototype.refresh=function(){this.getState()!==i.NlK.STATE_WAITING_TO_LOAD&&this.setStateWaitingToLoad()},t.prototype.destroyRowNodes=function(){var e,t=this;null===(e=this.rowNodes)||void 0===e||e.forEach(function(e){var o=t.parentStore.isNodeCached(e.id);t.blockUtils.destroyRowNode(e,o)}),this.rowNodes=[],this.allNodesMap={}},t.prototype.setBeans=function(e){this.logger=e.create("ServerSideBlock")},t.prototype.getRowUsingDisplayIndex=function(e){return this.touchLastAccessed(),this.blockUtils.binarySearchForDisplayIndex(e,this.rowNodes)},t.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:this.startRow,endRow:this.startRow+this.storeParams.cacheBlockSize,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},t.prototype.isPixelInRange=function(e){return e>=this.blockTopPx&&e<this.blockTopPx+this.blockHeightPx},t.prototype.getRowBounds=function(e){var t,o,r;this.touchLastAccessed();try{for(var n=Ir(this.rowNodes),i=n.next();!i.done&&null==(r=this.blockUtils.extractRowBounds(i.value,e));i=n.next());}catch(s){t={error:s}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}return r},t.prototype.getRowIndexAtPixel=function(e){var t,o;this.touchLastAccessed();var r=null;try{for(var n=Ir(this.rowNodes),i=n.next();!i.done&&null==(r=this.blockUtils.getIndexAtPixel(i.value,e));i=n.next());}catch(s){t={error:s}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}return r},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexEnd=void 0,this.displayIndexStart=void 0,this.rowNodes.forEach(function(t){return e.blockUtils.clearDisplayIndex(t)})},t.prototype.setDisplayIndexes=function(e,t){var o=this;this.displayIndexStart=e.peek(),this.blockTopPx=t.value,this.rowNodes.forEach(function(r){return o.blockUtils.setDisplayIndex(r,e,t)}),this.displayIndexEnd=e.peek(),this.blockHeightPx=t.value-this.blockTopPx},_r([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),_r([(0,i.fsG)("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),_r([(0,i.fsG)("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),_r([(0,i.fsG)("ssrmNodeManager")],t.prototype,"nodeManager",void 0),_r([(0,i.fsG)("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),_r([i.NqP],t.prototype,"postConstruct",null),_r([i.FXL],t.prototype,"destroyRowNodes",null),_r([(0,o=(0,i.qaB)("loggerFactory"),function(e,t){o(e,t,0)})],t.prototype,"setBeans",null),t;var o}(i.NlK),Fr=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Lr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},kr=(()=>(function(e){e[e.FOUND=0]="FOUND",e[e.CONTINUE_FIND=1]="CONTINUE_FIND",e[e.BREAK_FIND=2]="BREAK_FIND"}(kr||(kr={})),kr))(),Vr=function(e){function t(o,r,n){var i=e.call(this)||this;return i.blocks={},i.blockHeights={},i.lastRowIndexKnown=!1,i.displayIndexStart=0,i.displayIndexEnd=0,i.cacheTopPixel=0,i.info={},i.refreshedNodeCache={},i.ssrmParams=o,i.storeParams=r,i.parentRowNode=n,i.rowCount=t.INITIAL_ROW_COUNT,i}return Fr(t,e),t.prototype.postConstruct=function(){this.defaultRowHeight=this.gridOptionsWrapper.getRowHeightAsNumber()},t.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(t){return e.destroyBlock(t)}),this.blockUtils.destroyRowNodes(Object.values(this.refreshedNodeCache))},t.prototype.setBeans=function(e){this.logger=e.create("ServerSideCache")},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},t.prototype.retryLoads=function(){this.getBlocksInOrder().forEach(function(e){return e.retryLoads()})},t.prototype.onBlockLoadFailed=function(e){e.setData([],!0),this.fireCacheUpdatedEvent()},t.prototype.onBlockLoaded=function(e,t){this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+t.rowCount);var o=t.storeInfo||t.groupLevelInfo;o&&Object.assign(this.info,o),t.rowData||i._.doOnce(function(){return console.warn('AG Grid: "params.rowData" is missing from Server-Side Row Model success() callback. Please use the "rowData" attribute. If no data is returned, set an empty list.',t)},"InfiniteStore.noData");var r=null!=t.rowCount&&t.rowCount>=0?t.rowCount:void 0;this.isAlive()&&(this.checkRowCount(e,r),e.setData(t.rowData),this.destroyAllBlocksPastVirtualRowCount(),this.fireCacheUpdatedEvent())},t.prototype.purgeBlocksIfNeeded=function(e){var o=this,r=this.getBlocksInOrder().filter(function(t){return t!=e});r.sort(function(e,t){return t.getLastAccessed()-e.getLastAccessed()});var n=this.storeParams.maxBlocksInCache>0,i=n?this.storeParams.maxBlocksInCache-1:null,s=t.MAX_EMPTY_BLOCKS_TO_KEEP-1;r.forEach(function(e,t){if(e.getState()===Gr.STATE_WAITING_TO_LOAD&&t>=s||n&&t>=i){if(e.isAnyNodeOpen())return;if(o.isBlockCurrentlyDisplayed(e))return;if(o.isBlockFocused(e))return;o.destroyBlock(e)}})},t.prototype.isBlockFocused=function(e){var t=this.focusService.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;var o=e.getDisplayIndexStart(),r=e.getDisplayIndexEnd();return null!=r&&null!=o&&t.rowIndex>=o&&t.rowIndex<r},t.prototype.isBlockCurrentlyDisplayed=function(e){var t=e.getDisplayIndexStart(),o=e.getDisplayIndexEnd()-1;return this.rowRenderer.isRangeInRenderedViewport(t,o)},t.prototype.removeDuplicateNode=function(e){this.getBlocksInOrder().forEach(function(t){return t.removeDuplicateNode(e)})},t.prototype.checkRowCount=function(e,o){if("number"==typeof o&&o>=0)this.rowCount=o,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var r=(e.getId()+1)*this.storeParams.cacheBlockSize+t.OVERFLOW_SIZE;this.rowCount<r&&(this.rowCount=r)}},t.prototype.forEachNodeDeep=function(e,t){void 0===t&&(t=new i.at1),this.getBlocksInOrder().forEach(function(o){return o.forEachNodeDeep(e,t)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,t){void 0===t&&(t=new i.at1),this.getBlocksInOrder().forEach(function(o){return o.forEachNodeAfterFilterAndSort(e,t)})},t.prototype.getBlocksInOrder=function(){return i._.getAllValuesInObject(this.blocks).sort(function(e,t){return e.getId()-t.getId()})},t.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.rowNodeBlockLoader.removeBlock(e)},t.prototype.fireCacheUpdatedEvent=function(){this.eventService.dispatchEvent({type:i.zW2.EVENT_STORE_UPDATED})},t.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,t=[];this.getBlocksInOrder().forEach(function(o){o.getId()*e.storeParams.cacheBlockSize>=e.rowCount&&t.push(o)}),t.length>0&&t.forEach(function(t){return e.destroyBlock(t)})},t.prototype.refreshStore=function(e){0==this.getRowCount()||e?this.resetStore():this.refreshBlocks(),this.fireCacheUpdatedEvent()},t.prototype.isNodeCached=function(e){return!!this.refreshedNodeCache[e]},t.prototype.retrieveNodeFromCache=function(e){var t=this.refreshedNodeCache[e];return t&&delete this.refreshedNodeCache[e],t},t.prototype.buildRowNodeCache=function(){var e={};this.getBlocksInOrder().forEach(function(t){t.rowNodes.forEach(function(t){t.group&&(e[t.id]=t)})}),this.refreshedNodeCache=e},t.prototype.refreshBlocks=function(){this.buildRowNodeCache(),this.getBlocksInOrder().forEach(function(e){e.refresh()}),this.lastRowIndexKnown=!1,this.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.resetStore=function(){this.destroyAllBlocks(),this.lastRowIndexKnown=!1,(this.columnModel.isAutoRowHeightActive()||0===this.rowCount)&&(this.rowCount=t.INITIAL_ROW_COUNT)},t.prototype.getRowNodesInRange=function(e,t){var o=[],r=-1,n=!1;i._.missing(e)&&(n=!0);var s=!1;return this.getBlocksInOrder().forEach(function(i){s||(n&&r+1!==i.getId()?s=!0:(r=i.getId(),i.forEachNodeShallow(function(r){var i=r===e||r===t;(n||i)&&o.push(r),i&&(n=!n)})))}),s||n?[]:o},t.prototype.findBlockAndExecute=function(e,t,o){var r,n=!1,i=!1,s=null;return this.getBlocksInOrder().forEach(function(o){if(!n&&!i){var a=e(o);a==kr.FOUND?(r=t(o),n=!0):a==kr.CONTINUE_FIND?s=o:a==kr.BREAK_FIND&&(i=!0)}}),n||(r=o(s)),r},t.prototype.getRowBounds=function(e){var t=this;return this.findBlockAndExecute(function(t){return t.isDisplayIndexInBlock(e)?kr.FOUND:t.isBlockBefore(e)?kr.CONTINUE_FIND:kr.BREAK_FIND},function(t){return t.getRowBounds(e)},function(o){var r,n;return null!==o?(r=o.getBlockTopPx()+o.getBlockHeightPx(),n=o.getDisplayIndexEnd()):(r=t.cacheTopPixel,n=t.displayIndexStart),{rowHeight:t.defaultRowHeight,rowTop:r+(e-n)*t.defaultRowHeight}})},t.prototype.getRowIndexAtPixel=function(e){var t=this,o=this.findBlockAndExecute(function(t){return t.isPixelInRange(e)?kr.FOUND:t.getBlockTopPx()<e?kr.CONTINUE_FIND:kr.BREAK_FIND},function(t){return t.getRowIndexAtPixel(e)},function(o){var r,n;o?(r=o.getBlockTopPx()+o.getBlockHeightPx(),n=o.getDisplayIndexEnd()):(r=t.cacheTopPixel,n=t.displayIndexStart);for(var i=t.storeParams.cacheBlockSize,s=t.defaultRowHeight*i,a=o?o.getId()+1:0,l=function(o){var n=t.getCachedBlockHeight(o),i=null!=n?n:s;return{height:i,pixelInBlock:e<=i+r}},u=l(a);!u.pixelInBlock;)r+=u.height,n+=i,u=l(++a);return n+(0|Math.floor((e-r)/(u.height/i)))}),r=this.getDisplayIndexEnd()-1;return Math.min(o,r)},t.prototype.clearDisplayIndexes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.getBlocksInOrder().forEach(function(e){return e.clearDisplayIndexes()})},t.prototype.setDisplayIndexes=function(e,t){var o=this;this.displayIndexStart=e.peek(),this.cacheTopPixel=t.value;var r=-1,n=this.storeParams.cacheBlockSize;this.getBlocksInOrder().forEach(function(s){var a=s.getId(),l=a-r-1,u=l*n;u>0&&e.skip(u);for(var p=1;p<=l;p++){var c=a-p;i._.exists(o.blockHeights[c])?t.value+=o.blockHeights[c]:t.value+=n*o.defaultRowHeight}r=a,s.setDisplayIndexes(e,t),o.blockHeights[a]=s.getBlockHeightPx()});var s=(r+1)*n-1,a=this.getRowCount()-s-1;a>0&&(e.skip(a),t.value+=a*this.defaultRowHeight),this.displayIndexEnd=e.peek(),this.cacheHeightPixels=t.value-this.cacheTopPixel},t.prototype.getRowUsingDisplayIndex=function(e,t){var o=this;if(void 0===t&&(t=!1),this.isDisplayIndexInStore(e))return this.findBlockAndExecute(function(t){return t.isDisplayIndexInBlock(e)?kr.FOUND:t.isBlockBefore(e)?kr.CONTINUE_FIND:kr.BREAK_FIND},function(t){return t.getRowUsingDisplayIndex(e)},function(r){if(!t){var n,s,a,l=o.storeParams.cacheBlockSize;if(r)for(n=r.getId()+1,s=r.getDisplayIndexEnd(),a=r.getBlockHeightPx()+r.getBlockTopPx();!(e>=s&&e<s+l);){s+=l;var u=o.blockHeights[n];i._.exists(u)?a+=u:a+=o.defaultRowHeight*l,n++}else n=Math.floor((e-o.displayIndexStart)/l),s=o.displayIndexStart+n*l,a=o.cacheTopPixel+n*l*o.defaultRowHeight;return o.logger.log("block missing, rowIndex = "+e+", creating #"+n+", displayIndexStart = "+s),o.createBlock(n,s,{value:a}).getRowUsingDisplayIndex(e)}})},t.prototype.getTopLevelRowDisplayedIndex=function(e){var t=this.storeParams.cacheBlockSize,o=Math.floor(e/t);return this.findBlockAndExecute(function(e){return e.getId()===o?kr.FOUND:e.getId()<o?kr.CONTINUE_FIND:kr.BREAK_FIND},function(t){return t.getRowUsingLocalIndex(e).rowIndex},function(o){if(!o)return e;var r=t*(o.getId()+1)-1,n=o.getRowUsingLocalIndex(r);return(n.expanded&&n.childStore?n.childStore.getDisplayIndexEnd()-1:n.expanded&&n.detailNode?n.detailNode.rowIndex:n.rowIndex)+(e-r)})},t.prototype.addStoreStates=function(e){e.push({infiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.rowCount,lastRowIndexKnown:this.lastRowIndexKnown,info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(function(t){return t.addStoreStates(e)})},t.prototype.getCachedBlockHeight=function(e){return this.blockHeights[e]},t.prototype.createBlock=function(e,t,o){var r=this.createBean(new Gr(e,this.parentRowNode,this.ssrmParams,this.storeParams,this));return r.setDisplayIndexes(new i.at1(t),o),this.blocks[r.getId()]=r,this.purgeBlocksIfNeeded(r),this.rowNodeBlockLoader.addBlock(r),r},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.isDisplayIndexInStore=function(e){return 0!==this.getRowCount()&&e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.applyTransaction=function(e){return{status:i.Qk6.StoreWrongType}},t.prototype.getChildStore=function(e){var t=this;return this.storeUtils.getChildStore(e,this,function(e){var o=null;return t.getBlocksInOrder().forEach(function(t){t.forEachNodeShallow(function(t){t.key==e&&(o=t)},new i.at1)}),o})},t.prototype.isPixelInRange=function(e){return 0!==this.getRowCount()&&e>=this.cacheTopPixel&&e<this.cacheTopPixel+this.cacheHeightPixels},t.prototype.refreshAfterFilter=function(e){this.gridOptionsWrapper.isServerSideFilterAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)?this.resetStore():this.forEachChildStoreShallow(function(t){return t.refreshAfterFilter(e)})},t.prototype.refreshAfterSort=function(e){this.gridOptionsWrapper.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)?this.resetStore():this.forEachChildStoreShallow(function(t){return t.refreshAfterSort(e)})},t.prototype.forEachChildStoreShallow=function(e){this.getBlocksInOrder().forEach(function(t){t.isGroupLevel()&&t.forEachNodeShallow(function(t){var o=t.childStore;o&&e(o)},new i.at1)})},t.MAX_EMPTY_BLOCKS_TO_KEEP=2,t.INITIAL_ROW_COUNT=1,t.OVERFLOW_SIZE=1,Lr([(0,i.fsG)("rowRenderer")],t.prototype,"rowRenderer",void 0),Lr([(0,i.fsG)("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Lr([(0,i.fsG)("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),Lr([(0,i.fsG)("focusService")],t.prototype,"focusService",void 0),Lr([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Lr([(0,i.fsG)("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),Lr([i.NqP],t.prototype,"postConstruct",null),Lr([i.FXL],t.prototype,"destroyAllBlocks",null),Lr([(0,o=(0,i.qaB)("loggerFactory"),function(e,t){o(e,t,0)})],t.prototype,"setBeans",null),t;var o}(i.AS9),Br=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Wr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Hr=function(e){function t(t,o,r){var n=e.call(this,0)||this;return n.nodeIdSequence=new i.at1,n.info={},n.ssrmParams=t,n.parentRowNode=r,n.level=r.level+1,n.groupLevel=t.rowGroupCols?n.level<t.rowGroupCols.length:void 0,n.leafGroup=!!t.rowGroupCols&&n.level===t.rowGroupCols.length-1,n}return Br(t,e),t.prototype.postConstruct=function(){var e=this;this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel&&(this.groupField=this.ssrmParams.rowGroupCols[this.level].field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]),this.initialiseRowNodes(),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc(function(){return e.rowNodeBlockLoader.removeBlock(e)})},t.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},t.prototype.initialiseRowNodes=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!1),this.destroyRowNodes();for(var o=0;o<e;o++){var r=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});t&&(r.failedLoad=!0),this.allRowNodes.push(r),this.nodesAfterFilter.push(r),this.nodesAfterSort.push(r)}},t.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},t.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},t.prototype.getStartRow=function(){return 0},t.prototype.getEndRow=function(){return this.nodesAfterSort.length},t.prototype.createDataNode=function(e,t){var o=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});null!=t?i._.insertIntoArray(this.allRowNodes,o,t):this.allRowNodes.push(o);var r=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(o,e,r,void 0),this.nodeManager.addRowNode(o),this.blockUtils.checkOpenByDefault(o),this.allNodesMap[o.id]=o,o},t.prototype.prefixId=function(e){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()},t.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},t.prototype.processServerResult=function(e){if(this.isAlive()){var t=e.storeInfo||e.groupLevelInfo;t&&Object.assign(this.info,t);var o=this.allRowNodes.length>0?this.allNodesMap:void 0;this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},e.rowData||i._.doOnce(function(){return console.warn('AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.',e)},"FullStore.noData"),this.createOrRecycleNodes(o,e.rowData),o&&this.blockUtils.destroyRowNodes(i._.getAllValuesInObject(o)),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},t.prototype.createOrRecycleNodes=function(e,t){var o=this;t&&t.forEach(function(t){var r=function(t){if(e){var r=o.gridOptionsWrapper.getRowIdFunc();if(r){var n=o.parentRowNode.getGroupKeys(),i=r({data:t,parentKeys:n.length>0?n:void 0,level:o.level}),s=e[i];if(s)return delete e[i],s}}}(t);r?function(e,t){o.allNodesMap[e.id]=e,o.blockUtils.updateDataIntoRowNode(e,t),o.allRowNodes.push(e)}(r,t):o.createDataNode(t)})},t.prototype.flushAsyncTransactions=function(){var e=this;window.setTimeout(function(){return e.transactionManager.flushAsyncTransactions()},0)},t.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},t.prototype.sortRowNodes=function(){var e=this.gridOptionsWrapper.isServerSideSortAllLevels()||this.gridOptionsWrapper.isServerSideSortOnServer(),t=this.sortController.getSortOptions();this.nodesAfterSort=e||!t||0==t.length?this.nodesAfterFilter:this.rowNodeSorter.doFullSort(this.nodesAfterFilter,t)},t.prototype.filterRowNodes=function(){var e=this;this.nodesAfterFilter=this.gridOptionsWrapper.isServerSideFilterAllLevels()||this.gridOptionsWrapper.isServerSideFilterOnServer()||this.groupLevel?this.allRowNodes:this.allRowNodes.filter(function(t){return e.filterManager.doesRowPassFilter({rowNode:t})})},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach(function(t){return e.blockUtils.clearDisplayIndex(t)})},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.isDisplayIndexInStore=function(e){return 0!==this.getRowCount()&&e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.setDisplayIndexes=function(e,t){var o=this;this.displayIndexStart=e.peek(),this.topPx=t.value;var r={};this.nodesAfterSort.forEach(function(n){o.blockUtils.setDisplayIndex(n,e,t),r[n.id]=!0}),this.allRowNodes.forEach(function(e){r[e.id]||o.blockUtils.clearDisplayIndex(e)}),this.displayIndexEnd=e.peek(),this.heightPx=t.value-this.topPx},t.prototype.forEachNodeDeep=function(e,t){void 0===t&&(t=new i.at1),this.allRowNodes.forEach(function(o){e(o,t.next());var r=o.childStore;r&&r.forEachNodeDeep(e,t)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,t){void 0===t&&(t=new i.at1),this.nodesAfterSort.forEach(function(o){e(o,t.next());var r=o.childStore;r&&r.forEachNodeDeepAfterFilterAndSort(e,t)})},t.prototype.getRowUsingDisplayIndex=function(e){if(this.isDisplayIndexInStore(e))return this.blockUtils.binarySearchForDisplayIndex(e,this.nodesAfterSort)},t.prototype.getRowBounds=function(e){for(var t=0;t<this.nodesAfterSort.length;t++){var o=this.blockUtils.extractRowBounds(this.nodesAfterSort[t],e);if(o)return o}return null},t.prototype.isPixelInRange=function(e){return e>=this.topPx&&e<this.topPx+this.heightPx},t.prototype.getRowIndexAtPixel=function(e){var t=this;if(e<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(e>=this.topPx+this.heightPx){var o=this.nodesAfterSort[this.nodesAfterSort.length-1];if(e>=o.rowTop+o.rowHeight&&o.expanded){if(o.childStore&&o.childStore.getRowCount()>0)return o.childStore.getRowIndexAtPixel(e);if(o.detailNode)return o.detailNode.rowIndex}return o.rowIndex}var r=null;return this.nodesAfterSort.forEach(function(o){var n=t.blockUtils.getIndexAtPixel(o,e);null!=n&&(r=n)}),null==r?this.displayIndexEnd-1:r},t.prototype.getChildStore=function(e){var t=this;return this.storeUtils.getChildStore(e,this,function(e){return t.allRowNodes.find(function(t){return t.key==e})})},t.prototype.forEachChildStoreShallow=function(e){this.allRowNodes.forEach(function(t){var o=t.childStore;o&&e(o)})},t.prototype.refreshAfterFilter=function(e){var t=this.gridOptionsWrapper.isServerSideFilterOnServer(),o=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(this.gridOptionsWrapper.isServerSideFilterAllLevels()||t&&o)return this.refreshStore(!0),void this.sortRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(function(t){return t.refreshAfterFilter(e)})},t.prototype.refreshAfterSort=function(e){var t=this.gridOptionsWrapper.isServerSideSortOnServer(),o=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(this.gridOptionsWrapper.isServerSideSortAllLevels()||t&&o)return this.refreshStore(!0),void this.filterRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(function(t){return t.refreshAfterSort(e)})},t.prototype.applyTransaction=function(e){switch(this.getState()){case i.NlK.STATE_FAILED:return{status:i.Qk6.StoreLoadingFailed};case i.NlK.STATE_LOADING:return{status:i.Qk6.StoreLoading};case i.NlK.STATE_WAITING_TO_LOAD:return{status:i.Qk6.StoreWaitingToLoad}}var t=this.gridOptionsWrapper.getIsApplyServerSideTransactionFunc();if(t&&!t({transaction:e,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info}))return{status:i.Qk6.Cancelled};var o={status:i.Qk6.Applied,remove:[],update:[],add:[]},r=[];return this.executeAdd(e,o),this.executeRemove(e,o,r),this.executeUpdate(e,o,r),this.filterAndSortNodes(),this.updateSelection(r),o},t.prototype.updateSelection=function(e){if(e.length>0){e.forEach(function(e){e.setSelected(!1,!1,!0)});var t={type:i.zW2.EVENT_SELECTION_CHANGED,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};this.eventService.dispatchEvent(t)}},t.prototype.executeAdd=function(e,t){var o=this,r=e.add,n=e.addIndex;i._.missingOrEmpty(r)||("number"==typeof n&&n>=0?r.reverse().forEach(function(e){var r=o.createDataNode(e,n);t.add.push(r)}):r.forEach(function(e){var r=o.createDataNode(e);t.add.push(r)}))},t.prototype.executeRemove=function(e,t,o){var r=this,n=e.remove;if(null!=n){var i={};n.forEach(function(e){var n=r.lookupRowNode(e);n&&(n.isSelected()&&o.push(n),n.clearRowTopAndRowIndex(),i[n.id]=!0,delete r.allNodesMap[n.id],t.remove.push(n),r.nodeManager.removeNode(n))}),this.allRowNodes=this.allRowNodes.filter(function(e){return!i[e.id]})}},t.prototype.executeUpdate=function(e,t,o){var r=this,n=e.update;null!=n&&n.forEach(function(e){var n=r.lookupRowNode(e);n&&(n.updateData(e),!n.selectable&&n.isSelected()&&o.push(n),t.update.push(n))})},t.prototype.lookupRowNode=function(e){var t,o=this.gridOptionsWrapper.getRowIdFunc();if(null!=o){var r=this.level,n=this.parentRowNode.getGroupKeys(),i=o({data:e,parentKeys:n.length>0?n:void 0,level:r});if(!(t=this.allNodesMap[i]))return console.error("AG Grid: could not find row id="+i+", data item was not found for this id"),null}else if(!(t=this.allRowNodes.find(function(t){return t.data===e})))return console.error("AG Grid: could not find data item as object was not found",e),null;return t},t.prototype.addStoreStates=function(e){e.push({infiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow(function(t){return t.addStoreStates(e)})},t.prototype.refreshStore=function(e){e&&this.initialiseRowNodes(this.nodesAfterSort?this.nodesAfterSort.length:1),this.scheduleLoad(),this.fireStoreUpdatedEvent()},t.prototype.retryLoads=function(){this.getState()===i.NlK.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow(function(e){return e.retryLoads()})},t.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.fireStoreUpdatedEvent=function(){this.eventService.dispatchEvent({type:i.zW2.EVENT_STORE_UPDATED})},t.prototype.getRowCount=function(){return this.nodesAfterSort.length},t.prototype.getTopLevelRowDisplayedIndex=function(e){return this.nodesAfterSort[e].rowIndex},t.prototype.isLastRowIndexKnown=function(){return this.getState()==i.NlK.STATE_LOADED},t.prototype.getRowNodesInRange=function(e,t){var o=[],r=!1;return i._.missing(e)&&(r=!0),this.nodesAfterSort.forEach(function(n){var i=n===e||n===t;(r||i)&&o.push(n),i&&(r=!r)}),r?[]:o},Wr([(0,i.fsG)("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),Wr([(0,i.fsG)("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),Wr([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Wr([(0,i.fsG)("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Wr([(0,i.fsG)("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),Wr([(0,i.fsG)("sortController")],t.prototype,"sortController",void 0),Wr([(0,i.fsG)("ssrmNodeManager")],t.prototype,"nodeManager",void 0),Wr([(0,i.fsG)("filterManager")],t.prototype,"filterManager",void 0),Wr([(0,i.fsG)("ssrmTransactionManager")],t.prototype,"transactionManager",void 0),Wr([i.NqP],t.prototype,"postConstruct",null),Wr([i.FXL],t.prototype,"destroyRowNodes",null),t}(i.NlK),Ur=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},jr=function(){function e(){}return e.prototype.createStore=function(e,t){var o=this.getStoreParams(e,t);return new(o.infiniteScroll?Vr:Hr)(e,o,t)},e.prototype.getStoreParams=function(e,t){var o=this.getLevelSpecificParams(t),r=this.isInfiniteScroll(o);return{infiniteScroll:r,cacheBlockSize:this.getBlockSize(r,o),maxBlocksInCache:this.getMaxBlocksInCache(r,e,o)}},e.prototype.getMaxBlocksInCache=function(e,t,o){if(e){var r=o&&null!=o.maxBlocksInCache?o.maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache();if(null!=r&&r>=0)if(t.dynamicRowHeight)i._.doOnce(function(){return console.warn("AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.")},"storeFactory.maxBlocksInCache.dynamicRowHeight");else{if(!this.columnModel.isAutoRowHeightActive())return r;i._.doOnce(function(){return console.warn("AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.")},"storeFactory.maxBlocksInCache.autoRowHeightActive")}}},e.prototype.getBlockSize=function(e,t){if(e){var o=t&&null!=t.cacheBlockSize?t.cacheBlockSize:this.gridOptionsWrapper.getCacheBlockSize();return null!=o&&o>0?o:100}},e.prototype.getLevelSpecificParams=function(e){var t=this.gridOptionsWrapper.getServerSideGroupLevelParamsFunc();if(t){var o=t({level:e.level+1,parentRowNode:e.level>=0?e:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()});return null!=o.storeType&&(o.infiniteScroll="partial"===o.storeType),o}},e.prototype.isInfiniteScroll=function(e){return e&&null!=e.infiniteScroll?e.infiniteScroll:this.gridOptionsWrapper.isServerSideInfiniteScroll()},Ur([(0,i.fsG)("gridOptionsWrapper")],e.prototype,"gridOptionsWrapper",void 0),Ur([(0,i.fsG)("columnModel")],e.prototype,"columnModel",void 0),Ur([(0,i.Vu6)("ssrmStoreFactory")],e)}(),zr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},qr=function(){function e(){}return e.prototype.isSortingWithValueColumn=function(e){for(var t=this.columnModel.getValueColumns().map(function(e){return e.getColId()}),o=0;o<e.length;o++)if(t.indexOf(e[o])>-1)return!0;return!1},e.prototype.isSortingWithSecondaryColumn=function(e){if(!this.columnModel.getSecondaryColumns())return!1;for(var t=this.columnModel.getSecondaryColumns().map(function(e){return e.getColId()}),o=0;o<e.length;o++)if(t.indexOf(e[o])>-1)return!0;return!1},zr([(0,i.fsG)("columnModel")],e.prototype,"columnModel",void 0),zr([(0,i.Vu6)("ssrmListenerUtils")],e)}(),Zr={moduleName:i.GXE.ServerSideRowModelModule,rowModels:{serverSide:cr},beans:[Rr,Mr,fr,vr,Cr,Er,Tr,jr,qr],dependantModules:[_.f]},Kr=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s},Jr=function(){function e(t,o,r,n,i,s,a,l){this.nextId=0,this.allNodesMap={},this.rootNode=t,this.gridOptionsWrapper=o,this.eventService=r,this.columnModel=n,this.gridApi=i,this.columnApi=s,this.beans=l,this.selectionService=a,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=e.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[],this.postConstruct()}return e.prototype.postConstruct=function(){this.suppressParentsInRowNodes=this.gridOptionsWrapper.isSuppressParentsInRowNodes(),this.isRowMasterFunc=this.gridOptionsWrapper.getIsRowMasterFunc(),this.doingTreeData=this.gridOptionsWrapper.isTreeData(),this.doingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},e.prototype.getCopyOfNodesMap=function(){return i._.cloneObject(this.allNodesMap)},e.prototype.getRowNode=function(e){return this.allNodesMap[e]},e.prototype.setRowData=function(t){var o=this;if("string"!=typeof t){var r=this.rootNode,n=this.rootNode.sibling;r.childrenAfterFilter=null,r.childrenAfterGroup=null,r.childrenAfterAggFilter=null,r.childrenAfterSort=null,r.childrenMapped=null,r.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?r.allLeafChildren=t.map(function(t){return o.createNode(t,o.rootNode,e.TOP_LEVEL)}):(r.allLeafChildren=[],r.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=r.childrenAfterFilter,n.childrenAfterGroup=r.childrenAfterGroup,n.childrenAfterAggFilter=r.childrenAfterAggFilter,n.childrenAfterSort=r.childrenAfterSort,n.childrenMapped=r.childrenMapped,n.allLeafChildren=r.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},e.prototype.updateRowData=function(e,t){var o={remove:[],update:[],add:[]},r=[];return this.executeRemove(e,o,r),this.executeUpdate(e,o,r),this.executeAdd(e,o),this.updateSelection(r),t&&i._.sortRowNodesByOrder(this.rootNode.allLeafChildren,t),o},e.prototype.updateSelection=function(e){var t=e.length>0;t&&e.forEach(function(e){e.setSelected(!1,!1,!0)}),this.selectionService.updateGroupsFromChildrenSelections(),t&&this.eventService.dispatchEvent({type:i.zW2.EVENT_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi})},e.prototype.executeAdd=function(t,o){var r=this,n=t.add,s=t.addIndex;if(!i._.missingOrEmpty(n)){var a,l,u=n.map(function(t){return r.createNode(t,r.rootNode,e.TOP_LEVEL)});if("number"==typeof s&&s>=0){var p=this.rootNode.allLeafChildren,c=0===s?0:p.reduce(function(e,t,o){var r,n=t.rowIndex,i=null===(r=p[e])||void 0===r?void 0:r.rowIndex;return null!=n&&null!=i&&n<s&&n>i?o:e},0)+1;a=p.slice(0,c),l=p.slice(c,p.length)}else a=this.rootNode.allLeafChildren,l=[];this.rootNode.allLeafChildren=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Kr(arguments[t]));return e}(a,u,l),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),o.add=u}},e.prototype.executeRemove=function(e,t,o){var r=this,n=e.remove;if(!i._.missingOrEmpty(n)){var s={};n.forEach(function(e){var n=r.lookupRowNode(e);n&&(n.isSelected()&&o.push(n),n.clearRowTopAndRowIndex(),s[n.id]=!0,delete r.allNodesMap[n.id],t.remove.push(n))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(e){return!s[e.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},e.prototype.executeUpdate=function(t,o,r){var n=this,s=t.update;i._.missingOrEmpty(s)||s.forEach(function(t){var i=n.lookupRowNode(t);i&&(i.updateData(t),!i.selectable&&i.isSelected()&&r.push(i),n.setMasterForRow(i,t,e.TOP_LEVEL,!1),o.update.push(i))})},e.prototype.lookupRowNode=function(e){var t,o=this.gridOptionsWrapper.getRowIdFunc();if(o){var r=o({data:e,level:0});if(!(t=this.allNodesMap[r]))return console.error("AG Grid: could not find row id="+r+", data item was not found for this id"),null}else if(!(t=this.rootNode.allLeafChildren.find(function(t){return t.data===e})))return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return t||null},e.prototype.createNode=function(e,t,o){var r=new i.Fxk(this.beans);return r.group=!1,this.setMasterForRow(r,e,o,!0),t&&!this.suppressParentsInRowNodes&&(r.parent=t),r.level=o,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&console.warn("AG Grid: duplicate node id '"+r.id+"' detected from getRowId callback, this could cause issues in your grid."),this.allNodesMap[r.id]=r,this.nextId++,r},e.prototype.setMasterForRow=function(e,t,o,r){if(this.doingTreeData)e.setMaster(!1),r&&(e.expanded=!1);else if(e.setMaster(!!this.doingMasterDetail&&(!this.isRowMasterFunc||this.isRowMasterFunc(t))),r){var n=this.columnModel.getRowGroupColumns();e.expanded=!!e.master&&this.isExpanded(o+(n?n.length:0))}},e.prototype.isExpanded=function(e){var t=this.gridOptionsWrapper.getGroupDefaultExpanded();return-1===t||e<t},e.TOP_LEVEL=0,e.ROOT_NODE_ID="ROOT_NODE_ID",e}(),Xr=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Yr=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Qr=(()=>(function(e){e[e.Normal=0]="Normal",e[e.AfterFilter=1]="AfterFilter",e[e.AfterFilterAndSort=2]="AfterFilterAndSort",e[e.PivotNodes=3]="PivotNodes"}(Qr||(Qr={})),Qr))(),$r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowsToDisplay=[],t}return Xr(t,e),t.prototype.init=function(){var e=this.refreshModel.bind(this,{step:i.j_r.EVERYTHING}),t=!this.gridOptionsWrapper.isSuppressAnimationFrame(),o=this.refreshModel.bind(this,{step:i.j_r.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,o),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:i.j_r.PIVOT})),this.addManagedListener(this.eventService,i.zW2.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_COLUMN_PIVOT_MODE_CHANGED,e);var r=this.refreshModel.bind(this,{step:i.j_r.MAP,keepRenderedRows:!0,animate:t});this.addManagedListener(this.gridOptionsWrapper,i.wfB.PROP_GROUP_REMOVE_SINGLE_CHILDREN,r),this.addManagedListener(this.gridOptionsWrapper,i.wfB.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN,r),this.rootNode=new i.Fxk(this.beans),this.nodeManager=new Jr(this.rootNode,this.gridOptionsWrapper,this.eventService,this.columnModel,this.gridApi,this.columnApi,this.selectionService,this.beans)},t.prototype.start=function(){var e=this.gridOptionsWrapper.getRowData();e&&this.setRowData(e)},t.prototype.ensureRowHeightsValid=function(e,t,o,r){var n,i=!1;do{n=!1;for(var s=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(s,o),u=Math.min(a,r),p=l;p<=u;p++){var c=this.getRow(p);if(c.rowHeightEstimated){var d=this.gridOptionsWrapper.getRowHeightForNode(c);c.setRowHeight(d.height),n=!0,i=!0}}n&&this.setRowTopAndRowIndex()}while(n);return i},t.prototype.setRowTopAndRowIndex=function(){for(var e=this.gridOptionsWrapper.getDefaultRowHeight(),t=0,o=new Set,r=this.gridOptionsWrapper.getDomLayout()===i.gTE.DOM_LAYOUT_NORMAL,n=0;n<this.rowsToDisplay.length;n++){var s=this.rowsToDisplay[n];if(null!=s.id&&o.add(s.id),null==s.rowHeight){var a=this.gridOptionsWrapper.getRowHeightForNode(s,r,e);s.setRowHeight(a.height,a.estimated)}s.setRowTop(t),s.setRowIndex(n),t+=s.rowHeight}return o},t.prototype.clearRowTopAndRowIndex=function(e,t){var o=e.isActive(),r=function(e){e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},n=function(e){r(e),r(e.detailNode),r(e.sibling),e.hasChildren()&&e.childrenAfterGroup&&(o&&-1!=e.level&&!e.expanded||e.childrenAfterGroup.forEach(n))};n(this.rootNode)},t.prototype.ensureRowsAtPixel=function(e,t,o){var r=this;void 0===o&&(o=0);var n=this.getRowIndexAtPixel(t),s=this.getRow(n),a=!this.gridOptionsWrapper.isSuppressAnimationFrame();return s!==e[0]&&(e.forEach(function(e){i._.removeFromArray(r.rootNode.allLeafChildren,e)}),e.forEach(function(e,t){i._.insertIntoArray(r.rootNode.allLeafChildren,e,Math.max(n+o,0)+t)}),this.refreshModel({step:i.j_r.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:a}),!0)},t.prototype.highlightRowAtPixel=function(e,t){var o=null!=t?this.getRowIndexAtPixel(t):null,r=null!=o?this.getRow(o):null;if(r&&e&&r!==e&&null!=t){var n=this.getHighlightPosition(t,r);this.lastHighlightedRow&&this.lastHighlightedRow!==r&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),r.setHighlighted(n),this.lastHighlightedRow=r}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},t.prototype.getHighlightPosition=function(e,t){if(!t){var o=this.getRowIndexAtPixel(e);if(!(t=this.getRow(o||0)))return i.oh5.Below}return e-t.rowTop<t.rowHeight/2?i.oh5.Above:i.oh5.Below},t.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},t.prototype.isLastRowIndexKnown=function(){return!0},t.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},t.prototype.getTopLevelRowCount=function(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;var e=this.rootNode.childrenAfterAggFilter;return e?e.length:0},t.prototype.getTopLevelRowDisplayedIndex=function(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;var t=this.rootNode.childrenAfterSort[e];if(this.gridOptionsWrapper.isGroupHideOpenParents())for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},t.prototype.getRowBounds=function(e){if(i._.missing(this.rowsToDisplay))return null;var t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null},t.prototype.onRowGroupOpened=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:i.j_r.MAP,keepRenderedRows:!0,animate:e})},t.prototype.onFilterChanged=function(e){if(!e.afterDataChange){var t=this.gridOptionsWrapper.isAnimateRows(),o=0===e.columns.length||e.columns.some(function(e){return e.isPrimary()});this.refreshModel({step:o?i.j_r.FILTER:i.j_r.FILTER_AGGREGATES,keepRenderedRows:!0,animate:t})}},t.prototype.onSortChanged=function(){var e=this.gridOptionsWrapper.isAnimateRows();this.refreshModel({step:i.j_r.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})},t.prototype.getType=function(){return i.gTE.ROW_MODEL_TYPE_CLIENT_SIDE},t.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:i.j_r.PIVOT}):this.refreshModel({step:i.j_r.AGGREGATE})},t.prototype.createChangePath=function(e){var t=i._.missingOrEmpty(e),o=new i.Dkq(!1,this.rootNode);return(t||this.gridOptionsWrapper.isTreeData())&&o.setInactive(),o},t.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(e){if(!this.gridOptionsWrapper.isSuppressModelUpdateAfterUpdateTransaction())return!1;if(null==e.rowNodeTransactions)return!1;var t=e.rowNodeTransactions.filter(function(e){return null!=e.add&&e.add.length>0||null!=e.remove&&e.remove.length>0});return null==t||0==t.length},t.prototype.refreshModel=function(e){if(!this.isSuppressModelUpdateAfterUpdateTransaction(e)){var t=this.createChangePath(e.rowNodeTransactions);switch(e.step){case i.j_r.EVERYTHING:this.doRowGrouping(e.groupState,e.rowNodeTransactions,e.rowNodeOrder,t,!!e.afterColumnsChanged);case i.j_r.FILTER:this.doFilter(t);case i.j_r.PIVOT:this.doPivot(t);case i.j_r.AGGREGATE:this.doAggregate(t);case i.j_r.FILTER_AGGREGATES:this.doFilterAggregates(t);case i.j_r.SORT:this.doSort(e.rowNodeTransactions,t);case i.j_r.MAP:this.doRowsToDisplay()}var o=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(t,o),this.eventService.dispatchEvent({type:i.zW2.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1})}},t.prototype.isEmpty=function(){var e=i._.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return i._.missing(this.rootNode)||e||!this.columnModel.isReady()},t.prototype.isRowsToRender=function(){return i._.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},t.prototype.getNodesInRangeForSelection=function(e,t){var o,r=!t,n=!1,i=[],s=this.gridOptionsWrapper.isGroupSelectsChildren();return this.forEachNodeAfterFilterAndSort(function(a){var l=r&&!n;if(r||a!==t&&a!==e||(r=!0),!a.group||!s){var u=r&&!n,p=a.isParentOfNode(o);(u||p)&&i.push(a)}l&&(a!==t&&a!==e||(n=!0,o=a===t?t:e))}),i},t.prototype.setDatasource=function(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")},t.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},t.prototype.getRootNode=function(){return this.rootNode},t.prototype.getRow=function(e){return this.rowsToDisplay[e]},t.prototype.isRowPresent=function(e){return this.rowsToDisplay.indexOf(e)>=0},t.prototype.getRowIndexAtPixel=function(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;var t=0,o=this.rowsToDisplay.length-1;if(e<=0)return 0;if(i._.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;for(;;){var r=Math.floor((t+o)/2),n=this.rowsToDisplay[r];if(this.isRowInPixel(n,e))return r;n.rowTop<e?t=r+1:n.rowTop>e&&(o=r-1)}},t.prototype.isRowInPixel=function(e,t){return e.rowTop<=t&&e.rowTop+e.rowHeight>t},t.prototype.forEachLeafNode=function(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(t,o){return e(t,o)})},t.prototype.forEachNode=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup,e,Qr.Normal,0)},t.prototype.forEachNodeAfterFilter=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterAggFilter,e,Qr.AfterFilter,0)},t.prototype.forEachNodeAfterFilterAndSort=function(e){this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort,e,Qr.AfterFilterAndSort,0)},t.prototype.forEachPivotNode=function(e){this.recursivelyWalkNodesAndCallback([this.rootNode],e,Qr.PivotNodes,0)},t.prototype.recursivelyWalkNodesAndCallback=function(e,t,o,r){if(!e)return r;for(var n=0;n<e.length;n++){var i=e[n];if(t(i,r++),i.hasChildren()){var s=null;switch(o){case Qr.Normal:s=i.childrenAfterGroup;break;case Qr.AfterFilter:s=i.childrenAfterAggFilter;break;case Qr.AfterFilterAndSort:s=i.childrenAfterSort;break;case Qr.PivotNodes:s=i.leafGroup?null:i.childrenAfterSort}s&&(r=this.recursivelyWalkNodesAndCallback(s,t,o,r))}}return r},t.prototype.doAggregate=function(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doFilterAggregates=function(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},t.prototype.expandOrCollapseAll=function(e){var t=this.gridOptionsWrapper.isTreeData(),o=this.columnModel.isPivotActive(),r=function(n){n&&n.forEach(function(n){var s=function(){n.expanded=e,r(n.childrenAfterGroup)};t?i._.exists(n.childrenAfterGroup)&&s():o?!n.leafGroup&&s():n.group&&s()})};this.rootNode&&r(this.rootNode.childrenAfterGroup),this.refreshModel({step:i.j_r.MAP}),this.eventService.dispatchEvent({api:this.gridApi,columnApi:this.columnApi,type:i.zW2.EVENT_EXPAND_COLLAPSE_ALL,source:e?"expandAll":"collapseAll"})},t.prototype.doSort=function(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})},t.prototype.doRowGrouping=function(e,t,o,r,n){this.groupStage?(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:o,changedPath:r}):(this.groupStage.execute({rowNode:this.rootNode,changedPath:r,afterColumnsChanged:n}),this.restoreGroupState(e)),this.gridOptionsWrapper.isGroupSelectsChildren()&&this.selectionService.updateGroupsFromChildrenSelections(r)):(this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren())},t.prototype.restoreGroupState=function(e){e&&i._.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(t,o){"boolean"==typeof e[o]&&(t.expanded=e[o])})},t.prototype.doFilter=function(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.doPivot=function(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})},t.prototype.getGroupState=function(){if(!this.rootNode.childrenAfterGroup||!this.gridOptionsWrapper.isRememberGroupStateWhenNewData())return null;var e={};return i._.traverseNodesWithKey(this.rootNode.childrenAfterGroup,function(t,o){return e[o]=t.expanded}),e},t.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},t.prototype.getRowNode=function(e){if("string"==typeof e&&0==e.indexOf(i.Fxk.ID_PREFIX_ROW_GROUP)){var t=void 0;return this.forEachNode(function(o){o.id===e&&(t=o)}),t}return this.nodeManager.getRowNode(e)},t.prototype.setRowData=function(e){var t=this.getGroupState();this.nodeManager.setRowData(e),this.selectionService.reset(),this.filterManager.onNewRowsLoaded("rowDataUpdated"),this.eventService.dispatchEvent({type:i.zW2.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi}),this.refreshModel({step:i.j_r.EVERYTHING,groupState:t,newData:!0})},t.prototype.batchUpdateRowData=function(e,t){var o=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var r=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){o.executeBatchUpdateRowData()},r)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})},t.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},t.prototype.executeBatchUpdateRowData=function(){var e=this;this.valueCache.onDataChanged();var t=[],o=[],r=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(n){var i=e.nodeManager.updateRowData(n.rowDataTransaction,void 0);o.push(i),n.callback&&t.push(n.callback.bind(null,i)),"number"==typeof n.rowDataTransaction.addIndex&&(r=!0)}),this.commonUpdateRowData(o,void 0,r),t.length>0&&window.setTimeout(function(){t.forEach(function(e){return e()})},0),o.length>0){var n={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),type:i.zW2.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:o};this.eventService.dispatchEvent(n)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},t.prototype.updateRowData=function(e,t){this.valueCache.onDataChanged();var o=this.nodeManager.updateRowData(e,t);return this.commonUpdateRowData([o],t,"number"==typeof e.addIndex),o},t.prototype.createRowNodeOrder=function(){if(!this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()){var e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var t=0;t<this.rootNode.allLeafChildren.length;t++)e[this.rootNode.allLeafChildren[t].id]=t;return e}},t.prototype.commonUpdateRowData=function(e,t,o){var r=!this.gridOptionsWrapper.isSuppressAnimationFrame();o&&(t=this.createRowNodeOrder()),this.refreshModel({step:i.j_r.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:r}),this.filterManager.onNewRowsLoaded("rowDataUpdated"),this.eventService.dispatchEvent({type:i.zW2.EVENT_ROW_DATA_UPDATED,api:this.gridApi,columnApi:this.columnApi})},t.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},t.prototype.onRowHeightChanged=function(){this.refreshModel({step:i.j_r.MAP,keepRenderedRows:!0,keepEditingRows:!0})},t.prototype.resetRowHeights=function(){var e=!1;this.forEachNode(function(t){t.setRowHeight(t.rowHeight,!0);var o=t.detailNode;o&&o.setRowHeight(o.rowHeight,!0),e=!0}),e&&this.onRowHeightChanged()},Yr([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),Yr([(0,i.fsG)("selectionService")],t.prototype,"selectionService",void 0),Yr([(0,i.fsG)("filterManager")],t.prototype,"filterManager",void 0),Yr([(0,i.fsG)("valueCache")],t.prototype,"valueCache",void 0),Yr([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),Yr([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),Yr([(0,i.fsG)("animationFrameService")],t.prototype,"animationFrameService",void 0),Yr([(0,i.fsG)("beans")],t.prototype,"beans",void 0),Yr([(0,i.fsG)("filterStage")],t.prototype,"filterStage",void 0),Yr([(0,i.fsG)("sortStage")],t.prototype,"sortStage",void 0),Yr([(0,i.fsG)("flattenStage")],t.prototype,"flattenStage",void 0),Yr([(0,i.FiY)("groupStage")],t.prototype,"groupStage",void 0),Yr([(0,i.FiY)("aggregationStage")],t.prototype,"aggregationStage",void 0),Yr([(0,i.FiY)("pivotStage")],t.prototype,"pivotStage",void 0),Yr([(0,i.FiY)("filterAggregatesStage")],t.prototype,"filterAggregatesStage",void 0),Yr([i.NqP],t.prototype,"init",null),Yr([(0,i.Vu6)("rowModel")],t)}(i.AS9),en=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),tn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},on=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return en(t,e),t.prototype.execute=function(e){this.filterService.filter(e.changedPath)},tn([(0,i.fsG)("filterService")],t.prototype,"filterService",void 0),tn([(0,i.Vu6)("filterStage")],t)}(i.AS9),rn=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),nn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},sn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rn(t,e),t.prototype.execute=function(e){var t=this,o=this.sortController.getSortOptions(),r=i._.exists(o)&&o.length>0,n=r&&i._.exists(e.rowNodeTransactions)&&this.gridOptionsWrapper.isDeltaSort(),s=o.some(function(e){return!!t.columnModel.getGroupDisplayColumnForGroup(e.column.getId())});this.sortService.sort(o,r,n,e.rowNodeTransactions,e.changedPath,s)},nn([(0,i.fsG)("sortService")],t.prototype,"sortService",void 0),nn([(0,i.fsG)("sortController")],t.prototype,"sortController",void 0),nn([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),nn([(0,i.Vu6)("sortStage")],t)}(i.AS9),an=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ln=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return an(t,e),t.prototype.execute=function(e){var t=e.rowNode,o=[],r={value:0},n=this.columnModel.isPivotMode(),i=n&&t.leafGroup;return this.recursivelyAddToRowsToDisplay(i?[t]:t.childrenAfterSort,o,r,n,0),!i&&o.length>0&&this.gridOptionsWrapper.isGroupIncludeTotalFooter()&&(this.ensureFooterNodeExists(t),this.addRowNodeToRowsToDisplay(t.sibling,o,r,0)),o},t.prototype.recursivelyAddToRowsToDisplay=function(e,t,o,r,n){if(!i._.missingOrEmpty(e))for(var s=this.gridOptionsWrapper.isGroupHideOpenParents(),a=this.gridOptionsWrapper.isGroupRemoveSingleChildren(),l=!a&&this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren(),u=0;u<e.length;u++){var p=e[u],c=p.hasChildren(),d=a&&c&&1===p.childrenAfterGroup.length,h=l&&c&&p.leafGroup&&1===p.childrenAfterGroup.length;if(!(r&&!c||s&&p.expanded&&!p.master&&(!r||!p.leafGroup)||d||h)&&this.addRowNodeToRowsToDisplay(p,t,o,n),!r||!p.leafGroup)if(c){var f=d||h;(p.expanded||f)&&(this.recursivelyAddToRowsToDisplay(p.childrenAfterSort,t,o,r,f?n:n+1),this.gridOptionsWrapper.isGroupIncludeFooter()&&(this.ensureFooterNodeExists(p),this.addRowNodeToRowsToDisplay(p.sibling,t,o,n)))}else if(p.master&&p.expanded){var g=this.createDetailNode(p);this.addRowNodeToRowsToDisplay(g,t,o,n)}}},t.prototype.addRowNodeToRowsToDisplay=function(e,t,o,r){var n=this.gridOptionsWrapper.isGroupMultiAutoColumn();t.push(e),e.setUiLevel(n?0:r)},t.prototype.ensureFooterNodeExists=function(e){if(!i._.exists(e.sibling)){var t=new i.Fxk(this.beans);Object.keys(e).forEach(function(o){t[o]=e[o]}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,i._.exists(t.id)&&(t.id="rowGroupFooter_"+t.id),t.sibling=e,e.sibling=t}},t.prototype.createDetailNode=function(e){if(i._.exists(e.detailNode))return e.detailNode;var t=new i.Fxk(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,i._.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t},ln([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),ln([(0,i.fsG)("beans")],t.prototype,"beans",void 0),ln([(0,i.Vu6)("flattenStage")],t)}(i.AS9),pn=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),cn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.init=function(){this.postSortFunc=this.gridOptionsWrapper.getPostSortFunc()},t.prototype.sort=function(e,t,o,r,n,i){var s=this,a=this.gridOptionsWrapper.isGroupMaintainOrder(),l=this.columnModel.getAllGridColumns().some(function(e){return e.isRowGroupActive()}),u={};o&&r&&(u=this.calculateDirtyNodes(r));var p=this.columnModel.isPivotMode();n&&n.forEachChangedNodeDepthFirst(function(r){if(s.pullDownGroupDataForHideOpenParents(r.childrenAfterAggFilter,!0),!t||a&&l&&!r.leafGroup&&!i||p&&r.leafGroup){var c=r.childrenAfterAggFilter.slice(0);if(a&&r.childrenAfterSort){var d=r.childrenAfterSort.reduce(function(e,t,o){return e[t.id]=o,e},{});c.sort(function(e,t){return(d[e.id]||0)-(d[t.id]||0)})}r.childrenAfterSort=c}else r.childrenAfterSort=o?s.doDeltaSort(r,u,n,e):s.rowNodeSorter.doFullSort(r.childrenAfterAggFilter,e);r.sibling&&(r.sibling.childrenAfterSort=r.childrenAfterSort),s.updateChildIndexes(r),s.postSortFunc&&s.postSortFunc({nodes:r.childrenAfterSort})}),this.updateGroupDataForHideOpenParents(n)},t.prototype.calculateDirtyNodes=function(e){var t={},o=function(e){e&&e.forEach(function(e){return t[e.id]=!0})};return e&&e.forEach(function(e){o(e.add),o(e.update),o(e.remove)}),t},t.prototype.doDeltaSort=function(e,t,o,r){var n=this,i=e.childrenAfterAggFilter,s=e.childrenAfterSort;if(!s)return this.rowNodeSorter.doFullSort(i,r);var a={},l=[];i.forEach(function(e){t[e.id]||!o.canSkip(e)?l.push(e):a[e.id]=!0});var u=s.filter(function(e){return a[e.id]}),p=function(e,t){return{currentPos:t,rowNode:e}},c=l.map(p).sort(function(e,t){return n.rowNodeSorter.compareRowNodes(r,e,t)});return this.mergeSortedArrays(r,c,u.map(p)).map(function(e){return e.rowNode})},t.prototype.mergeSortedArrays=function(e,t,o){for(var r=[],n=0,i=0;n<t.length&&i<o.length;){var s=this.rowNodeSorter.compareRowNodes(e,t[n],o[i]);r.push(s<0?t[n++]:o[i++])}for(;n<t.length;)r.push(t[n++]);for(;i<o.length;)r.push(o[i++]);return r},t.prototype.updateChildIndexes=function(e){if(!i._.missing(e.childrenAfterSort))for(var t=e.childrenAfterSort,o=0;o<t.length;o++){var r=t[o],n=o===e.childrenAfterSort.length-1;r.setFirstChild(0===o),r.setLastChild(n),r.setChildIndex(o)}},t.prototype.updateGroupDataForHideOpenParents=function(e){var t=this;if(this.gridOptionsWrapper.isGroupHideOpenParents()){if(this.gridOptionsWrapper.isTreeData())return i._.doOnce(function(){return console.warn("AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).")},"sortService.hideOpenParentsWithTreeData"),!1;var o=function(e){t.pullDownGroupDataForHideOpenParents(e.childrenAfterSort,!1),e.childrenAfterSort.forEach(function(e){e.hasChildren()&&o(e)})};e&&e.executeFromRootNode(function(e){return o(e)})}},t.prototype.pullDownGroupDataForHideOpenParents=function(e,t){var o=this;this.gridOptionsWrapper.isGroupHideOpenParents()&&!i._.missing(e)&&e.forEach(function(e){o.columnModel.getGroupDisplayColumns().forEach(function(r){var n=r.getColDef().showRowGroup;if("string"==typeof n){var i=o.columnModel.getPrimaryColumn(n);if(i!==e.rowGroupColumn)if(t)e.setGroupValue(r.getId(),void 0);else{var s=e.getFirstChildOfFirstChild(i);s&&e.setGroupValue(r.getId(),s.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")})})},cn([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),cn([(0,i.fsG)("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),cn([i.NqP],t.prototype,"init",null),cn([(0,i.Vu6)("sortService")],t)}(i.AS9),hn=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),fn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hn(t,e),t.prototype.filter=function(e){var t=this.filterManager.isColumnFilterPresent()||this.filterManager.isQuickFilterPresent()||this.filterManager.isExternalFilterPresent();this.filterNodes(t,e)},t.prototype.filterNodes=function(e,t){var o=this,r=function(t,r){t.childrenAfterFilter=t.hasChildren()&&e&&!r?t.childrenAfterGroup.filter(function(e){var t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,r=e.data&&o.filterManager.doesRowPassFilter({rowNode:e});return t||r}):t.childrenAfterGroup,t.sibling&&(t.sibling.childrenAfterFilter=t.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var n=function(e,t){if(e.childrenAfterGroup)for(var i=0;i<e.childrenAfterGroup.length;i++){var s=e.childrenAfterGroup[i],a=t||o.filterManager.doesRowPassFilter({rowNode:s});s.childrenAfterGroup?n(e.childrenAfterGroup[i],a):r(s,a)}r(e,t)};t.executeFromRootNode(function(e){return n(e,!1)})}else t.forEachChangedNodeDepthFirst(function(e){return r(e,!1)},!0)},t.prototype.doingTreeDataFiltering=function(){return this.gridOptionsWrapper.isTreeData()&&!this.gridOptionsWrapper.isExcludeChildrenWhenTreeDataFiltering()},fn([(0,i.fsG)("filterManager")],t.prototype,"filterManager",void 0),fn([(0,i.Vu6)("filterService")],t)}(i.AS9),mn=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),vn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mn(t,e),t.prototype.postConstruct=function(){this.rowModel.getType()===i.gTE.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel)},t.prototype.isActive=function(){return this.gridOptionsWrapper.isImmutableData()},t.prototype.setRowData=function(e){var t=this.createTransactionForRowData(e);if(t){var o=function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s}(t,2),r=this.clientSideRowModel.updateRowData(o[0],o[1]);r&&this.rowRenderer.refreshFullWidthRows(r.update)}},t.prototype.createTransactionForRowData=function(e){if(i._.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var t=this.gridOptionsWrapper.getRowIdFunc();if(null!=t){var o={remove:[],update:[],add:[]},r=this.clientSideRowModel.getCopyOfNodesMap(),n=this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder()?void 0:{};return i._.exists(e)&&e.forEach(function(e,i){var s=t({data:e,level:0}),a=r[s];n&&(n[s]=i),a?(a.data!==e&&o.update.push(e),r[s]=void 0):o.add.push(e)}),i._.iterateObject(r,function(e,t){t&&o.remove.push(t.data)}),[o,n]}console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!")}},vn([(0,i.fsG)("rowModel")],t.prototype,"rowModel",void 0),vn([(0,i.fsG)("rowRenderer")],t.prototype,"rowRenderer",void 0),vn([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),vn([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),vn([(0,i.fsG)("filterManager")],t.prototype,"filterManager",void 0),vn([i.NqP],t.prototype,"postConstruct",null),vn([(0,i.Vu6)("immutableService")],t)}(i.AS9),Cn={moduleName:i.GXE.ClientSideRowModelModule,beans:[on,sn,un,dn,gn,yn],rowModels:{clientSide:$r}},wn=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Sn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},En=function(e){function t(t,o,r){var n=e.call(this,t)||this;return n.parentCache=o,n.params=r,n.startRow=t*r.blockSize,n.endRow=n.startRow+r.blockSize,n}return wn(t,e),t.prototype.postConstruct=function(){this.createRowNodes()},t.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},t.prototype.setDataAndId=function(e,t,o){!e.id&&e.alreadyRendered&&(e.alreadyRendered=!1),i._.exists(t)?e.setDataAndId(t,o.toString()):e.setDataAndId(void 0,void 0)},t.prototype.loadFromDatasource=function(){var e=this,t=this.createLoadParams();i._.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout(function(){e.params.datasource.getRows(t)},0)},t.prototype.processServerFail=function(){},t.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsWrapper.getContext()}},t.prototype.forEachNode=function(e,t,o){var r=this;this.rowNodes.forEach(function(n,i){r.startRow+i<o&&e(n,t.next())})},t.prototype.getLastAccessed=function(){return this.lastAccessed},t.prototype.getRow=function(e,t){return void 0===t&&(t=!1),t||(this.lastAccessed=this.params.lastAccessedSequence.next()),this.rowNodes[e-this.startRow]},t.prototype.getStartRow=function(){return this.startRow},t.prototype.getEndRow=function(){return this.endRow},t.prototype.createRowNodes=function(){this.rowNodes=[];for(var e=0;e<this.params.blockSize;e++){var t=this.startRow+e,o=new i.Fxk(this.beans);o.setRowHeight(this.params.rowHeight),o.uiLevel=0,o.setRowIndex(t),o.setRowTop(this.params.rowHeight*t),this.rowNodes.push(o)}},t.prototype.processServerResult=function(e){var t=this;this.rowNodes.forEach(function(o,r){t.setDataAndId(o,e.rowData?e.rowData[r]:void 0,t.startRow+r)}),this.parentCache.pageLoaded(this,null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0)},t.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(e){e.clearRowTopAndRowIndex()})},Sn([(0,i.fsG)("beans")],t.prototype,"beans",void 0),Sn([i.NqP],t.prototype,"postConstruct",null),Sn([i.FXL],t.prototype,"destroyRowNodes",null),t}(i.NlK),An=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),bn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Rn=function(e){function t(t){var o=e.call(this)||this;return o.lastRowIndexKnown=!1,o.blocks={},o.blockCount=0,o.rowCount=t.initialRowCount,o.params=t,o}return An(t,e),t.prototype.setBeans=function(e){this.logger=e.create("InfiniteCache")},t.prototype.getRow=function(e,t){void 0===t&&(t=!1);var o=Math.floor(e/this.params.blockSize),r=this.blocks[o];if(!r){if(t)return;r=this.createBlock(o)}return r.getRow(e)},t.prototype.createBlock=function(e){var t=this.createBean(new En(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t},t.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach(function(e){return e.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad())},t.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(t){return e.destroyBlock(t)})},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},t.prototype.pageLoaded=function(e,t){this.isAlive()&&(this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+t),this.checkRowCount(e,t),this.onCacheUpdated())},t.prototype.purgeBlocksIfNeeded=function(e){var o=this,r=this.getBlocksInOrder().filter(function(t){return t!=e});r.sort(function(e,t){return t.getLastAccessed()-e.getLastAccessed()});var n=this.params.maxBlocksInCache>0,i=n?this.params.maxBlocksInCache-1:null,s=t.MAX_EMPTY_BLOCKS_TO_KEEP-1;r.forEach(function(e,t){if(e.getState()===En.STATE_WAITING_TO_LOAD&&t>=s||n&&t>=i){if(o.isBlockCurrentlyDisplayed(e))return;if(o.isBlockFocused(e))return;o.removeBlockFromCache(e)}})},t.prototype.isBlockFocused=function(e){var t=this.focusService.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;var o=e.getStartRow(),r=e.getEndRow();return t.rowIndex>=o&&t.rowIndex<r},t.prototype.isBlockCurrentlyDisplayed=function(e){var t=e.getStartRow(),o=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,o)},t.prototype.removeBlockFromCache=function(e){e&&this.destroyBlock(e)},t.prototype.checkRowCount=function(e,t){if("number"==typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var o=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<o&&(this.rowCount=o)}},t.prototype.setRowCount=function(e,t){this.rowCount=e,i._.exists(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()},t.prototype.forEachNodeDeep=function(e){var t=this,o=new i.at1;this.getBlocksInOrder().forEach(function(r){return r.forEachNode(e,o,t.rowCount)})},t.prototype.getBlocksInOrder=function(){return i._.getAllValuesInObject(this.blocks).sort(function(e,t){return e.getId()-t.getId()})},t.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)},t.prototype.onCacheUpdated=function(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:i.zW2.EVENT_STORE_UPDATED}))},t.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,t=[];this.getBlocksInOrder().forEach(function(o){o.getId()*e.params.blockSize>=e.rowCount&&t.push(o)}),t.length>0&&t.forEach(function(t){return e.destroyBlock(t)})},t.prototype.purgeCache=function(){var e=this;this.getBlocksInOrder().forEach(function(t){return e.removeBlockFromCache(t)}),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},t.prototype.getRowNodesInRange=function(e,t){var o=this,r=[],n=-1,s=!1,a=new i.at1;i._.missing(e)&&(s=!0);var l=!1;return this.getBlocksInOrder().forEach(function(i){l||(s&&n+1!==i.getId()?l=!0:(n=i.getId(),i.forEachNode(function(o){var n=o===e||o===t;(s||n)&&r.push(o),n&&(s=!s)},a,o.rowCount)))}),l||s?[]:r},t.MAX_EMPTY_BLOCKS_TO_KEEP=2,bn([(0,i.fsG)("rowRenderer")],t.prototype,"rowRenderer",void 0),bn([(0,i.fsG)("focusService")],t.prototype,"focusService",void 0),bn([(0,o=(0,i.qaB)("loggerFactory"),function(e,t){o(e,t,0)})],t.prototype,"setBeans",null),bn([i.FXL],t.prototype,"destroyAllBlocks",null),t;var o}(i.AS9),Dn=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),On=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},t.prototype.ensureRowHeightsValid=function(e,t,o,r){return!1},t.prototype.init=function(){var e=this;this.gridOptionsWrapper.isRowModelInfinite()&&(this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return e.destroyCache()}),this.verifyProps())},t.prototype.verifyProps=function(){null!=this.gridOptionsWrapper.getInitialGroupOrderComparator()&&i._.doOnce(function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.")},"IRM.InitialGroupOrderComparator")},t.prototype.start=function(){this.setDatasource(this.gridOptionsWrapper.getDatasource())},t.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,i.zW2.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,i.zW2.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this))},t.prototype.onFilterChanged=function(){this.reset()},t.prototype.onSortChanged=function(){this.reset()},t.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},t.prototype.isSortModelDifferent=function(){return!i._.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},t.prototype.getType=function(){return i.gTE.ROW_MODEL_TYPE_INFINITE},t.prototype.setDatasource=function(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()},t.prototype.isEmpty=function(){return!this.infiniteCache},t.prototype.isRowsToRender=function(){return!!this.infiniteCache},t.prototype.getNodesInRangeForSelection=function(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]},t.prototype.reset=function(){if(this.datasource){null!=this.gridOptionsWrapper.getRowIdFunc()||this.selectionService.reset(),this.resetCache();var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}},t.prototype.createModelUpdatedEvent=function(){return{type:i.zW2.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newPage:!1,newData:!1,keepRenderedRows:!0,animate:!1}},t.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.defaultIfInvalid(this.gridOptionsWrapper.getInfiniteInitialRowCount(),1),maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache(),rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber(),overflowSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheOverflowSize(),1),blockSize:this.defaultIfInvalid(this.gridOptionsWrapper.getCacheBlockSize(),100),lastAccessedSequence:new i.at1},this.infiniteCache=this.createBean(new Rn(this.cacheParams))},t.prototype.defaultIfInvalid=function(e,t){return e>0?e:t},t.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},t.prototype.onCacheUpdated=function(){var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},t.prototype.getRow=function(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)},t.prototype.getRowNode=function(e){var t;return this.forEachNode(function(o){o.id===e&&(t=o)}),t},t.prototype.forEachNode=function(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)},t.prototype.getTopLevelRowCount=function(){return this.getRowCount()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return e},t.prototype.getRowIndexAtPixel=function(e){if(0!==this.rowHeight){var t=Math.floor(e/this.rowHeight),o=this.getRowCount()-1;return t>o?o:t}return 0},t.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},t.prototype.isRowPresent=function(e){return!!this.getRowNode(e.id)},t.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},t.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},t.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},t.prototype.setRowCount=function(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)},On([(0,i.fsG)("filterManager")],t.prototype,"filterManager",void 0),On([(0,i.fsG)("sortController")],t.prototype,"sortController",void 0),On([(0,i.fsG)("selectionService")],t.prototype,"selectionService",void 0),On([(0,i.fsG)("gridApi")],t.prototype,"gridApi",void 0),On([(0,i.fsG)("columnApi")],t.prototype,"columnApi",void 0),On([(0,i.fsG)("rowRenderer")],t.prototype,"rowRenderer",void 0),On([(0,i.fsG)("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),On([i.NqP],t.prototype,"init",null),On([i.FXL],t.prototype,"destroyDatasource",null),On([(0,i.Vu6)("rowModel")],t)}(i.AS9),Pn={moduleName:i.GXE.InfiniteRowModelModule,rowModels:{infinite:Mn}};const xn=function(e){return{"container-fluid":e}};let Tn=(()=>{class e{constructor(){this.extraModules=[],this.extraConfig={},this.isContainer=!1,this.gridApi=new n.vpe,this.modules=[Cn,lr,Pn,Zr]}generateGridConfig(){let e=this;this.gridConfig={defaultColDef:{flex:1,minWidth:100,sortable:!0,filter:"agTextColumnFilter",resizable:!0,sortingOrder:["asc","desc"],menuTabs:[],floatingFilter:!0,floatingFilterComponentParams:{suppressFilterButton:!0}},rowSelection:"multiple",suppressRowClickSelection:!0,rowDragManaged:!0,suppressMoveWhenRowDragging:!0,suppressDragLeaveHidesColumns:!0,columnDefs:this.colConfig,animateRows:!0,groupSelectsChildren:!0,groupDefaultExpanded:1,unSortIcon:!0,context:{actionFunction:this.actionFunction,parentComponent:this.parentComponent},suppressContextMenu:!0,onGridReady:function(t){e.gridApi.emit(t)}}}get agGridConfig(){return Object.assign(Object.assign({},this.gridConfig),this.extraConfig)}get agGridModules(){return[...this.modules,...this.extraModules]}ngOnInit(){this.generateGridConfig()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-ag-grid-custom"]],inputs:{colConfig:"colConfig",rowData:"rowData",extraModules:"extraModules",actionFunction:"actionFunction",parentComponent:"parentComponent",extraConfig:"extraConfig",isContainer:"isContainer"},outputs:{gridApi:"gridApi"},decls:3,vars:6,consts:[[1,"h-100",3,"ngClass"],[1,"h-100","ag-theme-balham"],[2,"height","100%","width","100%",3,"gridOptions","rowData","modules"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"ag-grid-angular",2),n.qZA(),n.qZA()),2&e&&(n.Q6J("ngClass",n.VKq(4,xn,t.isContainer)),n.xp6(2),n.Q6J("gridOptions",t.agGridConfig)("rowData",t.rowData)("modules",t.agGridModules))},directives:[r.mk,u],styles:[""]}),e})(),Nn=(()=>{class e{constructor(e){this.http=e,this.rowModelType="serverSide",this.colConfig=[{field:"recalling_firm",headerName:"Company Name",checkboxSelection:!0},{field:"status",headerName:"Status",valueFormatter:e=>{var t;return"terminated"==(null===(t=e.value)||void 0===t?void 0:t.toLowerCase())?"Disabled":"Enabled"}}],this.extraConfig={rowModelType:this.rowModelType,serverSideInfiniteScroll:!0,cacheBlockSize:10,blockLoadDebounceMillis:1500,overlayNoRowsTemplate:"No data found"},this.extraModules=[M,dt],this.totalRows=0,this.excelFileParams={fileName:"companies.xlsx"},this.csvFileParams={fileName:"companies.csv"}}ngOnInit(){}onGridReadyCB(e){this.grid=e,e.api.setServerSideDatasource(this.dataSource()),e.api.addGlobalListener((e,t)=>{"rowClicked"===e&&console.log(t.data)})}dataSource(){let e=this;return{getRows:t=>{let o="https://api.fda.gov/food/enforcement.json?limit=10&";t.request.sortModel.length&&(o+=`sort=${t.request.sortModel[0].colId}:${t.request.sortModel[0].sort}&`),Object.keys(t.request.filterModel).forEach(e=>{o+=`search=${e}:${t.request.filterModel[e].filter}&`}),o+=`skip=${t.request.startRow}`,console.log(o),e.http.get(o).subscribe(e=>{this.totalRows=e.meta.results.total,t.success({rowData:e.results,rowCount:void 0})},e=>{this.totalRows=0,t.success({rowData:[],rowCount:0}),this.grid.api.showNoRowsOverlay()})}}}deleteSelectedRows(){let e=this.grid.api.getSelectedNodes().map(e=>e.data);console.log(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(ht.eN))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-company"]],decls:21,vars:4,consts:[[1,"my-1"],[1,"d-flex","justify-content-between","mb-1","align-items-center"],[1,"ems-page-heading"],[1,"d-flex"],[1,"form-group","me-2"],["type","text","placeholder","Global Filter...",1,"form-control"],["ngbDropdown","","container","body",1,"d-inline"],["type","button","ngbDropdownToggle","",1,"btn","btn-info","btn-ems","btn-ems-green","me-2"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],[1,"my-1","dropdown-divider"],[1,"btn","btn-outline-success","btn-hollow-ems",3,"click"],[2,"height","550px"],[3,"colConfig","extraConfig","extraModules","gridApi"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n._uU(3),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n._UZ(6,"input",5),n.qZA(),n.TgZ(7,"div"),n.TgZ(8,"div",6),n.TgZ(9,"button",7),n._uU(10,"Export"),n.qZA(),n.TgZ(11,"div",8),n.TgZ(12,"button",9),n.NdJ("click",function(){return t.grid.api.exportDataAsExcel(t.excelFileParams)}),n._uU(13,"Export As Excel"),n.qZA(),n._UZ(14,"div",10),n.TgZ(15,"button",9),n.NdJ("click",function(){return t.grid.api.exportDataAsCsv(t.csvFileParams)}),n._uU(16,"Export As CSV"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"button",11),n.NdJ("click",function(){return t.deleteSelectedRows()}),n._uU(18,"Disable"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(19,"div",12),n.TgZ(20,"app-ag-grid-custom",13),n.NdJ("gridApi",function(e){return t.onGridReadyCB(e)}),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.hij("Companies (",t.totalRows,")"),n.xp6(17),n.Q6J("colConfig",t.colConfig)("extraConfig",t.extraConfig)("extraModules",t.extraModules))},directives:[d.jt,d.iD,d.Vi,d.TH,Tn],styles:[""]}),e})(),_n=(()=>{class e{constructor(e){this.http=e,this.rowModelType="serverSide",this.colConfig=[{field:"recall_number",headerName:"Security Profile",checkboxSelection:!0},{field:"city"},{field:"country"}],this.extraConfig={rowModelType:this.rowModelType,serverSideInfiniteScroll:!0,pagination:!0,paginationPageSize:10,cacheBlockSize:10,suppressPaginationPanel:!0,onPaginationChanged:()=>this.onPaginationChanged()},this.page=1,this.extraModules=[M,dt],this.excelFileParams={fileName:"security_profiles.xlsx"},this.csvFileParams={fileName:"security_profiles.csv"}}ngOnInit(){}onGridReadyCB(e){this.grid=e,e.api.setServerSideDatasource(this.dataSource())}dataSource(){let e=this;return{getRows:t=>{let o="https://api.fda.gov/food/enforcement.json?limit=10&";t.request.sortModel.length&&(o+=`_sort=${t.request.sortModel[0].colId}&_order=${t.request.sortModel[0].sort}&`),Object.keys(t.request.filterModel).forEach(e=>{o+=`${e}=${t.request.filterModel[e].filter}&`}),o+=`skip=${t.request.endRow}`,console.log(o),e.http.get(o).subscribe(e=>{this.totalRows=e.meta.results.total,t.success({rowData:e.results,rowCount:e.meta.results.total})})}}}loadPage(e){this.page=e,this.grid.api.paginationGoToPage(e-1)}onPaginationChanged(){var e;(null===(e=this.grid)||void 0===e?void 0:e.api)&&(this.totalRows=this.grid.api.getDisplayedRowCount())}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(ht.eN))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-security"]],decls:21,vars:11,consts:[[1,"my-1"],[1,"d-flex","justify-content-between","mb-1","align-items-center"],[1,"ems-page-heading"],[1,"d-flex"],[1,"form-group","me-2"],["type","text","placeholder","Global Filter...",1,"form-control"],["ngbDropdown","","container","body",1,"d-inline"],["type","button","ngbDropdownToggle","",1,"btn","btn-info","btn-ems","btn-ems-green","me-2"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],[1,"my-1","dropdown-divider"],[2,"height","500px"],[3,"colConfig","extraConfig","extraModules","gridApi"],[1,"ems-pagination-panel","d-flex","justify-content-end","px-2","py-1"],[1,"d-flex","justify-content-end",3,"pageSize","collectionSize","page","maxSize","rotate","ellipses","boundaryLinks","pageChange"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n._uU(3),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n._UZ(6,"input",5),n.qZA(),n.TgZ(7,"div"),n.TgZ(8,"div",6),n.TgZ(9,"button",7),n._uU(10,"Export"),n.qZA(),n.TgZ(11,"div",8),n.TgZ(12,"button",9),n.NdJ("click",function(){return t.grid.api.exportDataAsExcel(t.excelFileParams)}),n._uU(13,"Export As Excel"),n.qZA(),n._UZ(14,"div",10),n.TgZ(15,"button",9),n.NdJ("click",function(){return t.grid.api.exportDataAsCsv(t.csvFileParams)}),n._uU(16,"Export As CSV"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",11),n.TgZ(18,"app-ag-grid-custom",12),n.NdJ("gridApi",function(e){return t.onGridReadyCB(e)}),n.qZA(),n.qZA(),n.TgZ(19,"div",13),n.TgZ(20,"ngb-pagination",14),n.NdJ("pageChange",function(e){return t.page=e})("pageChange",function(e){return t.loadPage(e)}),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.hij("Security Profiles (",t.totalRows,")"),n.xp6(15),n.Q6J("colConfig",t.colConfig)("extraConfig",t.extraConfig)("extraModules",t.extraModules),n.xp6(2),n.Q6J("pageSize",10)("collectionSize",t.totalRows)("page",t.page)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0))},directives:[d.jt,d.iD,d.Vi,d.TH,Tn,d.N9],styles:[""]}),e})();var In=function(){function e(e,t,o){this.rowModel=e,this.filterParams=t,this.caseFormat=o}return e.prototype.extractUniqueValues=function(e){var t=this,o={},r=this.filterParams.colDef.keyCreator,n=function(e){var r=null!=e?t.caseFormat(e):"__<ag-grid-pseudo-null>__";r&&null==o[r]&&(o[r]=e)};return this.rowModel.forEachLeafNode(function(o){if(o.data&&e(o)){var s=t.filterParams,a=t.filterParams.valueGetter({api:s.api,colDef:s.colDef,column:s.column,columnApi:s.columnApi,context:s.context,data:o.data,getValue:function(e){return o.data[e]},node:o});r&&(a=r({value:a,colDef:t.filterParams.colDef,column:t.filterParams.column,node:o,data:o.data,api:t.filterParams.api,columnApi:t.filterParams.columnApi,context:t.filterParams.context})),null!=(a=i._.makeNull(a))&&Array.isArray(a)?a.forEach(function(e){var t=i._.toStringOrNull(i._.makeNull(e));n(t)}):n(i._.toStringOrNull(a))}}),i._.values(o)},e}(),Gn=(()=>(function(e){e[e.PROVIDED_LIST=0]="PROVIDED_LIST",e[e.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",e[e.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"}(Gn||(Gn={})),Gn))(),Fn=function(){function e(e,t,o,r,n){var s=this;this.filterParams=e,this.setIsLoading=t,this.valueFormatterService=o,this.translate=r,this.caseFormat=n,this.localEventService=new i.POd,this.miniFilterText=null,this.providedValues=null,this.allValues=[],this.availableValues=new Set,this.displayedValues=[],this.selectedValues=new Set,this.initialised=!1;var a=e.colDef,l=e.textFormatter,u=e.doesRowPassOtherFilter,p=e.suppressSorting,c=e.comparator,d=e.rowModel,h=e.values;this.column=e.column,this.formatter=l||i.QVL.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=u,this.suppressSorting=p||!1,this.comparator=c||a.comparator||i._.defaultComparator,d.getType()===i.gTE.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideValuesExtractor=new In(d,this.filterParams,this.caseFormat)),null==h?this.valuesType=Gn.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(h)?Gn.PROVIDED_LIST:Gn.PROVIDED_CALLBACK,this.providedValues=h),this.updateAllValues().then(function(e){return s.resetSelectionState(e||[])})}return e.prototype.addEventListener=function(e,t,o){this.localEventService.addEventListener(e,t,o)},e.prototype.removeEventListener=function(e,t,o){this.localEventService.removeEventListener(e,t,o)},e.prototype.refreshValues=function(){var e=this.getModel();return this.updateAllValues(),this.setModel(e)},e.prototype.overrideValues=function(e){var t=this;return new i.j_S(function(o){t.allValuesPromise.then(function(){t.valuesType=Gn.PROVIDED_LIST,t.providedValues=e,t.refreshValues().then(function(){return o()})})})},e.prototype.refreshAfterAnyFilterChanged=function(){var e=this;return this.showAvailableOnly()?this.allValuesPromise.then(function(t){return e.updateAvailableValues(t||[])}):i.j_S.resolve()},e.prototype.isInitialised=function(){return this.initialised},e.prototype.updateAllValues=function(){var e=this;return this.allValuesPromise=new i.j_S(function(t){switch(e.valuesType){case Gn.TAKEN_FROM_GRID_VALUES:case Gn.PROVIDED_LIST:var o=e.valuesType===Gn.TAKEN_FROM_GRID_VALUES?e.getValuesFromRows(!1):i._.values(e.uniqueValues(i._.toStrings(e.providedValues)||[])),r=e.sortValues(o||[]);e.allValues=r,t(r);break;case Gn.PROVIDED_CALLBACK:e.setIsLoading(!0);var n=e.providedValues,s=e.filterParams,a={success:function(o){var r=i._.values(e.uniqueValues(i._.toStrings(o)||[]));e.setIsLoading(!1);var n=e.sortValues(r||[]);e.allValues=n,t(n)},colDef:s.colDef,column:s.column,columnApi:s.columnApi,api:s.api,context:s.context};window.setTimeout(function(){return n(a)},0);break;default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(function(t){return e.updateAvailableValues(t||[])}).then(function(){return e.initialised=!0}),this.allValuesPromise},e.prototype.setValuesType=function(e){this.valuesType=e},e.prototype.getValuesType=function(){return this.valuesType},e.prototype.isValueAvailable=function(e){return this.availableValues.has(e)},e.prototype.showAvailableOnly=function(){return this.valuesType===Gn.TAKEN_FROM_GRID_VALUES},e.prototype.updateAvailableValues=function(t){var o=this.showAvailableOnly()?this.sortValues(this.getValuesFromRows(!0)):t;this.availableValues=i._.convertToSet(o),this.localEventService.dispatchEvent({type:e.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues()},e.prototype.sortValues=function(e){return this.suppressSorting?e:!this.filterParams.excelMode||e.indexOf(null)<0?e.sort(this.comparator):e.filter(function(e){return null!=e}).sort(this.comparator).concat(null)},e.prototype.getValuesFromRows=function(e){var t=this;return void 0===e&&(e=!1),this.clientSideValuesExtractor?this.clientSideValuesExtractor.extractUniqueValues(function(o){return!e||t.doesRowPassOtherFilters(o)}):(console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),[])},e.prototype.setMiniFilter=function(e){return e=i._.makeNull(e),this.miniFilterText!==e&&(this.miniFilterText=e,this.updateDisplayedValues(),!0)},e.prototype.getMiniFilter=function(){return this.miniFilterText},e.prototype.updateDisplayedValues=function(){var e=this;if(null!=this.miniFilterText){this.displayedValues=[];var t=this.caseFormat(this.formatter(this.miniFilterText)||""),o=function(o){return null!=o&&e.caseFormat(o).indexOf(t)>=0};this.availableValues.forEach(function(t){if(null==t)e.filterParams.excelMode&&o(e.translate("blanks"))&&e.displayedValues.push(t);else{var r=e.formatter(t),n=e.valueFormatterService.formatValue(e.column,null,r,e.filterParams.valueFormatter,!1);(o(r)||o(n))&&e.displayedValues.push(t)}})}else this.displayedValues=i._.values(this.availableValues)},e.prototype.getDisplayedValueCount=function(){return this.displayedValues.length},e.prototype.getDisplayedValue=function(e){return this.displayedValues[e]},e.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedValues.size>0:this.allValues.length!==this.selectedValues.size},e.prototype.getValues=function(){return this.allValues.slice()},e.prototype.selectAllMatchingMiniFilter=function(e){var t=this;void 0===e&&(e=!1),null==this.miniFilterText?this.selectedValues=i._.convertToSet(this.allValues):(e&&this.selectedValues.clear(),this.displayedValues.forEach(function(e){return t.selectedValues.add(e)}))},e.prototype.deselectAllMatchingMiniFilter=function(){var e=this;null==this.miniFilterText?this.selectedValues.clear():this.displayedValues.forEach(function(t){return e.selectedValues.delete(t)})},e.prototype.selectValue=function(e){this.selectedValues.add(e)},e.prototype.deselectValue=function(e){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayedValues),this.selectedValues.delete(e)},e.prototype.isValueSelected=function(e){return this.selectedValues.has(e)},e.prototype.isEverythingVisibleSelected=function(){var e=this;return this.displayedValues.filter(function(t){return e.isValueSelected(t)}).length===this.displayedValues.length},e.prototype.isNothingVisibleSelected=function(){var e=this;return 0===this.displayedValues.filter(function(t){return e.isValueSelected(t)}).length},e.prototype.getModel=function(){return this.hasSelections()?i._.values(this.selectedValues):null},e.prototype.setModel=function(e){var t=this;return this.allValuesPromise.then(function(o){if(null==e)t.resetSelectionState(o||[]);else{t.selectedValues.clear();var r=t.uniqueValues(o||[]);e.forEach(function(e){var o=r[t.uniqueKey(e)];void 0!==o&&t.selectedValues.add(o)})}})},e.prototype.uniqueValues=function(e){var t=this,o={};return(e||[]).forEach(function(e){var r=i._.makeNull(e),n=t.uniqueKey(r);void 0===o[n]&&(o[n]=r)}),o},e.prototype.uniqueKey=function(e){return null==e?"__<ag-grid-pseudo-null>__":this.caseFormat(e)},e.prototype.resetSelectionState=function(e){this.filterParams.defaultToNothingSelected?this.selectedValues.clear():this.selectedValues=i._.convertToSet(e||[])},e.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",e}(),Ln=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),kn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Vn=function(e){function t(o,r,n,i){var s=e.call(this,t.TEMPLATE)||this;return s.value=o,s.params=r,s.translate=n,s.isSelected=i,s}return Ln(t,e),t.prototype.init=function(){var e=this;this.render(),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.setDisabled(!!this.params.readOnly),this.params.readOnly||this.eCheckbox.onValueChange(function(o){var r=o||!1;e.isSelected=r,e.dispatchEvent({type:t.EVENT_SELECTION_CHANGED,isSelected:r})})},t.prototype.toggleSelected=function(){this.params.readOnly||(this.isSelected=!this.isSelected,this.eCheckbox.setValue(this.isSelected))},t.prototype.render=function(){var e=this.params.column,t=this.value,o=null;"function"==typeof t?t=t():o=this.getFormattedValue(this.params,e,t),this.params.showTooltips&&this.setTooltip(null!=o?o:t);var r={value:t,valueFormatted:o,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),colDef:this.params.colDef,column:this.params.column};this.renderCell(r)},t.prototype.getTooltipParams=function(){var t=e.prototype.getTooltipParams.call(this);return t.location="setFilterValue",t.colDef=this.getComponentHolder(),t},t.prototype.getFormattedValue=function(e,t,o){return this.valueFormatterService.formatValue(t,null,o,e&&e.valueFormatter,!1)},t.prototype.renderCell=function(e){var t=this,o=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,e),r=o?o.newAgStackInstance():void 0;if(null!=r)r.then(function(e){e&&(t.eCheckbox.setLabel(e.getGui()),t.addDestroyFunc(function(){return t.destroyBean(e)}))});else{var n=null==e.valueFormatted?e.value:e.valueFormatted;this.eCheckbox.setLabel(null==n?this.translate("blanks"):n)}},t.prototype.getComponentHolder=function(){return this.params.column.getColDef()},t.EVENT_SELECTION_CHANGED="selectionChanged",t.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',kn([(0,i.fsG)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),kn([(0,i.fsG)("userComponentFactory")],t.prototype,"userComponentFactory",void 0),kn([(0,i.cqo)("eCheckbox")],t.prototype,"eCheckbox",void 0),kn([i.NqP],t.prototype,"init",null),t}(i.wA2),Bn={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",noMatches:"No matches."},Wn=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Hn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Un=function(e){function t(){var t=e.call(this,"setFilter")||this;return t.valueModel=null,t.setFilterParams=null,t.virtualList=null,t.caseSensitive=!1,t.appliedModelValues=null,t}return Wn(t,e),t.prototype.postConstruct=function(){e.prototype.postConstruct.call(this),this.positionableFeature=new i.Gxm(this.eSetFilterList,{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},t.prototype.updateUiVisibility=function(){},t.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'+this.translateForSetFilter("loadingOoo")+'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">'+this.translateForSetFilter("noMatches")+'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>'},t.prototype.handleKeyDown=function(t){if(e.prototype.handleKeyDown.call(this,t),!t.defaultPrevented)switch(t.key){case i.VDZ.SPACE:this.handleKeySpace(t);break;case i.VDZ.ENTER:this.handleKeyEnter(t)}},t.prototype.handleKeySpace=function(e){var t=this.gridOptionsWrapper.getDocument();if(this.eSetFilterList.contains(t.activeElement)&&this.virtualList){var o=this.virtualList.getLastFocusedRow();if(null!=o){var r=this.virtualList.getComponentAt(o);null!=r&&(e.preventDefault(),(this.setFilterParams||{}).readOnly||r.toggleSelected())}}},t.prototype.handleKeyEnter=function(e){if(this.setFilterParams){var t=this.setFilterParams||{};t.excelMode&&!t.readOnly&&(e.preventDefault(),this.onBtApply(!1,!1,e),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}},t.prototype.getCssIdentifier=function(){return"set-filter"},t.prototype.setModelAndRefresh=function(e){var t=this;return this.valueModel?this.valueModel.setModel(e).then(function(){return t.refresh()}):i.j_S.resolve()},t.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},t.prototype.setModelIntoUi=function(e){return this.setMiniFilter(null),this.setModelAndRefresh(null==e?null:e.values)},t.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getModel();return e?{values:e,filterType:this.getFilterType()}:null},t.prototype.getFilterType=function(){return"set"},t.prototype.getValueModel=function(){return this.valueModel},t.prototype.areModelsEqual=function(e,t){return null==e&&null==t||null!=e&&null!=t&&i._.areEqual(e.values,t.values)},t.prototype.setParams=function(t){var o=this;this.applyExcelModeOptions(t),e.prototype.setParams.call(this,t),this.setFilterParams=t,this.caseSensitive=t.caseSensitive||!1,this.valueModel=new Fn(t,function(e){return o.showOrHideLoadingScreen(e)},this.valueFormatterService,function(e){return o.translateForSetFilter(e)},function(e){return o.caseFormat(e)}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()},t.prototype.applyExcelModeOptions=function(e){"windows"===e.excelMode?(e.buttons||(e.buttons=["apply","cancel"]),null==e.closeOnApply&&(e.closeOnApply=!0)):"mac"===e.excelMode&&(e.buttons||(e.buttons=["reset"]),null==e.applyMiniFilterWhileTyping&&(e.applyMiniFilterWhileTyping=!0),null==e.debounceMs&&(e.debounceMs=500))},t.prototype.addEventListenersForDataChanges=function(){var e=this;this.isValuesTakenFromGrid()&&this.addManagedListener(this.eventService,i.zW2.EVENT_CELL_VALUE_CHANGED,function(t){e.setFilterParams&&t.column===e.setFilterParams.column&&e.syncAfterDataChange()})},t.prototype.syncAfterDataChange=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then(function(){e.refresh(),e.onBtApply(!1,!0)})},t.prototype.showOrHideLoadingScreen=function(e){i._.setDisplayed(this.eFilterLoading,e)},t.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},t.prototype.initVirtualList=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.gridOptionsWrapper.getLocaleTextFunc()("ariaFilterList","Filter List"),o=this.virtualList=this.createBean(new i.CPJ("filter","listbox",t)),r=this.getRefElement("eSetFilterList");r&&r.appendChild(o.getGui());var n,s=this.setFilterParams.cellHeight;null!=s&&o.setRowHeight(s),o.setComponentCreator(function(t){return e.createSetListItem(t)}),n=this.setFilterParams.suppressSelectAll?new jn(this.valueModel):new zn(this.valueModel,function(){return e.isSelectAllSelected()}),o.setModel(n)},t.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(e)},t.prototype.createSetListItem=function(e){var o,r=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return e===t.SELECT_ALL_VALUE?((o=this.createBean(new Vn(function(){return r.getSelectAllLabel()},this.setFilterParams,function(e){return r.translateForSetFilter(e)},this.isSelectAllSelected()))).addEventListener(Vn.EVENT_SELECTION_CHANGED,function(e){return r.onSelectAll(e.isSelected)}),o):((o=this.createBean(new Vn(e,this.setFilterParams,function(e){return r.translateForSetFilter(e)},this.valueModel.isValueSelected(e)))).addEventListener(Vn.EVENT_SELECTION_CHANGED,function(t){return r.onItemSelected(e,t.isSelected)}),o)},t.prototype.initMiniFilter=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.eMiniFilter,o=this.gridOptionsWrapper.getLocaleTextFunc();t.setDisplayed(!this.setFilterParams.suppressMiniFilter),t.setValue(this.valueModel.getMiniFilter()),t.onValueChange(function(){return e.onMiniFilterInput()}),t.setInputAriaLabel(o("ariaSearchFilterValues","Search filter values")),this.addManagedListener(t.getInputElement(),"keypress",function(t){return e.onMiniFilterKeyPress(t)})},t.prototype.afterGuiAttached=function(t){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");e.prototype.afterGuiAttached.call(this,t),this.setFilterParams.excelMode&&(this.resetUiToActiveModel(),this.showOrHideResults()),this.refreshVirtualList();var o=this.eMiniFilter;o.setInputPlaceholder(this.translateForSetFilter("searchOoo")),t&&t.suppressFocus||o.getFocusableElement().focus();var r,n=!(!t||"floatingFilter"!==t.container);r=this.gridOptionsWrapper.isEnableRtl()?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0},n?(this.positionableFeature.restoreLastSize(),this.positionableFeature.setResizable(r)):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1))},t.prototype.applyModel=function(){var t=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var o=e.prototype.applyModel.call(this),r=this.getModel();return this.appliedModelValues=r?r.values.reduce(function(e,o){return e[t.caseFormat(String(o))]=!0,e},{}):null,o},t.prototype.isModelValid=function(e){return!this.setFilterParams||!this.setFilterParams.excelMode||null==e||e.values.length>0},t.prototype.doesFilterPass=function(e){var t=this;if(!this.setFilterParams||!this.valueModel||!this.appliedModelValues)return!0;var o=e.node,r=e.data,n=this.setFilterParams,s=n.colDef.keyCreator,a=n.api,l=n.colDef,u=n.column,p=n.columnApi,c=n.context,d=(0,n.valueGetter)({api:a,colDef:l,column:u,columnApi:p,context:c,data:r,getValue:function(e){return r[e]},node:o});return s&&(d=s({value:d,colDef:l,column:u,node:o,data:r,api:a,columnApi:p,context:c})),d=i._.makeNull(d),Array.isArray(d)?d.some(function(e){return!0===t.appliedModelValues[t.caseFormat(String(i._.makeNull(e)))]}):!0===this.appliedModelValues[this.caseFormat(String(d))]},t.prototype.onNewRowsLoaded=function(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()},t.prototype.isValuesTakenFromGrid=function(){return!!this.valueModel&&this.valueModel.getValuesType()===Gn.TAKEN_FROM_GRID_VALUES},t.prototype.setFilterValues=function(e){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(e).then(function(){t.refresh(),t.onUiChanged()})},t.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(Gn.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()},t.prototype.refreshFilterValues=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then(function(){e.refresh(),e.onUiChanged()})},t.prototype.onAnyFilterChanged=function(){var e=this;setTimeout(function(){if(e.isAlive()){if(!e.valueModel)throw new Error("Value model has not been created.");e.valueModel.refreshAfterAnyFilterChanged().then(function(){return e.refresh()})}},0)},t.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var e=this.setFilterParams||{};!e.readOnly&&e.applyMiniFilterWhileTyping?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},t.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.setFilterParams||{};null==e.excelMode||e.readOnly?this.refresh():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel():(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()),this.showOrHideResults()},t.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;i._.setDisplayed(this.eNoMatches,e),i._.setDisplayed(this.eSetFilterList,!e)},t.prototype.resetUiToActiveModel=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.eMiniFilter.setValue(null,!0),this.valueModel.setMiniFilter(null),this.setModelIntoUi(this.getModel()).then(function(){return e.onUiChanged(!1,"prevent")})},t.prototype.onMiniFilterKeyPress=function(e){var t=this.setFilterParams||{};e.key!==i.VDZ.ENTER||t.excelMode||t.readOnly||this.filterOnAllVisibleValues()},t.prototype.filterOnAllVisibleValues=function(e){void 0===e&&(e=!0);var t=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(t)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,e?"immediately":"debounce"),this.showOrHideResults()},t.prototype.focusRowIfAlive=function(e){var t=this;null!=e&&window.setTimeout(function(){if(!t.virtualList)throw new Error("Virtual list has not been created.");t.isAlive()&&t.virtualList.focusRow(e)},0)},t.prototype.onSelectAll=function(e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");e?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter();var t=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(t)},t.prototype.onItemSelected=function(e,t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");t?this.valueModel.selectValue(e):this.valueModel.deselectValue(e);var o=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(o)},t.prototype.setMiniFilter=function(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()},t.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},t.prototype.refresh=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh()},t.prototype.getValues=function(){return this.valueModel?this.valueModel.getValues():[]},t.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()},t.prototype.translateForSetFilter=function(e){return this.gridOptionsWrapper.getLocaleTextFunc()(e,Bn[e])},t.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},t.prototype.destroy=function(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),e.prototype.destroy.call(this)},t.prototype.caseFormat=function(e){return null==e||"string"!=typeof e||this.caseSensitive?e:e.toUpperCase()},t.SELECT_ALL_VALUE="__AG_SELECT_ALL__",Hn([(0,i.cqo)("eMiniFilter")],t.prototype,"eMiniFilter",void 0),Hn([(0,i.cqo)("eFilterLoading")],t.prototype,"eFilterLoading",void 0),Hn([(0,i.cqo)("eSetFilterList")],t.prototype,"eSetFilterList",void 0),Hn([(0,i.cqo)("eFilterNoMatches")],t.prototype,"eNoMatches",void 0),Hn([(0,i.fsG)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),t}(i.AGU),jn=function(){function e(e){this.model=e}return e.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},e.prototype.getRow=function(e){return this.model.getDisplayedValue(e)},e.prototype.isRowSelected=function(e){return this.model.isValueSelected(this.getRow(e))},e}(),zn=function(){function e(e,t){this.model=e,this.isSelectAllSelected=t}return e.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()+1},e.prototype.getRow=function(e){return 0===e?Un.SELECT_ALL_VALUE:this.model.getDisplayedValue(e-1)},e.prototype.isRowSelected=function(e){return 0===e?this.isSelectAllSelected():this.model.isValueSelected(this.getRow(e))},e}(),qn=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Zn=function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},Kn=function(e){function t(){var t=e.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;return t.availableValuesListenerAdded=!1,t}return qn(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.init=function(e){var t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),o=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(t+" "+o("ariaFilterInput","Filter Input")).addGuiEventListener("click",function(){return e.showParentFilter()}),this.params=e},t.prototype.onParentModelChanged=function(e){this.updateFloatingFilterText(e)},t.prototype.parentSetFilterInstance=function(e){this.params.parentFilterInstance(function(t){if(!(t instanceof Un))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as it's parent");e(t)})},t.prototype.addAvailableValuesListener=function(){var e=this;this.parentSetFilterInstance(function(t){var o=t.getValueModel();o&&e.addManagedListener(o,Fn.EVENT_AVAILABLE_VALUES_CHANGED,function(){return e.updateFloatingFilterText()})}),this.availableValuesListenerAdded=!0},t.prototype.updateFloatingFilterText=function(e){var t=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(function(o){var r=(e||o.getModel()||{}).values,n=o.getValueModel();if(null!=r&&null!=n){var i=t.gridOptionsWrapper.getLocaleTextFunc(),s=r.filter(function(e){return n.isValueAvailable(e)}).map(function(e){var o=t.params,r=t.valueFormatterService.formatValue(o.column,null,e,o.filterParams.valueFormatter,!1),n=null!=r?r:e;return null==n?i("blanks",Bn.blanks):n}),a=s.length>10?s.slice(0,10).concat("..."):s,l="("+s.length+") "+a.join(",");t.eFloatingFilterText.setValue(l)}else t.eFloatingFilterText.setValue("")})},Zn([(0,i.cqo)("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),Zn([(0,i.fsG)("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Zn([(0,i.fsG)("columnModel")],t.prototype,"columnModel",void 0),t}(i.wA2),Jn={moduleName:i.GXE.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:Un},{componentName:"agSetColumnFloatingFilter",componentClass:Kn}],dependantModules:[_.f]};const Xn=[{path:"companies",component:Nn},{path:"security",component:_n},{path:"system-users",component:(()=>{class e{constructor(){this.colConfig=[{field:"name",headerName:"Name",headerCheckboxSelection:!0,checkboxSelection:!0},{field:"network_name",headerName:"Network Name"},{field:"user_id",headerName:"User ID"},{field:"country",headerName:"Country",filter:"agSetColumnFilter",floatingFilterComponentParams:{suppressFilterButton:!1}}],this.rowData=[{name:"Abbott, Jane",user_id:1e3,network_name:"JANE ABBOTT JANE ABBOTT JANE ABBOTT JANE ABBOTT",country:"India"},{name:"Adams, Jane",user_id:1001,network_name:"JANE ADAMS",country:"India"},{name:"Andrews, Jane",user_id:1002,network_name:"JANE ANDREWS",country:"Pakistan"},{name:"Armstrong, Jane",user_id:1003,network_name:"JANE ARMSTRONG",country:"India"},{name:"Austin, Jane",user_id:1004,network_name:"AUSTIN, JANE",country:"India"},{name:"Bailey, Jane",user_id:1005,network_name:"BAILEY, JANE",country:"Australia"},{name:"Baker, Jane",user_id:1006,network_name:"BAKER, JANE",country:"India"},{name:"Bell, Jane",user_id:1007,network_name:"BELL, JANE",country:"Australia"},{name:"Brooks, Jane",user_id:1008,network_name:"BROOKS, JANE",country:"India"},{name:"Camphell, Joe",user_id:1009,network_name:"CAMPHELL, Joe",country:"Pakistan"},{name:"Carter, Joe",user_id:1010,network_name:"CARTER, JOE",country:"India"},{name:"Collins, Joe",user_id:1011,network_name:"COLLINS, JOE",country:"India"},{name:"Cook, Joe",user_id:1012,network_name:"COOK, JOE",country:"Pakistan"},{name:"Dixon, Jane",user_id:1013,network_name:"DIXON, JANE",country:"India"},{name:"Dunn, Jane",user_id:1014,network_name:"DUNN, JANE",country:"India"},{name:"Davis, Jane",user_id:1015,network_name:"DAVIS, JANE",country:"Australia"},{name:"Duncan, Jane",user_id:1016,network_name:"DUNCAN, JANE",country:"India"},{name:"Abbott, Jane 1",user_id:1017,network_name:"JANE ABBOTT 1",country:"India"},{name:"Adams, Jane 1",user_id:1018,network_name:"JANE ADAMS 1",country:"India"},{name:"Andrews, Jane 1",user_id:1019,network_name:"JANE ANDREWS 1",country:"Pakistan"},{name:"Armstrong, Jane 1",user_id:1020,network_name:"JANE ARMSTRONG 1",country:"India"},{name:"Austin, Jane 1",user_id:1021,network_name:"AUSTIN, JANE 1",country:"India"},{name:"Bailey, Jane 1",user_id:1022,network_name:"BAILEY, JANE 1",country:"Australia"},{name:"Baker, Jane 1",user_id:1023,network_name:"BAKER, JANE 1",country:"India"},{name:"Bell, Jane 1",user_id:1024,network_name:"BELL, JANE 1",country:"Australia"},{name:"Brooks, Jane 1",user_id:1025,network_name:"BROOKS, JANE 1",country:"India"},{name:"Camphell, Joe 1",user_id:1026,network_name:"CAMPHELL, Joe 1",country:"Pakistan"},{name:"Carter, Joe 1",user_id:1027,network_name:"CARTER, JOE 1",country:"India"},{name:"Collins, Joe 1",user_id:1028,network_name:"COLLINS, JOE 1",country:"India"},{name:"Cook, Joe 1",user_id:1029,network_name:"COOK, JOE 1",country:"Pakistan"},{name:"Dixon, Jane 1",user_id:1030,network_name:"DIXON, JANE 1",country:"India"},{name:"Dunn, Jane 1",user_id:1031,network_name:"DUNN, JANE 1",country:"India"},{name:"Davis, Jane 1",user_id:1032,network_name:"DAVIS, JANE 1",country:"Australia"},{name:"Duncan, Jane 1",user_id:1033,network_name:"DUNCAN, JANE 1",country:"India"}],this.extraModules=[Jn,M,dt],this.page=1,this.extraConfig={pagination:!0,paginationPageSize:10,suppressPaginationPanel:!0,onPaginationChanged:()=>this.onPaginationChanged()},this.totalRows=this.rowData.length,this.excelFileParams={fileName:"system_users.xlsx"},this.csvFileParams={fileName:"system_users.csv"}}ngOnInit(){}onGridReadyCB(e){this.grid=e}onFilterTextBoxChanged(){this.grid.api.setQuickFilter(document.getElementById("filter-text-box").value)}loadPage(e){this.page=e,this.grid.api.paginationGoToPage(e-1)}onPaginationChanged(){var e;(null===(e=this.grid)||void 0===e?void 0:e.api)&&(this.totalRows=this.grid.api.getDisplayedRowCount())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-system-users"]],decls:21,vars:12,consts:[[1,"my-1"],[1,"d-flex","justify-content-between","mb-1","align-items-center"],[1,"ems-page-heading"],[1,"d-flex"],[1,"form-group","me-2"],["id","filter-text-box","type","text","placeholder","Global Filter...",1,"form-control",3,"input"],["ngbDropdown","","container","body",1,"d-inline"],["type","button","ngbDropdownToggle","",1,"btn","btn-info","btn-ems","btn-ems-green","me-2"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],[1,"my-1","dropdown-divider"],[2,"height","500px"],[3,"colConfig","rowData","extraConfig","extraModules","gridApi"],[1,"ems-pagination-panel","d-flex","justify-content-end","px-2","py-1"],[1,"d-flex","justify-content-end",3,"pageSize","collectionSize","page","maxSize","rotate","ellipses","boundaryLinks","pageChange"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n._uU(3),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"input",5),n.NdJ("input",function(){return t.onFilterTextBoxChanged()}),n.qZA(),n.qZA(),n.TgZ(7,"div"),n.TgZ(8,"div",6),n.TgZ(9,"button",7),n._uU(10,"Export"),n.qZA(),n.TgZ(11,"div",8),n.TgZ(12,"button",9),n.NdJ("click",function(){return t.grid.api.exportDataAsExcel(t.excelFileParams)}),n._uU(13,"Export As Excel"),n.qZA(),n._UZ(14,"div",10),n.TgZ(15,"button",9),n.NdJ("click",function(){return t.grid.api.exportDataAsCsv(t.csvFileParams)}),n._uU(16,"Export As CSV"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",11),n.TgZ(18,"app-ag-grid-custom",12),n.NdJ("gridApi",function(e){return t.onGridReadyCB(e)}),n.qZA(),n.qZA(),n.TgZ(19,"div",13),n.TgZ(20,"ngb-pagination",14),n.NdJ("pageChange",function(e){return t.page=e})("pageChange",function(e){return t.loadPage(e)}),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.hij("System Users (",t.totalRows,")"),n.xp6(15),n.Q6J("colConfig",t.colConfig)("rowData",t.rowData)("extraConfig",t.extraConfig)("extraModules",t.extraModules),n.xp6(2),n.Q6J("pageSize",10)("collectionSize",t.totalRows)("page",t.page)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0))},directives:[d.jt,d.iD,d.Vi,d.TH,Tn,d.N9],styles:[""]}),e})()}];let Yn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[g.Bz.forChild(Xn)],g.Bz]}),e})(),Qn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[Yn,h]]}),e})()}}]);